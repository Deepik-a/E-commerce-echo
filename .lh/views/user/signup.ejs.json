{
    "sourceFile": "views/user/signup.ejs",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 18,
            "patches": [
                {
                    "date": 1736401192026,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1736401201710,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -319,8 +319,52 @@\n     \r\n     document.getElementById('toggle-password-2').addEventListener('click', function() {\r\n       togglePassword('confirmpassword', this);\r\n     });\r\n-    \r\n+\r\n+\r\n+    <script src=\"https://cdn.jsdelivr.net/npm/sweetalert2@11\"></script>\r\n+\r\n+  document.getElementById(\"register-form\").addEventListener(\"submit\", async (e) => {\r\n+    e.preventDefault();\r\n+\r\n+    const form = e.target;\r\n+    const formData = new FormData(form);\r\n+    const data = Object.fromEntries(formData);\r\n+\r\n+    try {\r\n+      const response = await fetch(form.action, {\r\n+        method: form.method,\r\n+        headers: {\r\n+          \"Content-Type\": \"application/json\",\r\n+        },\r\n+        body: JSON.stringify(data),\r\n+      });\r\n+\r\n+      const result = await response.json();\r\n+\r\n+      if (result.success) {\r\n+        // Redirect to OTP page\r\n+        window.location.href = result.redirectUrl;\r\n+      } else {\r\n+        // Show SweetAlert for existing user\r\n+        Swal.fire({\r\n+          icon: \"error\",\r\n+          title: \"Oops...\",\r\n+          text: result.message,\r\n+          footer: '<a href=\"/login\">Go to Login Page</a>',\r\n+        });\r\n+      }\r\n+    } catch (error) {\r\n+      console.error(\"Error during signup:\", error);\r\n+      Swal.fire({\r\n+        icon: \"error\",\r\n+        title: \"Server Error\",\r\n+        text: \"An unexpected error occurred. Please try again later.\",\r\n+      });\r\n+    }\r\n+  });\r\n+\r\n+\r\n     </script>\r\n     \r\n     \n\\ No newline at end of file\n"
                },
                {
                    "date": 1736401219385,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -321,9 +321,9 @@\n       togglePassword('confirmpassword', this);\r\n     });\r\n \r\n \r\n-    <script src=\"https://cdn.jsdelivr.net/npm/sweetalert2@11\"></script>\r\n+ \r\n \r\n   document.getElementById(\"register-form\").addEventListener(\"submit\", async (e) => {\r\n     e.preventDefault();\r\n \r\n"
                },
                {
                    "date": 1736401253223,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -320,11 +320,10 @@\n     document.getElementById('toggle-password-2').addEventListener('click', function() {\r\n       togglePassword('confirmpassword', this);\r\n     });\r\n \r\n+    \r\n \r\n- \r\n-\r\n   document.getElementById(\"register-form\").addEventListener(\"submit\", async (e) => {\r\n     e.preventDefault();\r\n \r\n     const form = e.target;\r\n"
                },
                {
                    "date": 1736401258439,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -320,10 +320,12 @@\n     document.getElementById('toggle-password-2').addEventListener('click', function() {\r\n       togglePassword('confirmpassword', this);\r\n     });\r\n \r\n-    \r\n \r\n+\r\n+    //checking for ex\r\n+\r\n   document.getElementById(\"register-form\").addEventListener(\"submit\", async (e) => {\r\n     e.preventDefault();\r\n \r\n     const form = e.target;\r\n"
                },
                {
                    "date": 1736401336853,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -95,9 +95,9 @@\n                 margin-bottom: 20px;\r\n             }\r\n         }\r\n     </style>\r\n-\r\n+<script src=\"https://cdn.jsdelivr.net/npm/sweetalert2@11\"></script>\r\n     <div class=\"signup-container\">\r\n         <div class=\"container py-5\">\r\n             <div class=\"equal-height-row justify-content-center\">\r\n                 <div class=\"col-md-6 col-lg-6 animate__animated animate__fadeInLeft equal-height-col\">\r\n@@ -322,9 +322,9 @@\n     });\r\n \r\n \r\n \r\n-    //checking for ex\r\n+    //checking for existing user\r\n \r\n   document.getElementById(\"register-form\").addEventListener(\"submit\", async (e) => {\r\n     e.preventDefault();\r\n \r\n"
                },
                {
                    "date": 1736401368938,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -95,9 +95,9 @@\n                 margin-bottom: 20px;\r\n             }\r\n         }\r\n     </style>\r\n-<script src=\"https://cdn.jsdelivr.net/npm/sweetalert2@11\"></script>\r\n+\r\n     <div class=\"signup-container\">\r\n         <div class=\"container py-5\">\r\n             <div class=\"equal-height-row justify-content-center\">\r\n                 <div class=\"col-md-6 col-lg-6 animate__animated animate__fadeInLeft equal-height-col\">\r\n"
                },
                {
                    "date": 1736401666189,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -322,50 +322,8 @@\n     });\r\n \r\n \r\n \r\n-    //checking for existing user\r\n \r\n-  document.getElementById(\"register-form\").addEventListener(\"submit\", async (e) => {\r\n-    e.preventDefault();\r\n-\r\n-    const form = e.target;\r\n-    const formData = new FormData(form);\r\n-    const data = Object.fromEntries(formData);\r\n-\r\n-    try {\r\n-      const response = await fetch(form.action, {\r\n-        method: form.method,\r\n-        headers: {\r\n-          \"Content-Type\": \"application/json\",\r\n-        },\r\n-        body: JSON.stringify(data),\r\n-      });\r\n-\r\n-      const result = await response.json();\r\n-\r\n-      if (result.success) {\r\n-        // Redirect to OTP page\r\n-        window.location.href = result.redirectUrl;\r\n-      } else {\r\n-        // Show SweetAlert for existing user\r\n-        Swal.fire({\r\n-          icon: \"error\",\r\n-          title: \"Oops...\",\r\n-          text: result.message,\r\n-          footer: '<a href=\"/login\">Go to Login Page</a>',\r\n-        });\r\n-      }\r\n-    } catch (error) {\r\n-      console.error(\"Error during signup:\", error);\r\n-      Swal.fire({\r\n-        icon: \"error\",\r\n-        title: \"Server Error\",\r\n-        text: \"An unexpected error occurred. Please try again later.\",\r\n-      });\r\n-    }\r\n-  });\r\n-\r\n-\r\n     </script>\r\n     \r\n     \n\\ No newline at end of file\n"
                },
                {
                    "date": 1736401898265,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -322,8 +322,7 @@\n     });\r\n \r\n \r\n \r\n-\r\n     </script>\r\n     \r\n     \n\\ No newline at end of file\n"
                },
                {
                    "date": 1736402214548,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -320,9 +320,62 @@\n     document.getElementById('toggle-password-2').addEventListener('click', function() {\r\n       togglePassword('confirmpassword', this);\r\n     });\r\n \r\n+ \r\n \r\n+  const form = e.target;\r\n+  const formData = new FormData(form);\r\n+  const data = Object.fromEntries(formData);\r\n \r\n+  try {\r\n+    const response = await fetch(\"/signup\", {\r\n+      method: \"POST\",\r\n+      headers: {\r\n+        \"Content-Type\": \"application/json\",\r\n+      },\r\n+      body: JSON.stringify(data),\r\n+    });\r\n+\r\n+    const result = await response.json();\r\n+\r\n+    if (result.success) {\r\n+      // If signup is successful\r\n+      Swal.fire({\r\n+        icon: \"success\",\r\n+        title: \"Signup Successful\",\r\n+        text: \"Redirecting to OTP verification...\",\r\n+      }).then(() => {\r\n+        window.location.href = result.redirectUrl; // Redirect to OTP page\r\n+      });\r\n+    } else {\r\n+      // If user already exists\r\n+      if (response.status === 400) {\r\n+        Swal.fire({\r\n+          icon: \"error\",\r\n+          title: \"User Already Exists\",\r\n+          text: result.message,\r\n+          footer: '<a href=\"/login\">Go to Login Page</a>',\r\n+        });\r\n+      } else {\r\n+        // Handle other errors\r\n+        Swal.fire({\r\n+          icon: \"error\",\r\n+          title: \"Signup Failed\",\r\n+          text: result.message,\r\n+        });\r\n+      }\r\n+    }\r\n+  } catch (error) {\r\n+    console.error(\"Error during signup:\", error);\r\n+    Swal.fire({\r\n+      icon: \"error\",\r\n+      title: \"Server Error\",\r\n+      text: \"An unexpected error occurred. Please try again later.\",\r\n+    });\r\n+  }\r\n+});\r\n+\r\n+\r\n     </script>\r\n     \r\n     \n\\ No newline at end of file\n"
                },
                {
                    "date": 1736402237786,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -320,9 +320,10 @@\n     document.getElementById('toggle-password-2').addEventListener('click', function() {\r\n       togglePassword('confirmpassword', this);\r\n     });\r\n \r\n- \r\n+    document.getElementById(\"register-form\").addEventListener(\"submit\", async (e) => {\r\n+  e.preventDefault(); // Prevent the default form submission\r\n \r\n   const form = e.target;\r\n   const formData = new FormData(form);\r\n   const data = Object.fromEntries(formData);\r\n@@ -372,10 +373,10 @@\n       title: \"Server Error\",\r\n       text: \"An unexpected error occurred. Please try again later.\",\r\n     });\r\n   }\r\n-});\r\n \r\n \r\n+\r\n     </script>\r\n     \r\n     \n\\ No newline at end of file\n"
                },
                {
                    "date": 1736402249232,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -320,10 +320,9 @@\n     document.getElementById('toggle-password-2').addEventListener('click', function() {\r\n       togglePassword('confirmpassword', this);\r\n     });\r\n \r\n-    document.getElementById(\"register-form\").addEventListener(\"submit\", async (e) => {\r\n-  e.preventDefault(); // Prevent the default form submission\r\n+  / Prevent the default form submission\r\n \r\n   const form = e.target;\r\n   const formData = new FormData(form);\r\n   const data = Object.fromEntries(formData);\r\n@@ -373,10 +372,10 @@\n       title: \"Server Error\",\r\n       text: \"An unexpected error occurred. Please try again later.\",\r\n     });\r\n   }\r\n+});\r\n \r\n \r\n-\r\n     </script>\r\n     \r\n     \n\\ No newline at end of file\n"
                },
                {
                    "date": 1736402274645,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -309,8 +309,9 @@\n       // If no errors, submit the form\r\n       if (!hasError) {\r\n         document.getElementById('register-form').submit();\r\n       }\r\n+      \r\n     });\r\n     \r\n     // Event listeners for password toggling\r\n     document.getElementById('toggle-password-1').addEventListener('click', function() {\r\n@@ -320,62 +321,9 @@\n     document.getElementById('toggle-password-2').addEventListener('click', function() {\r\n       togglePassword('confirmpassword', this);\r\n     });\r\n \r\n-  / Prevent the default form submission\r\n \r\n-  const form = e.target;\r\n-  const formData = new FormData(form);\r\n-  const data = Object.fromEntries(formData);\r\n \r\n-  try {\r\n-    const response = await fetch(\"/signup\", {\r\n-      method: \"POST\",\r\n-      headers: {\r\n-        \"Content-Type\": \"application/json\",\r\n-      },\r\n-      body: JSON.stringify(data),\r\n-    });\r\n-\r\n-    const result = await response.json();\r\n-\r\n-    if (result.success) {\r\n-      // If signup is successful\r\n-      Swal.fire({\r\n-        icon: \"success\",\r\n-        title: \"Signup Successful\",\r\n-        text: \"Redirecting to OTP verification...\",\r\n-      }).then(() => {\r\n-        window.location.href = result.redirectUrl; // Redirect to OTP page\r\n-      });\r\n-    } else {\r\n-      // If user already exists\r\n-      if (response.status === 400) {\r\n-        Swal.fire({\r\n-          icon: \"error\",\r\n-          title: \"User Already Exists\",\r\n-          text: result.message,\r\n-          footer: '<a href=\"/login\">Go to Login Page</a>',\r\n-        });\r\n-      } else {\r\n-        // Handle other errors\r\n-        Swal.fire({\r\n-          icon: \"error\",\r\n-          title: \"Signup Failed\",\r\n-          text: result.message,\r\n-        });\r\n-      }\r\n-    }\r\n-  } catch (error) {\r\n-    console.error(\"Error during signup:\", error);\r\n-    Swal.fire({\r\n-      icon: \"error\",\r\n-      title: \"Server Error\",\r\n-      text: \"An unexpected error occurred. Please try again later.\",\r\n-    });\r\n-  }\r\n-});\r\n-\r\n-\r\n     </script>\r\n     \r\n     \n\\ No newline at end of file\n"
                },
                {
                    "date": 1736402286594,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -309,9 +309,8 @@\n       // If no errors, submit the form\r\n       if (!hasError) {\r\n         document.getElementById('register-form').submit();\r\n       }\r\n-      \r\n     });\r\n     \r\n     // Event listeners for password toggling\r\n     document.getElementById('toggle-password-1').addEventListener('click', function() {\r\n"
                },
                {
                    "date": 1736402292332,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -309,9 +309,14 @@\n       // If no errors, submit the form\r\n       if (!hasError) {\r\n         document.getElementById('register-form').submit();\r\n       }\r\n+\r\n+      res.status(500).json({\r\n+      success: false,\r\n+      message: \"An unexpected error occurred. Please try again later.\",\r\n     });\r\n+    });\r\n     \r\n     // Event listeners for password toggling\r\n     document.getElementById('toggle-password-1').addEventListener('click', function() {\r\n       togglePassword('password', this);\r\n"
                },
                {
                    "date": 1736402302897,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -309,14 +309,9 @@\n       // If no errors, submit the form\r\n       if (!hasError) {\r\n         document.getElementById('register-form').submit();\r\n       }\r\n-\r\n-      res.status(500).json({\r\n-      success: false,\r\n-      message: \"An unexpected error occurred. Please try again later.\",\r\n     });\r\n-    });\r\n     \r\n     // Event listeners for password toggling\r\n     document.getElementById('toggle-password-1').addEventListener('click', function() {\r\n       togglePassword('password', this);\r\n@@ -327,7 +322,49 @@\n     });\r\n \r\n \r\n \r\n+  const form = e.target;\r\n+  const formData = new FormData(form);\r\n+  const data = Object.fromEntries(formData);\r\n+\r\n+  try {\r\n+    const response = await fetch(\"/signup\", {\r\n+      method: \"POST\",\r\n+      headers: {\r\n+        \"Content-Type\": \"application/json\",\r\n+      },\r\n+      body: JSON.stringify(data),\r\n+    });\r\n+\r\n+    const result = await response.json();\r\n+\r\n+    if (result.success) {\r\n+      Swal.fire({\r\n+        icon: \"success\",\r\n+        title: \"Signup Successful\",\r\n+        text: \"Redirecting to OTP verification...\",\r\n+      }).then(() => {\r\n+        window.location.href = result.redirectUrl; // Redirect to OTP verification\r\n+      });\r\n+    } else {\r\n+      Swal.fire({\r\n+        icon: \"error\",\r\n+        title: \"Signup Failed\",\r\n+        text: result.message,\r\n+        footer: '<a href=\"/login\">Already have an account? Login</a>',\r\n+      });\r\n+    }\r\n+  } catch (error) {\r\n+    console.error(\"Error during signup:\", error);\r\n+    Swal.fire({\r\n+      icon: \"error\",\r\n+      title: \"Server Error\",\r\n+      text: \"An unexpected error occurred. Please try again later.\",\r\n+    });\r\n+  }\r\n+});\r\n+ \r\n+\r\n     </script>\r\n     \r\n     \n\\ No newline at end of file\n"
                },
                {
                    "date": 1736402309191,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -322,48 +322,10 @@\n     });\r\n \r\n \r\n \r\n-  const form = e.target;\r\n-  const formData = new FormData(form);\r\n-  const data = Object.fromEntries(formData);\r\n+ \r\n \r\n-  try {\r\n-    const response = await fetch(\"/signup\", {\r\n-      method: \"POST\",\r\n-      headers: {\r\n-        \"Content-Type\": \"application/json\",\r\n-      },\r\n-      body: JSON.stringify(data),\r\n-    });\r\n-\r\n-    const result = await response.json();\r\n-\r\n-    if (result.success) {\r\n-      Swal.fire({\r\n-        icon: \"success\",\r\n-        title: \"Signup Successful\",\r\n-        text: \"Redirecting to OTP verification...\",\r\n-      }).then(() => {\r\n-        window.location.href = result.redirectUrl; // Redirect to OTP verification\r\n-      });\r\n-    } else {\r\n-      Swal.fire({\r\n-        icon: \"error\",\r\n-        title: \"Signup Failed\",\r\n-        text: result.message,\r\n-        footer: '<a href=\"/login\">Already have an account? Login</a>',\r\n-      });\r\n-    }\r\n-  } catch (error) {\r\n-    console.error(\"Error during signup:\", error);\r\n-    Swal.fire({\r\n-      icon: \"error\",\r\n-      title: \"Server Error\",\r\n-      text: \"An unexpected error occurred. Please try again later.\",\r\n-    });\r\n-  }\r\n-});\r\n  \r\n \r\n     </script>\r\n     \r\n"
                },
                {
                    "date": 1736402315645,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -309,9 +309,49 @@\n       // If no errors, submit the form\r\n       if (!hasError) {\r\n         document.getElementById('register-form').submit();\r\n       }\r\n+\r\n+      const form = e.target;\r\n+  const formData = new FormData(form);\r\n+  const data = Object.fromEntries(formData);\r\n+\r\n+  try {\r\n+    const response = await fetch(\"/signup\", {\r\n+      method: \"POST\",\r\n+      headers: {\r\n+        \"Content-Type\": \"application/json\",\r\n+      },\r\n+      body: JSON.stringify(data),\r\n     });\r\n+\r\n+    const result = await response.json();\r\n+\r\n+    if (result.success) {\r\n+      Swal.fire({\r\n+        icon: \"success\",\r\n+        title: \"Signup Successful\",\r\n+        text: \"Redirecting to OTP verification...\",\r\n+      }).then(() => {\r\n+        window.location.href = result.redirectUrl; // Redirect to OTP verification\r\n+      });\r\n+    } else {\r\n+      Swal.fire({\r\n+        icon: \"error\",\r\n+        title: \"Signup Failed\",\r\n+        text: result.message,\r\n+        footer: '<a href=\"/login\">Already have an account? Login</a>',\r\n+      });\r\n+    }\r\n+  } catch (error) {\r\n+    console.error(\"Error during signup:\", error);\r\n+    Swal.fire({\r\n+      icon: \"error\",\r\n+      title: \"Server Error\",\r\n+      text: \"An unexpected error occurred. Please try again later.\",\r\n+    });\r\n+  }\r\n+\r\n     \r\n     // Event listeners for password toggling\r\n     document.getElementById('toggle-password-1').addEventListener('click', function() {\r\n       togglePassword('password', this);\r\n"
                },
                {
                    "date": 1736402429232,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -164,209 +164,7 @@\n   <%- include('footer') %>\r\n \r\n \r\n   <!-----------------------------------------------------------validation--------------------------> \r\n-  <script>\r\n-    // Clear error messages function\r\n-    function clearErrors() {\r\n-      document.getElementById('nameError').textContent = \"\";\r\n-      document.getElementById('emailError').textContent = \"\";\r\n-      document.getElementById('phoneError').textContent = \"\";\r\n-      document.getElementById('passwordError').textContent = \"\";\r\n-      document.getElementById('confirmPasswordError').textContent = \"\";\r\n-    }\r\n-    \r\n-    // Toggle password visibility function\r\n-    function togglePassword(id, toggle) {\r\n-      const pass = document.getElementById(id);\r\n-      const type = pass.getAttribute('type') === 'password' ? 'text' : 'password';\r\n-      pass.setAttribute('type', type);\r\n-      toggle.innerHTML = type === 'password' ? '<i class=\"bi bi-eye-slash\"></i>' : '<i class=\"bi bi-eye\"></i>';\r\n-    }\r\n-    \r\n-    // Email validation function\r\n-    function checkEmail(email) {\r\n-      const re = /^\\S+@\\S+\\.\\S+$/;\r\n-      return re.test(email);\r\n-    }\r\n-    \r\n-    // Password validation function\r\n-    function validatePassword(password) {\r\n-      return password.length >= 8 &&\r\n-             /[A-Z]/.test(password) &&\r\n-             /[a-z]/.test(password) &&\r\n-             /\\d/.test(password) &&\r\n-             /[!@#$%^&*()_+\\-=[\\]{};':\"\\\\|,.<>/?]/.test(password);\r\n-    }\r\n-    \r\n-    // Phone validation function\r\n-    function validatePhone(phone) {\r\n-      const phoneRe = /^\\d{10}$/;\r\n-      return phoneRe.test(phone);\r\n-    }\r\n-    \r\n-    // Event listener for form submission\r\n-    document.getElementById('register-form').addEventListener('submit', function(event) {\r\n-      // Prevent form submission initially\r\n-      event.preventDefault();\r\n-    \r\n-      // Clear any previous errors\r\n-      clearErrors();\r\n-    \r\n-      let hasError = false;\r\n-    \r\n-      // Get form values\r\n-      const name = document.getElementById('name').value.trim();\r\n-      const email = document.getElementById('email').value.trim();\r\n-      const phone = document.getElementById('phone').value.trim();\r\n-      const password = document.getElementById('password').value.trim();\r\n-      const confirmPassword = document.getElementById('confirmpassword').value.trim();\r\n-    \r\n-      // Validate Name\r\n-      if (name === \"\") {\r\n-        Swal.fire({\r\n-          title: \"Error\",\r\n-          text: \"Name is required\",\r\n-          icon: \"error\"\r\n-        });\r\n-        hasError = true;\r\n-      } else if (name.length < 5 || name.length > 25 || !isNaN(name)) {\r\n-        Swal.fire({\r\n-          title: \"Error\",\r\n-          text: \"Name must be between 5 and 25 characters long, and should not contain numbers\",\r\n-          icon: \"error\"\r\n-        });\r\n-        hasError = true;\r\n-      }\r\n-    \r\n-      // Validate Email\r\n-      if (email === \"\") {\r\n-        Swal.fire({\r\n-          title: \"Error\",\r\n-          text: \"Email is required\",\r\n-          icon: \"error\"\r\n-        });\r\n-        hasError = true;\r\n-      } else if (!checkEmail(email)) {\r\n-        Swal.fire({\r\n-          title: \"Error\",\r\n-          text: \"Email must be valid\",\r\n-          icon: \"error\"\r\n-        });\r\n-        hasError = true;\r\n-      }\r\n-    \r\n-      // Validate Phone\r\n-      if (phone === \"\") {\r\n-        Swal.fire({\r\n-          title: \"Error\",\r\n-          text: \"Phone number is required\",\r\n-          icon: \"error\"\r\n-        });\r\n-        hasError = true;\r\n-      } else if (!validatePhone(phone)) {\r\n-        Swal.fire({\r\n-          title: \"Error\",\r\n-          text: \"Phone number must be 10 digits\",\r\n-          icon: \"error\"\r\n-        });\r\n-        hasError = true;\r\n-      }\r\n-    \r\n-      // Validate Password\r\n-      if (password === \"\") {\r\n-        Swal.fire({\r\n-          title: \"Error\",\r\n-          text: \"Password is required\",\r\n-          icon: \"error\"\r\n-        });\r\n-        hasError = true;\r\n-      } else if (!validatePassword(password)) {\r\n-        Swal.fire({\r\n-          title: \"Error\",\r\n-          text: \"Password must be at least 8 characters long, contain uppercase, lowercase, a number, and a special character\",\r\n-          icon: \"error\"\r\n-        });\r\n-        hasError = true;\r\n-      }\r\n-    \r\n-      // Validate Confirm Password\r\n-      if (confirmPassword === \"\") {\r\n-        Swal.fire({\r\n-          title: \"Error\",\r\n-          text: \"Confirm password is required\",\r\n-          icon: \"error\"\r\n-        });\r\n-        hasError = true;\r\n-      } else if (password !== confirmPassword) {\r\n-        Swal.fire({\r\n-          title: \"Error\",\r\n-          text: \"Passwords do not match\",\r\n-          icon: \"error\"\r\n-        });\r\n-        hasError = true;\r\n-      }\r\n-    \r\n-      // If no errors, submit the form\r\n-      if (!hasError) {\r\n-        document.getElementById('register-form').submit();\r\n-      }\r\n \r\n-      const form = e.target;\r\n-  const formData = new FormData(form);\r\n-  const data = Object.fromEntries(formData);\r\n-\r\n-  try {\r\n-    const response = await fetch(\"/signup\", {\r\n-      method: \"POST\",\r\n-      headers: {\r\n-        \"Content-Type\": \"application/json\",\r\n-      },\r\n-      body: JSON.stringify(data),\r\n-    });\r\n-\r\n-    const result = await response.json();\r\n-\r\n-    if (result.success) {\r\n-      Swal.fire({\r\n-        icon: \"success\",\r\n-        title: \"Signup Successful\",\r\n-        text: \"Redirecting to OTP verification...\",\r\n-      }).then(() => {\r\n-        window.location.href = result.redirectUrl; // Redirect to OTP verification\r\n-      });\r\n-    } else {\r\n-      Swal.fire({\r\n-        icon: \"error\",\r\n-        title: \"Signup Failed\",\r\n-        text: result.message,\r\n-        footer: '<a href=\"/login\">Already have an account? Login</a>',\r\n-      });\r\n-    }\r\n-  } catch (error) {\r\n-    console.error(\"Error during signup:\", error);\r\n-    Swal.fire({\r\n-      icon: \"error\",\r\n-      title: \"Server Error\",\r\n-      text: \"An unexpected error occurred. Please try again later.\",\r\n-    });\r\n-  }\r\n-\r\n     \r\n-    // Event listeners for password toggling\r\n-    document.getElementById('toggle-password-1').addEventListener('click', function() {\r\n-      togglePassword('password', this);\r\n-    });\r\n-    \r\n-    document.getElementById('toggle-password-2').addEventListener('click', function() {\r\n-      togglePassword('confirmpassword', this);\r\n-    });\r\n-\r\n-\r\n-\r\n- \r\n-\r\n- \r\n-\r\n-    </script>\r\n-    \r\n     \n\\ No newline at end of file\n"
                }
            ],
            "date": 1736401192026,
            "name": "Commit-0",
            "content": "<%- include('navbar') %>\r\n\r\n\r\n<title>Signup</title>\r\n    <link href=\"https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/css/bootstrap.min.css\" rel=\"stylesheet\">\r\n    <link href=\"https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css\" rel=\"stylesheet\">\r\n    <link href=\"https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.11.1/font/bootstrap-icons.min.css\" rel=\"stylesheet\">\r\n    <style>\r\n        .signup-container {\r\n            min-height: 100vh;\r\n            display: flex;\r\n            align-items: center;\r\n            background-image: url('../../uploads/pexels-muhammad-khairul-iddin-adnan-267454-808510\\ \\(1\\).jpg');\r\n                background-position: center;\r\n    background-size: cover;\r\n    background-repeat: no-repeat;\r\n    box-sizing: border-box;\r\n        }\r\n\r\n        .equal-height-row {\r\n            display: flex;\r\n            align-items: stretch;\r\n            min-height: 600px;\r\n        }\r\n\r\n        .equal-height-col {\r\n            display: flex;\r\n            flex-direction: column;\r\n        }\r\n\r\n        .image-wrapper {\r\n            height: 100%;\r\n        }\r\n\r\n        .image-wrapper img {\r\n            width: 100%;\r\n            height: 100%;\r\n            object-fit: cover;\r\n           \r\n        }\r\n\r\n        .signup-card {\r\n            background: rgba(255, 255, 255, 0.95);\r\n          \r\n            box-shadow: 0 0 20px rgba(0,0,0,0.1);\r\n            padding: 2rem;\r\n            height: 100%;\r\n        }\r\n\r\n        .form-control:focus {\r\n            border-color: #508d4e;\r\n            box-shadow: 0 0 0 0.25rem rgba(80, 141, 78, 0.25);\r\n        }\r\n\r\n        .form-control {\r\n            border-radius: 10px;\r\n            padding: 0.75rem;\r\n        }\r\n\r\n        .btn-custom {\r\n            background-color: #1A5319;\r\n            color: white;\r\n            transition: all 0.3s ease;\r\n            border: none;\r\n        }\r\n\r\n        .btn-custom:hover {\r\n            background-color: #1A5319;\r\n            color: aliceblue;\r\n            transform: translateY(-2px);\r\n        }\r\n\r\n        .form-floating > label {\r\n            color: #666;\r\n            padding-left: 1rem;\r\n        }\r\n\r\n        .toggle-password {\r\n            cursor: pointer;\r\n            color: #666;\r\n        }\r\n\r\n        .toggle-password:hover {\r\n            color: #1A5319;\r\n        }\r\n\r\n        @media (max-width: 768px) {\r\n            .equal-height-row {\r\n                flex-direction: column;\r\n                min-height: auto;\r\n            }\r\n            \r\n            .image-wrapper {\r\n                height: 300px;\r\n                margin-bottom: 20px;\r\n            }\r\n        }\r\n    </style>\r\n\r\n    <div class=\"signup-container\">\r\n        <div class=\"container py-5\">\r\n            <div class=\"equal-height-row justify-content-center\">\r\n                <div class=\"col-md-6 col-lg-6 animate__animated animate__fadeInLeft equal-height-col\">\r\n                    <div class=\"image-wrapper\">\r\n                        <img src=\"../../uploads/playful-family-having-funny-pillow-fight-bed.jpg\" alt=\"Comfortable bed\">\r\n                    </div>\r\n                </div>\r\n                <div class=\"col-md-6 col-lg-5 animate__animated animate__fadeInRight equal-height-col\">\r\n                    <div class=\"signup-card\">\r\n                        <h2 class=\"text-center mb-4\">Create Account</h2>\r\n                        <form action=\"/signup\" method=\"post\" id=\"register-form\">\r\n                            <div class=\"form-floating mb-4\">\r\n                                <input type=\"text\" name=\"name\" id=\"name\" class=\"form-control\" placeholder=\"Name\" />\r\n                                <label for=\"name\">Name</label>\r\n                                <small id=\"nameError\" class=\"text-danger\"></small>\r\n                            </div>\r\n\r\n                            <div class=\"form-floating mb-4\">\r\n                                <input type=\"email\" name=\"email\" id=\"email\" class=\"form-control\" placeholder=\"Email\" />\r\n                                <label for=\"email\">Email address</label>\r\n                                <small id=\"emailError\" class=\"text-danger\"></small>\r\n                            </div>\r\n\r\n                            <div class=\"form-floating mb-4\">\r\n                                <input type=\"text\" name=\"phone\" id=\"phone\" class=\"form-control\" placeholder=\"Phone\" />\r\n                                <label for=\"phone\">Phone Number</label>\r\n                                <small id=\"phoneError\" class=\"text-danger\"></small>\r\n                            </div>\r\n\r\n                            <div class=\"form-floating mb-4 position-relative\">\r\n                                <input type=\"password\" name=\"password\" id=\"password\" class=\"form-control\" placeholder=\"Password\" />\r\n                                <label for=\"password\">Password</label>\r\n                                <small id=\"passwordError\" class=\"text-danger\"></small>\r\n                                <span id=\"toggle-password-1\" class=\"position-absolute top-50 end-0 translate-middle-y me-3 toggle-password\">\r\n                                    <i class=\"bi bi-eye-slash\"></i>\r\n                                </span>\r\n                            </div>\r\n\r\n                            <div class=\"form-floating mb-4 position-relative\">\r\n                                <input type=\"password\" name=\"confirmpassword\" id=\"confirmpassword\" class=\"form-control\" placeholder=\"Confirm Password\" />\r\n                                <label for=\"confirmpassword\">Confirm Password</label>\r\n                                <small id=\"confirmPasswordError\" class=\"text-danger\"></small>\r\n                                <span id=\"toggle-password-2\" class=\"position-absolute top-50 end-0 translate-middle-y me-3 toggle-password\">\r\n                                    <i class=\"bi bi-eye-slash\"></i>\r\n                                </span>\r\n                            </div>\r\n\r\n                            <button type=\"submit\" class=\"btn btn-custom btn-lg w-100 animate__animated animate__pulse\" id=\"register-btn\">\r\n                                Sign Up\r\n                            </button>\r\n\r\n                            <div class=\"text-center mt-4\">\r\n                                <p>Already have an account? <a href=\"/login\" class=\"text-decoration-none\">Login</a></p>\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n\r\n\r\n  <%- include('footer') %>\r\n\r\n\r\n  <!-----------------------------------------------------------validation--------------------------> \r\n  <script>\r\n    // Clear error messages function\r\n    function clearErrors() {\r\n      document.getElementById('nameError').textContent = \"\";\r\n      document.getElementById('emailError').textContent = \"\";\r\n      document.getElementById('phoneError').textContent = \"\";\r\n      document.getElementById('passwordError').textContent = \"\";\r\n      document.getElementById('confirmPasswordError').textContent = \"\";\r\n    }\r\n    \r\n    // Toggle password visibility function\r\n    function togglePassword(id, toggle) {\r\n      const pass = document.getElementById(id);\r\n      const type = pass.getAttribute('type') === 'password' ? 'text' : 'password';\r\n      pass.setAttribute('type', type);\r\n      toggle.innerHTML = type === 'password' ? '<i class=\"bi bi-eye-slash\"></i>' : '<i class=\"bi bi-eye\"></i>';\r\n    }\r\n    \r\n    // Email validation function\r\n    function checkEmail(email) {\r\n      const re = /^\\S+@\\S+\\.\\S+$/;\r\n      return re.test(email);\r\n    }\r\n    \r\n    // Password validation function\r\n    function validatePassword(password) {\r\n      return password.length >= 8 &&\r\n             /[A-Z]/.test(password) &&\r\n             /[a-z]/.test(password) &&\r\n             /\\d/.test(password) &&\r\n             /[!@#$%^&*()_+\\-=[\\]{};':\"\\\\|,.<>/?]/.test(password);\r\n    }\r\n    \r\n    // Phone validation function\r\n    function validatePhone(phone) {\r\n      const phoneRe = /^\\d{10}$/;\r\n      return phoneRe.test(phone);\r\n    }\r\n    \r\n    // Event listener for form submission\r\n    document.getElementById('register-form').addEventListener('submit', function(event) {\r\n      // Prevent form submission initially\r\n      event.preventDefault();\r\n    \r\n      // Clear any previous errors\r\n      clearErrors();\r\n    \r\n      let hasError = false;\r\n    \r\n      // Get form values\r\n      const name = document.getElementById('name').value.trim();\r\n      const email = document.getElementById('email').value.trim();\r\n      const phone = document.getElementById('phone').value.trim();\r\n      const password = document.getElementById('password').value.trim();\r\n      const confirmPassword = document.getElementById('confirmpassword').value.trim();\r\n    \r\n      // Validate Name\r\n      if (name === \"\") {\r\n        Swal.fire({\r\n          title: \"Error\",\r\n          text: \"Name is required\",\r\n          icon: \"error\"\r\n        });\r\n        hasError = true;\r\n      } else if (name.length < 5 || name.length > 25 || !isNaN(name)) {\r\n        Swal.fire({\r\n          title: \"Error\",\r\n          text: \"Name must be between 5 and 25 characters long, and should not contain numbers\",\r\n          icon: \"error\"\r\n        });\r\n        hasError = true;\r\n      }\r\n    \r\n      // Validate Email\r\n      if (email === \"\") {\r\n        Swal.fire({\r\n          title: \"Error\",\r\n          text: \"Email is required\",\r\n          icon: \"error\"\r\n        });\r\n        hasError = true;\r\n      } else if (!checkEmail(email)) {\r\n        Swal.fire({\r\n          title: \"Error\",\r\n          text: \"Email must be valid\",\r\n          icon: \"error\"\r\n        });\r\n        hasError = true;\r\n      }\r\n    \r\n      // Validate Phone\r\n      if (phone === \"\") {\r\n        Swal.fire({\r\n          title: \"Error\",\r\n          text: \"Phone number is required\",\r\n          icon: \"error\"\r\n        });\r\n        hasError = true;\r\n      } else if (!validatePhone(phone)) {\r\n        Swal.fire({\r\n          title: \"Error\",\r\n          text: \"Phone number must be 10 digits\",\r\n          icon: \"error\"\r\n        });\r\n        hasError = true;\r\n      }\r\n    \r\n      // Validate Password\r\n      if (password === \"\") {\r\n        Swal.fire({\r\n          title: \"Error\",\r\n          text: \"Password is required\",\r\n          icon: \"error\"\r\n        });\r\n        hasError = true;\r\n      } else if (!validatePassword(password)) {\r\n        Swal.fire({\r\n          title: \"Error\",\r\n          text: \"Password must be at least 8 characters long, contain uppercase, lowercase, a number, and a special character\",\r\n          icon: \"error\"\r\n        });\r\n        hasError = true;\r\n      }\r\n    \r\n      // Validate Confirm Password\r\n      if (confirmPassword === \"\") {\r\n        Swal.fire({\r\n          title: \"Error\",\r\n          text: \"Confirm password is required\",\r\n          icon: \"error\"\r\n        });\r\n        hasError = true;\r\n      } else if (password !== confirmPassword) {\r\n        Swal.fire({\r\n          title: \"Error\",\r\n          text: \"Passwords do not match\",\r\n          icon: \"error\"\r\n        });\r\n        hasError = true;\r\n      }\r\n    \r\n      // If no errors, submit the form\r\n      if (!hasError) {\r\n        document.getElementById('register-form').submit();\r\n      }\r\n    });\r\n    \r\n    // Event listeners for password toggling\r\n    document.getElementById('toggle-password-1').addEventListener('click', function() {\r\n      togglePassword('password', this);\r\n    });\r\n    \r\n    document.getElementById('toggle-password-2').addEventListener('click', function() {\r\n      togglePassword('confirmpassword', this);\r\n    });\r\n    \r\n    </script>\r\n    \r\n    "
        }
    ]
}