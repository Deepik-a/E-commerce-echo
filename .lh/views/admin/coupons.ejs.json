{
    "sourceFile": "views/admin/coupons.ejs",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 22,
            "patches": [
                {
                    "date": 1736747850924,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1736747866788,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -10,10 +10,15 @@\n         align-items: center;\r\n         margin-left: 50px; \r\n     }\r\n \r\n+    .search-container {\r\n+        border-radius: 10px;\r\n+        margin: 24px;\r\n+        background: #2b7aaf;\r\n+        width: 95%;\r\n+    }\r\n \r\n-\r\n     .coupon-action a {\r\n         text-decoration: none;\r\n     }\r\n \r\n@@ -70,12 +75,9 @@\n         <div class=\"d-flex align-items-center gap-3\">\r\n             <h2 class=\"text-white mx-5\">\r\n                 <%= title %>\r\n             </h2>\r\n-            <form action=\"/admin/coupons\" method=\"get\" class=\"form d-flex align-items-center\">\r\n-                <input type=\"text\" name=\"search\" placeholder=\"Search\" class=\"form-input form-control me-2\">\r\n-                <input type=\"submit\" class=\"btn btn-primary\" value=\"Search\">\r\n-            </form>\r\n+            \r\n         </div>\r\n         <button type=\"button\" class=\"btn btn-success\" data-bs-toggle=\"modal\" data-bs-target=\"#addCollection\">\r\n             Add Coupon\r\n         </button>\r\n"
                },
                {
                    "date": 1736747934837,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -63,8 +63,9 @@\n         padding-left: 30px; /* Adds padding inside the container */\r\n         margin-left: 150px; /* Adds margin outside the container */\r\n         width: calc(100% - 30px); /* Ensures proper alignment if width is an issue */   \r\n     }\r\n+    \r\n </style>\r\n \r\n \r\n \r\n"
                },
                {
                    "date": 1736747934892,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -63,8 +63,9 @@\n         padding-left: 30px; /* Adds padding inside the container */\r\n         margin-left: 150px; /* Adds margin outside the container */\r\n         width: calc(100% - 30px); /* Ensures proper alignment if width is an issue */   \r\n     }\r\n+\r\n     \r\n </style>\r\n \r\n \r\n"
                },
                {
                    "date": 1736747962497,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -64,9 +64,53 @@\n         margin-left: 150px; /* Adds margin outside the container */\r\n         width: calc(100% - 30px); /* Ensures proper alignment if width is an issue */   \r\n     }\r\n \r\n-    \r\n+    .pagination-container {\r\n+    display: flex;\r\n+    justify-content: center;\r\n+    padding: 20px;\r\n+}\r\n+\r\n+.pagination-box {\r\n+    display: flex;\r\n+    justify-content: center;\r\n+    padding: 10px;\r\n+    border: 1px solid #ccc;\r\n+    background-color: #f9f9f9;\r\n+    border-radius: 8px;\r\n+    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\r\n+}\r\n+\r\n+.pagination {\r\n+    display: flex;\r\n+    list-style-type: none;\r\n+}\r\n+\r\n+.pagination-link {\r\n+    padding: 8px 12px;\r\n+    margin: 0 5px;\r\n+    text-decoration: none;\r\n+    color: #333;\r\n+    background-color: #f1f1f1;\r\n+    border-radius: 4px;\r\n+    transition: background-color 0.3s;\r\n+}\r\n+\r\n+.pagination-link:hover {\r\n+    background-color: #ddd;\r\n+}\r\n+\r\n+.pagination-link.active {\r\n+    background-color: #007bff;\r\n+    color: white;\r\n+}\r\n+\r\n+.pagination-link:disabled {\r\n+    color: #999;\r\n+    pointer-events: none;\r\n+}\r\n+\r\n </style>\r\n \r\n \r\n \r\n@@ -292,24 +336,11 @@\n     </div>\r\n </div>\r\n \r\n <!------------------------------------------------pagination-------------------------------------------------------->\r\n-  <!-- Pagination -->\r\n-  <div class=\"pagination\">\r\n-    <% if (currentPage > 1) { %>\r\n-        <a href=\"/admin/coupons?page=<%= currentPage - 1 %>&search=<%= search %>\">Prev</a>\r\n-    <% } %>\r\n-    \r\n-    <% for (let i = 1; i <= totalPages; i++) { %>\r\n-        <a href=\"/admin/coupons?page=<%= i %>&search=<%= search %>\" class=\"<%= currentPage === i ? 'active' : '' %>\"><%= i %></a>\r\n-    <% } %>\r\n-    \r\n-    <% if (currentPage < totalPages) { %>\r\n-        <a href=\"/admin/coupons?page=<%= currentPage + 1 %>&search=<%= search %>\">Next</a>\r\n-    <% } %>\r\n-</div>\r\n \r\n \r\n+\r\n         <script>\r\n             //--------------------------- Add Coupon ---------------------------\r\n             // For Add Coupon Modal\r\n document.getElementById('discountType').addEventListener('change', function() {\r\n"
                },
                {
                    "date": 1736748071471,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -132,69 +132,9 @@\n \r\n \r\n \r\n             <!----------------------------------------- category table --------------------------------------------------->\r\n-            <div class=\"table-container\">\r\n-                <table class=\"table\">\r\n-                    <thead>\r\n-                        <tr scope=\"row\" class=\"product-table-head\">\r\n-                            <th scope=\"col\" class=\"product-table-first\">SL.No</th>\r\n-                            <th scope=\"col\">Coupon Code</th>\r\n-                            <th scope=\"col\">Discount Type</th>\r\n-                            <th scope=\"col\">Discount Value</th>\r\n-                            <th scope=\"col\">Coupon Usage Count</th>\r\n-                            <th scope=\"col\">Min Amount</th>\r\n-                            <th scope=\"col\">Start Date</th>\r\n-                            <th scope=\"col\">End Date</th>\r\n-                            <th scope=\"col\">Status</th>\r\n-                            <th scope=\"col\" class=\"product-table-last\">Action</th>\r\n-                        </tr>\r\n-                    </thead>\r\n-                    <tbody>\r\n-                        <% coupons.forEach((coupon, index)=> { %>\r\n-                            <tr scope=\"row\">\r\n-                                <td>\r\n-                                    <%= index + 1 %>\r\n-                                </td>\r\n-                                <td>\r\n-                                    <%= coupon.code %>\r\n-                                </td>\r\n-                                <td>\r\n-                                    <%= coupon.discountType %>\r\n-                                </td>\r\n-                                <td>\r\n-                                    <%= coupon.discountValue %>\r\n-                                </td>\r\n-                                <td>\r\n-                                    <%= coupon.usageCount %>\r\n-                                </td>\r\n-                                <td>\r\n-                                    <%= coupon.minimumOrderAmount %>\r\n-                                </td>\r\n-                                <td>\r\n-                                    <%= new Date(coupon.startDate).toLocaleDateString() %>\r\n-                                </td>\r\n-                                <td>\r\n-                                    <%= new Date(coupon.endDate).toLocaleDateString() %>\r\n-                                </td>\r\n-                                <td>\r\n-                                    <%= coupon.isActive ? 'Active' : 'Blocked' %>\r\n-                                </td>\r\n-                                <td class=\"coupon-action\">\r\n-                                    <a href=\"#\" id=\"edit-collection-modal\" data-bs-toggle=\"modal\"\r\n-                                        data-bs-target=\"#editCollection\" onclick=\"editCoupon('<%= coupon.id %>')\"><i\r\n-                                            class=\"bi bi-pencil-square\"></i></a>\r\n-                                    <a href=\"/admin/statuscoupon?id=<%= coupon.id %>&status=<%= coupon.isActive %>\">\r\n-                                        <i class=\"bi bi-x-circle m-2\"></i>\r\n-                                    </a>\r\n-                                    <a href=\"#\" onclick=\"confirmDelete('<%= coupon._id %>')\"><i\r\n-                                            class=\"bi bi-trash3\"></i></a>\r\n-                                </td>\r\n-                            </tr>\r\n-                            <% }) %>\r\n-                    </tbody>\r\n-                </table>\r\n-        \r\n+       \r\n     <!------------------------------ Add Coupon Modal ---------------------------->\r\n \r\n   <!-- Add Coupon Modal -->\r\n <div class=\"modal fade\" id=\"addCollection\" tabindex=\"-1\" aria-labelledby=\"addCouponLabel\" aria-hidden=\"true\">\r\n@@ -336,8 +276,29 @@\n     </div>\r\n </div>\r\n \r\n <!------------------------------------------------pagination-------------------------------------------------------->\r\n+<div class=\"pagination-container\">\r\n+    <div class=\"pagination-box\">\r\n+        <!-- Pagination -->\r\n+        <div class=\"pagination\">\r\n+            <% if (currentPage > 1) { %>\r\n+                <a href=\"/admin/coupons?page=<%= currentPage - 1 %>&search=<%= search %>\" class=\"pagination-link\">Prev</a>\r\n+            <% } %>\r\n+            \r\n+            <% for (let i = 1; i <= totalPages; i++) { %>\r\n+                <a href=\"/admin/coupons?page=<%= i %>&search=<%= search %>\" \r\n+                   class=\"pagination-link <%= currentPage === i ? 'active' : '' %>\">\r\n+                   <%= i %>\r\n+                </a>\r\n+            <% } %>\r\n+            \r\n+            <% if (currentPage < totalPages) { %>\r\n+                <a href=\"/admin/coupons?page=<%= currentPage + 1 %>&search=<%= search %>\" class=\"pagination-link\">Next</a>\r\n+            <% } %>\r\n+        </div>\r\n+    </div>\r\n+</div>\r\n \r\n \r\n \r\n         <script>\r\n"
                },
                {
                    "date": 1736748089146,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -114,8 +114,9 @@\n \r\n \r\n \r\n \r\n+\r\n       <!------------------------------------- Coupon page Header -------------------------------------------------------->\r\n <div class=\"col-12 category\" id=\"formatCategory\">\r\n     <div class=\"search-container d-flex justify-content-between align-items-center gap-2 p-3\">\r\n         <div class=\"d-flex align-items-center gap-3\">\r\n"
                },
                {
                    "date": 1736748103952,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,668 @@\n+\r\n+\r\n+<%- include('sidebar') %>\r\n+\r\n+<style>\r\n+    .category {\r\n+        width: 85%;\r\n+        display: flex;\r\n+        flex-direction: column;\r\n+        align-items: center;\r\n+        margin-left: 50px; \r\n+    }\r\n+\r\n+    .search-container {\r\n+        border-radius: 10px;\r\n+        margin: 24px;\r\n+        background: #2b7aaf;\r\n+        width: 95%;\r\n+    }\r\n+\r\n+    .coupon-action a {\r\n+        text-decoration: none;\r\n+    }\r\n+\r\n+    .modal-content {\r\n+        background: #b4dfee;\r\n+        color: #101feb;\r\n+    }\r\n+\r\n+    .form-control {\r\n+        background: #9cd6e7;\r\n+        color: #2d08b4;\r\n+        width: 100%;\r\n+    }\r\n+\r\n+    .form-control::placeholder {\r\n+        color: #1132d6;\r\n+    }\r\n+\r\n+    .form-control:focus {\r\n+        background: #a0d3e9;\r\n+        color: #330fe5;\r\n+    }\r\n+\r\n+    .table tbody tr td {\r\n+        padding: 18px 0px;\r\n+        text-align: left;\r\n+        background: #9ed7e7;\r\n+        color: #0a0df1;\r\n+       \r\n+    }\r\n+    \r\n+    .table-container {\r\n+        padding-left: 30px; /* Adds padding inside the container */\r\n+        margin-left: 230px; /* Adds margin outside the container */\r\n+        width: calc(100% - 30px); /* Ensures proper alignment if width is an issue */\r\n+    }\r\n+\r\n+    .table {\r\n+        margin-left: 0; /* Reset margin if necessary */\r\n+    }\r\n+    #formatCategory{\r\n+        padding-left: 30px; /* Adds padding inside the container */\r\n+        margin-left: 150px; /* Adds margin outside the container */\r\n+        width: calc(100% - 30px); /* Ensures proper alignment if width is an issue */   \r\n+    }\r\n+\r\n+    .pagination-container {\r\n+    display: flex;\r\n+    justify-content: center;\r\n+    padding: 20px;\r\n+}\r\n+\r\n+.pagination-box {\r\n+    display: flex;\r\n+    justify-content: center;\r\n+    padding: 10px;\r\n+    border: 1px solid #ccc;\r\n+    background-color: #f9f9f9;\r\n+    border-radius: 8px;\r\n+    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\r\n+}\r\n+\r\n+.pagination {\r\n+    display: flex;\r\n+    list-style-type: none;\r\n+}\r\n+\r\n+.pagination-link {\r\n+    padding: 8px 12px;\r\n+    margin: 0 5px;\r\n+    text-decoration: none;\r\n+    color: #333;\r\n+    background-color: #f1f1f1;\r\n+    border-radius: 4px;\r\n+    transition: background-color 0.3s;\r\n+}\r\n+\r\n+.pagination-link:hover {\r\n+    background-color: #ddd;\r\n+}\r\n+\r\n+.pagination-link.active {\r\n+    background-color: #007bff;\r\n+    color: white;\r\n+}\r\n+\r\n+.pagination-link:disabled {\r\n+    color: #999;\r\n+    pointer-events: none;\r\n+}\r\n+\r\n+\r\n+<style>\r\n+    .table-container {\r\n+        width: 100%;\r\n+        overflow-x: auto;\r\n+        -webkit-overflow-scrolling: touch;\r\n+        margin: 1rem 0;\r\n+    }\r\n+    \r\n+    .table {\r\n+        width: 100%;\r\n+        border-collapse: collapse;\r\n+        white-space: nowrap;\r\n+        font-size: 0.875rem;\r\n+    }\r\n+    \r\n+    .table th,\r\n+    .table td {\r\n+        padding: 0.5rem;\r\n+        border-bottom: 1px solid #dee2e6;\r\n+        vertical-align: middle;\r\n+    }\r\n+    \r\n+    .table thead th {\r\n+        background-color: #f8f9fa;\r\n+        position: sticky;\r\n+        top: 0;\r\n+        z-index: 1;\r\n+    }\r\n+    \r\n+    .table tbody tr:hover {\r\n+        background-color: rgba(0,0,0,.075);\r\n+    }\r\n+    \r\n+    .coupon-action {\r\n+        white-space: nowrap;\r\n+    }\r\n+    \r\n+    .coupon-action a {\r\n+        color: inherit;\r\n+        text-decoration: none;\r\n+        padding: 0.25rem;\r\n+    }\r\n+    \r\n+    .coupon-action i {\r\n+        font-size: 1rem;\r\n+    }\r\n+    \r\n+    @media screen and (max-width: 768px) {\r\n+        .table {\r\n+            font-size: 0.75rem;\r\n+        }\r\n+        \r\n+        .table th,\r\n+        .table td {\r\n+            padding: 0.35rem;\r\n+        }\r\n+    }\r\n+    </style>\r\n+    \r\n+    <div class=\"table-container\">\r\n+        <table class=\"table\">\r\n+            <thead>\r\n+                <tr scope=\"row\" class=\"product-table-head\">\r\n+                    <th scope=\"col\" class=\"product-table-first\">SL.No</th>\r\n+                    <th scope=\"col\">Coupon Code</th>\r\n+                    <th scope=\"col\">Discount Type</th>\r\n+                    <th scope=\"col\">Discount Value</th>\r\n+                    <th scope=\"col\">Coupon Usage Count</th>\r\n+                    <th scope=\"col\">Min Amount</th>\r\n+                    <th scope=\"col\">Start Date</th>\r\n+                    <th scope=\"col\">End Date</th>\r\n+                    <th scope=\"col\">Status</th>\r\n+                    <th scope=\"col\" class=\"product-table-last\">Action</th>\r\n+                </tr>\r\n+            </thead>\r\n+            <tbody>\r\n+                <% coupons.forEach((coupon, index)=> { %>\r\n+                    <tr scope=\"row\">\r\n+                        <td><%= index + 1 %></td>\r\n+                        <td><%= coupon.code %></td>\r\n+                        <td><%= coupon.discountType %></td>\r\n+                        <td><%= coupon.discountValue %></td>\r\n+                        <td><%= coupon.usageCount %></td>\r\n+                        <td><%= coupon.minimumOrderAmount %></td>\r\n+                        <td><%= new Date(coupon.startDate).toLocaleDateString() %></td>\r\n+                        <td><%= new Date(coupon.endDate).toLocaleDateString() %></td>\r\n+                        <td><%= coupon.isActive ? 'Active' : 'Blocked' %></td>\r\n+                        <td class=\"coupon-action\">\r\n+                            <a href=\"#\" id=\"edit-collection-modal\" data-bs-toggle=\"modal\" data-bs-target=\"#editCollection\" onclick=\"editCoupon('<%= coupon.id %>')\">\r\n+                                <i class=\"bi bi-pencil-square\"></i>\r\n+                            </a>\r\n+                            <a href=\"/admin/statuscoupon?id=<%= coupon.id %>&status=<%= coupon.isActive %>\">\r\n+                                <i class=\"bi bi-x-circle m-2\"></i>\r\n+                            </a>\r\n+                            <a href=\"#\" onclick=\"confirmDelete('<%= coupon._id %>')\">\r\n+                                <i class=\"bi bi-trash3\"></i>\r\n+                            </a>\r\n+                        </td>\r\n+                    </tr>\r\n+                <% }) %>\r\n+            </tbody>\r\n+        </table>\r\n+    </div>\r\n+\r\n+\r\n+\r\n+\r\n+      <!------------------------------------- Coupon page Header -------------------------------------------------------->\r\n+<div class=\"col-12 category\" id=\"formatCategory\">\r\n+    <div class=\"search-container d-flex justify-content-between align-items-center gap-2 p-3\">\r\n+        <div class=\"d-flex align-items-center gap-3\">\r\n+            <h2 class=\"text-white mx-5\">\r\n+                <%= title %>\r\n+            </h2>\r\n+            \r\n+        </div>\r\n+        <button type=\"button\" class=\"btn btn-success\" data-bs-toggle=\"modal\" data-bs-target=\"#addCollection\">\r\n+            Add Coupon\r\n+        </button>\r\n+    </div>\r\n+</div>\r\n+\r\n+\r\n+\r\n+            <!----------------------------------------- category table --------------------------------------------------->\r\n+       \r\n+    <!------------------------------ Add Coupon Modal ---------------------------->\r\n+\r\n+  <!-- Add Coupon Modal -->\r\n+<div class=\"modal fade\" id=\"addCollection\" tabindex=\"-1\" aria-labelledby=\"addCouponLabel\" aria-hidden=\"true\">\r\n+    <div class=\"modal-dialog\">\r\n+        <div class=\"modal-content\">\r\n+            <div class=\"modal-header\">\r\n+                <h5 class=\"modal-title\" id=\"addCouponLabel\">Add Coupon</h5>\r\n+                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n+            </div>\r\n+            <div class=\"modal-body\">\r\n+                <form id=\"addCouponForm\">\r\n+                    <!-- Coupon Code -->\r\n+                    <div class=\"mb-3\">\r\n+                        <label for=\"code\" class=\"form-label\">Coupon Code</label>\r\n+                        <input type=\"text\" class=\"form-control\" id=\"code\" name=\"code\" required>\r\n+                    </div>\r\n+                    \r\n+                    <!-- Discount Type -->\r\n+                    <div class=\"mb-3\">\r\n+                        <label for=\"discountType\" class=\"form-label\">Discount Type</label>\r\n+                        <select class=\"form-control\" id=\"discountType\" name=\"discountType\" required>\r\n+                            <option value=\"Percentage\">Percentage</option>\r\n+                            <option value=\"Fixed\">Fixed</option>\r\n+                        </select>\r\n+                    </div>\r\n+                    \r\n+                    <!-- Discount Value -->\r\n+                    <div class=\"mb-3\">\r\n+                        <label for=\"discountValue\" class=\"form-label\">Discount Value</label>\r\n+                        <input type=\"number\" class=\"form-control\" id=\"discountValue\" name=\"discountValue\" required>\r\n+                    </div>\r\n+                           <!--  Coupon Usage count -->\r\n+                           <div class=\"mb-3\">\r\n+                            <label for=\"usageCount\" class=\"form-label\">Coupon Usage Count</label>\r\n+                            <input type=\"number\" class=\"form-control\" id=\"usageCount\" name=\"usageCount\" required>\r\n+                        </div>\r\n+                    \r\n+                    <!-- Start Date -->\r\n+                    <div class=\"mb-3\">\r\n+                        <label for=\"startDate\" class=\"form-label\">Start Date</label>\r\n+                        <input type=\"date\" class=\"form-control\" id=\"startDate\" name=\"startDate\" required>\r\n+                    </div>\r\n+                    \r\n+                    <!-- End Date -->\r\n+                    <div class=\"mb-3\">\r\n+                        <label for=\"endDate\" class=\"form-label\">End Date</label>\r\n+                        <input type=\"date\" class=\"form-control\" id=\"endDate\" name=\"endDate\" required>\r\n+                    </div>\r\n+                    \r\n+                    <!-- Minimum Order Amount -->\r\n+                    <div class=\"mb-3\">\r\n+                        <label for=\"minimumOrderAmount\" class=\"form-label\">Minimum Order Amount</label>\r\n+                        <input type=\"number\" class=\"form-control\" id=\"minimumOrderAmount\" name=\"minimumOrderAmount\" required>\r\n+                    </div>\r\n+\r\n+                    <!-- Max Order Amount (conditionally shown) -->\r\n+                    <div class=\"mb-3\" id=\"maxOrderAmountWrapper\" style=\"display: none;\">\r\n+                        <label for=\"maxOrderAmount\" class=\"form-label\">Maximum Discount Amount</label>\r\n+                        <input type=\"number\" class=\"form-control\" id=\"maxOrderAmount\" name=\"maxDiscountAmount\">\r\n+                    </div>\r\n+                   \r\n+                    <!-- Submit Button -->\r\n+                    <button type=\"submit\" class=\"btn\" style=\"background-color: #0a0df1;\">Add Coupon</button>\r\n+                </form>\r\n+            </div>\r\n+        </div>\r\n+    </div>\r\n+</div>\r\n+\r\n+    <!--------------------------- Edit Coupon Modal ---------------------------->\r\n+\r\n+  <!-- Edit Coupon Modal -->\r\n+<div class=\"modal fade\" id=\"editCollection\" tabindex=\"-1\" aria-labelledby=\"editCouponLabel\" aria-hidden=\"true\">\r\n+    <div class=\"modal-dialog\">\r\n+        <div class=\"modal-content\">\r\n+            <div class=\"modal-header\">\r\n+                <h5 class=\"modal-title\" id=\"editCouponLabel\">Edit Coupon</h5>\r\n+                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n+            </div>\r\n+            <div class=\"modal-body\">\r\n+                <form id=\"editCouponForm\">\r\n+                    <input type=\"hidden\" id=\"editCouponId\" name=\"id\">\r\n+                    \r\n+                    <!-- Coupon Code -->\r\n+                    <div class=\"mb-3\">\r\n+                        <label for=\"editCode\" class=\"form-label\">Coupon Code</label>\r\n+                        <input type=\"text\" class=\"form-control\" id=\"editCode\" name=\"code\" required>\r\n+                    </div>\r\n+                    \r\n+                    <!-- Discount Type -->\r\n+                    <div class=\"mb-3\">\r\n+                        <label for=\"editDiscountType\" class=\"form-label\">Discount Type</label>\r\n+                        <select class=\"form-control\" id=\"editDiscountType\" name=\"discountType\" required>\r\n+                            <option value=\"Percentage\">Percentage</option>\r\n+                            <option value=\"Fixed\">Fixed</option>\r\n+                        </select>\r\n+                    </div>\r\n+\r\n+                    <!-- Discount Value -->\r\n+                    <div class=\"mb-3\">\r\n+                        <label for=\"editDiscountValue\" class=\"form-label\">Discount Value</label>\r\n+                        <input type=\"number\" class=\"form-control\" id=\"editDiscountValue\" name=\"discountValue\" required>\r\n+                    </div>\r\n+                        <!--  Coupon Usage count -->\r\n+                        <div class=\"mb-3\">\r\n+                            <label for=\"editusageCount\" class=\"form-label\">Coupon Usage Count</label>\r\n+                            <input type=\"number\" class=\"form-control\" id=\"editusageCount\" name=\"usageCount\" required>\r\n+                        </div>\r\n+\r\n+                    <!-- Start Date -->\r\n+                    <div class=\"mb-3\">\r\n+                        <label for=\"editStartDate\" class=\"form-label\">Start Date</label>\r\n+                        <input type=\"date\" class=\"form-control\" id=\"editStartDate\" name=\"startDate\" required>\r\n+                    </div>\r\n+\r\n+                    <!-- End Date -->\r\n+                    <div class=\"mb-3\">\r\n+                        <label for=\"editEndDate\" class=\"form-label\">End Date</label>\r\n+                        <input type=\"date\" class=\"form-control\" id=\"editEndDate\" name=\"endDate\" required>\r\n+                    </div>\r\n+\r\n+                    <!-- Minimum Order Amount -->\r\n+                    <div class=\"mb-3\">\r\n+                        <label for=\"editMinimumOrderAmount\" class=\"form-label\">Minimum Order Amount</label>\r\n+                        <input type=\"number\" class=\"form-control\" id=\"editMinimumOrderAmount\" name=\"minimumOrderAmount\" required>\r\n+                    </div>\r\n+\r\n+                    <!-- Max Order Amount (conditionally shown) -->\r\n+                    <div class=\"mb-3\" id=\"editMaxOrderAmountWrapper\" style=\"display: none;\">\r\n+                        <label for=\"editMaxOrderAmount\" class=\"form-label\">Maximum Discount Amount</label>\r\n+                        <input type=\"number\" class=\"form-control\" id=\"editMaxOrderAmount\" name=\"maxDiscountAmount\">\r\n+                    </div>\r\n+\r\n+                    <!-- Submit Button -->\r\n+                    <button type=\"submit\" class=\"btn btn-primary\">Update Coupon</button>\r\n+                </form>\r\n+            </div>\r\n+        </div>\r\n+    </div>\r\n+</div>\r\n+\r\n+<!------------------------------------------------pagination-------------------------------------------------------->\r\n+<div class=\"pagination-container\">\r\n+    <div class=\"pagination-box\">\r\n+        <!-- Pagination -->\r\n+        <div class=\"pagination\">\r\n+            <% if (currentPage > 1) { %>\r\n+                <a href=\"/admin/coupons?page=<%= currentPage - 1 %>&search=<%= search %>\" class=\"pagination-link\">Prev</a>\r\n+            <% } %>\r\n+            \r\n+            <% for (let i = 1; i <= totalPages; i++) { %>\r\n+                <a href=\"/admin/coupons?page=<%= i %>&search=<%= search %>\" \r\n+                   class=\"pagination-link <%= currentPage === i ? 'active' : '' %>\">\r\n+                   <%= i %>\r\n+                </a>\r\n+            <% } %>\r\n+            \r\n+            <% if (currentPage < totalPages) { %>\r\n+                <a href=\"/admin/coupons?page=<%= currentPage + 1 %>&search=<%= search %>\" class=\"pagination-link\">Next</a>\r\n+            <% } %>\r\n+        </div>\r\n+    </div>\r\n+</div>\r\n+\r\n+\r\n+\r\n+        <script>\r\n+            //--------------------------- Add Coupon ---------------------------\r\n+            // For Add Coupon Modal\r\n+document.getElementById('discountType').addEventListener('change', function() {\r\n+    var discountType = this.value;\r\n+    var maxOrderAmountWrapper = document.getElementById('maxOrderAmountWrapper');\r\n+    if (discountType === 'Percentage') {\r\n+        maxOrderAmountWrapper.style.display = 'block';  // Show the Max Order Amount field\r\n+    } else {\r\n+        maxOrderAmountWrapper.style.display = 'none';   // Hide the Max Order Amount field\r\n+    }\r\n+});\r\n+\r\n+// For Edit Coupon Modal\r\n+document.getElementById('editDiscountType').addEventListener('change', function() {\r\n+    var discountType = this.value;\r\n+    var editMaxOrderAmountWrapper = document.getElementById('editMaxOrderAmountWrapper');\r\n+    if (discountType === 'Percentage') {\r\n+        editMaxOrderAmountWrapper.style.display = 'block';  // Show the Max Order Amount field\r\n+    } else {\r\n+        editMaxOrderAmountWrapper.style.display = 'none';   // Hide the Max Order Amount field\r\n+    }\r\n+});\r\n+\r\n+document.getElementById('addCouponForm').addEventListener('submit', async function (e) {\r\n+    e.preventDefault();\r\n+\r\n+    // Validation Logic\r\n+    const code = document.getElementById('code').value.trim();\r\n+    const discountValue = document.getElementById('discountValue').value.trim();\r\n+    const usageCount = document.getElementById('usageCount').value.trim();\r\n+    const startDate = new Date(document.getElementById('startDate').value);\r\n+    const endDate = new Date(document.getElementById('endDate').value);\r\n+    const currentDate = new Date();\r\n+    const minimumOrderAmount = document.getElementById('minimumOrderAmount').value.trim();\r\n+    \r\n+    // Validation for Coupon Code\r\n+    if (!code || code.length < 8) {\r\n+        Swal.fire({\r\n+            icon: 'error',\r\n+            title: 'Error',\r\n+            text: 'Coupon Code must be at least 8 characters long.',\r\n+        });\r\n+        return;\r\n+    }\r\n+    if (/[^a-zA-Z0-9]/.test(code)) {\r\n+        Swal.fire({\r\n+            icon: 'error',\r\n+            title: 'Error',\r\n+            text: 'Coupon Code must contain only alphabets and numbers.',\r\n+        });\r\n+        return;\r\n+    }\r\n+\r\n+    // Validation for Discount Value (Fixed)\r\n+    const discountType = document.getElementById('discountType').value;\r\n+    if (discountType === 'Fixed') {\r\n+        if (discountValue < 1 || discountValue > 100) {\r\n+            Swal.fire({\r\n+                icon: 'error',\r\n+                title: 'Error',\r\n+                text: 'Discount Value for Fixed must be between 1 and 100.',\r\n+            });\r\n+            return;\r\n+        }\r\n+    }\r\n+\r\n+    // Validation for Usage Count\r\n+    if (usageCount < 1 || usageCount > 10) {\r\n+        Swal.fire({\r\n+            icon: 'error',\r\n+            title: 'Error',\r\n+            text: 'Coupon Usage Count must be between 1 and 10.',\r\n+        });\r\n+        return;\r\n+    }\r\n+\r\n+    // Validation for Start Date - must be today or any date after today\r\n+    const today = currentDate.setHours(0, 0, 0, 0); // Set to midnight\r\n+    if (startDate < today) {\r\n+        Swal.fire({\r\n+            icon: 'error',\r\n+            title: 'Error',\r\n+            text: 'Start Date must be today or a date after today.',\r\n+        });\r\n+        return;\r\n+    }\r\n+\r\n+    // Validation for End Date\r\n+    const endDates = new Date(document.getElementById('endDate').value);\r\n+    if (endDates <= startDate) {\r\n+        Swal.fire({\r\n+            icon: 'error',\r\n+            title: 'Error',\r\n+            text: 'End Date must be later than Start Date.',\r\n+        });\r\n+        return;\r\n+    }\r\n+\r\n+    // Validation for Minimum Order Amount\r\n+    if (minimumOrderAmount.length === 0 || minimumOrderAmount <= 0) {\r\n+        Swal.fire({\r\n+            icon: 'error',\r\n+            title: 'Error',\r\n+            text: 'Minimum Order Amount is required and should be greater than 0.',\r\n+        });\r\n+        return;\r\n+    }\r\n+\r\n+    // If all validations pass, proceed with form submission\r\n+    const formData = new FormData(this);\r\n+    const data = Object.fromEntries(formData.entries());\r\n+\r\n+    try {\r\n+        const response = await fetch('/admin/addcoupon', {\r\n+            method: 'POST',\r\n+            headers: {\r\n+                'Content-Type': 'application/json',\r\n+            },\r\n+            body: JSON.stringify(data),\r\n+        });\r\n+        const result = await response.json();\r\n+        if (response.ok) {\r\n+            Swal.fire({\r\n+                icon: 'success',\r\n+                title: 'Success',\r\n+                text: result.message,\r\n+            }).then(() => {\r\n+                this.reset();\r\n+                location.reload();\r\n+            });\r\n+        } else {\r\n+            Swal.fire({\r\n+                icon: 'error',\r\n+                title: 'Error',\r\n+                text: result.message,\r\n+            });\r\n+        }\r\n+    } catch (error) {\r\n+        console.error('Error:', error);\r\n+        Swal.fire({\r\n+            icon: 'error',\r\n+            title: 'Error',\r\n+            text: 'An error occurred while adding the coupon.',\r\n+        });\r\n+    }\r\n+});\r\n+\r\n+            //--------------------------- Edit coupon ---------------------------\r\n+\r\n+            document.addEventListener('DOMContentLoaded', function () {\r\n+                var editCouponModal = new bootstrap.Modal(document.getElementById('editCollection'));\r\n+                document.getElementById('editCouponForm').addEventListener('submit', async (event) => {\r\n+                    event.preventDefault();\r\n+                    const formData = new FormData(event.target);\r\n+                    const data = Object.fromEntries(formData.entries());\r\n+                    data.id = document.getElementById('editCouponId').value;\r\n+                    try {\r\n+                        const response = await fetch(`/admin/editcoupon/${data.id}`, {\r\n+                            method: 'POST',\r\n+                            headers: { 'Content-Type': 'application/json' },\r\n+                            body: JSON.stringify(data),\r\n+                        });\r\n+                        const result = await response.json();\r\n+                        Swal.fire({\r\n+                            title: 'Coupon Updated Successfully',\r\n+                            text: result.message,\r\n+                            icon: 'success',\r\n+                            confirmButtonText: 'OK'\r\n+                        }).then(() => {\r\n+                            window.location.reload();\r\n+                        });\r\n+                    } catch (error) {\r\n+                        console.error('Error:', error);\r\n+                        Swal.fire({\r\n+                            title: 'Error',\r\n+                            text: 'Failed to update coupon.',\r\n+                            icon: 'error',\r\n+                            confirmButtonText: 'OK'\r\n+                        });\r\n+                    }\r\n+                });\r\n+\r\n+                window.editCoupon = function (id) {\r\n+                    fetch(`/admin/coupons/${id}`)\r\n+                        .then(response => {\r\n+                            if (!response.ok) {\r\n+                                throw new Error('Network response was not ok');\r\n+                            }\r\n+                            return response.json();\r\n+                        })\r\n+                        .then(coupon => {\r\n+                            document.getElementById('editCouponId').value = coupon._id;\r\n+                            document.getElementById('editCode').value = coupon.code;\r\n+                            document.getElementById('editDiscountType').value = coupon.discountType;\r\n+                            document.getElementById('editDiscountValue').value = coupon.discountValue;\r\n+                            document.getElementById('editusageCount').value = coupon.usageCount;\r\n+                            document.getElementById('editStartDate').value = new Date(coupon.startDate).toISOString().split('T')[0];\r\n+                            document.getElementById('editEndDate').value = new Date(coupon.endDate).toISOString().split('T')[0];\r\n+                            document.getElementById('editMinimumOrderAmount').value = coupon.minimumOrderAmount;\r\n+                            editCouponModal.show();\r\n+                        })\r\n+                        .catch(error => {\r\n+                            console.error('Error fetching coupon data:', error);\r\n+                            Swal.fire({\r\n+                                title: 'Error',\r\n+                                text: 'Failed to load coupon data.',\r\n+                                icon: 'error',\r\n+                                confirmButtonText: 'OK'\r\n+                            });\r\n+                        });\r\n+                };\r\n+            });\r\n+\r\n+            //--------------------------- Sweet delete ---------------------------\r\n+\r\n+            async function confirmDelete(id) {\r\n+                const confirmResult = await Swal.fire({\r\n+                    title: 'Are you sure?',\r\n+                    text: 'You are about to delete this coupon. This action cannot be undone.',\r\n+                    icon: 'warning',\r\n+                    showCancelButton: true,\r\n+                    confirmButtonColor: '#3085d6',\r\n+                    cancelButtonColor: '#d33',\r\n+                    confirmButtonText: 'Yes, delete it!'\r\n+                });\r\n+                if (confirmResult.isConfirmed) {\r\n+                    deleteCoupon(id);\r\n+                }\r\n+            }\r\n+\r\n+            //--------------------------- Delete Coupon ---------------------------\r\n+\r\n+            async function deleteCoupon(id) {\r\n+                try {\r\n+                    const response = await fetch(`/admin/deletecoupon/${id}`, {\r\n+                        method: 'DELETE',\r\n+                        headers: { 'Content-Type': 'application/json' }\r\n+                    });\r\n+                    const result = await response.json();\r\n+                    Swal.fire({\r\n+                        title: 'Delete Coupon',\r\n+                        text: result.message,\r\n+                        icon: 'success',\r\n+                        confirmButtonText: 'OK'\r\n+                    }).then(() => {\r\n+                        window.location.reload();\r\n+                    });\r\n+                } catch (error) {\r\n+                    Swal.fire({\r\n+                        title: 'Error',\r\n+                        text: 'Error deleting coupon',\r\n+                        icon: 'error',\r\n+                        confirmButtonText: 'OK'\r\n+                    });\r\n+                }\r\n+            }\r\n+\r\n+        </script>\r\n+\r\n+\r\n+      \n\\ No newline at end of file\n"
                },
                {
                    "date": 1736748138981,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -110,9 +110,8 @@\n     pointer-events: none;\r\n }\r\n \r\n \r\n-<style>\r\n     .table-container {\r\n         width: 100%;\r\n         overflow-x: auto;\r\n         -webkit-overflow-scrolling: touch;\r\n@@ -169,52 +168,9 @@\n         }\r\n     }\r\n     </style>\r\n     \r\n-    <div class=\"table-container\">\r\n-        <table class=\"table\">\r\n-            <thead>\r\n-                <tr scope=\"row\" class=\"product-table-head\">\r\n-                    <th scope=\"col\" class=\"product-table-first\">SL.No</th>\r\n-                    <th scope=\"col\">Coupon Code</th>\r\n-                    <th scope=\"col\">Discount Type</th>\r\n-                    <th scope=\"col\">Discount Value</th>\r\n-                    <th scope=\"col\">Coupon Usage Count</th>\r\n-                    <th scope=\"col\">Min Amount</th>\r\n-                    <th scope=\"col\">Start Date</th>\r\n-                    <th scope=\"col\">End Date</th>\r\n-                    <th scope=\"col\">Status</th>\r\n-                    <th scope=\"col\" class=\"product-table-last\">Action</th>\r\n-                </tr>\r\n-            </thead>\r\n-            <tbody>\r\n-                <% coupons.forEach((coupon, index)=> { %>\r\n-                    <tr scope=\"row\">\r\n-                        <td><%= index + 1 %></td>\r\n-                        <td><%= coupon.code %></td>\r\n-                        <td><%= coupon.discountType %></td>\r\n-                        <td><%= coupon.discountValue %></td>\r\n-                        <td><%= coupon.usageCount %></td>\r\n-                        <td><%= coupon.minimumOrderAmount %></td>\r\n-                        <td><%= new Date(coupon.startDate).toLocaleDateString() %></td>\r\n-                        <td><%= new Date(coupon.endDate).toLocaleDateString() %></td>\r\n-                        <td><%= coupon.isActive ? 'Active' : 'Blocked' %></td>\r\n-                        <td class=\"coupon-action\">\r\n-                            <a href=\"#\" id=\"edit-collection-modal\" data-bs-toggle=\"modal\" data-bs-target=\"#editCollection\" onclick=\"editCoupon('<%= coupon.id %>')\">\r\n-                                <i class=\"bi bi-pencil-square\"></i>\r\n-                            </a>\r\n-                            <a href=\"/admin/statuscoupon?id=<%= coupon.id %>&status=<%= coupon.isActive %>\">\r\n-                                <i class=\"bi bi-x-circle m-2\"></i>\r\n-                            </a>\r\n-                            <a href=\"#\" onclick=\"confirmDelete('<%= coupon._id %>')\">\r\n-                                <i class=\"bi bi-trash3\"></i>\r\n-                            </a>\r\n-                        </td>\r\n-                    </tr>\r\n-                <% }) %>\r\n-            </tbody>\r\n-        </table>\r\n-    </div>\r\n+   \r\n \r\n \r\n \r\n \r\n@@ -664,571 +620,5 @@\n \r\n         </script>\r\n \r\n \r\n-      \n-\r\n-\r\n-<%- include('sidebar') %>\r\n-\r\n-<style>\r\n-    .category {\r\n-        width: 85%;\r\n-        display: flex;\r\n-        flex-direction: column;\r\n-        align-items: center;\r\n-        margin-left: 50px; \r\n-    }\r\n-\r\n-    .search-container {\r\n-        border-radius: 10px;\r\n-        margin: 24px;\r\n-        background: #2b7aaf;\r\n-        width: 95%;\r\n-    }\r\n-\r\n-    .coupon-action a {\r\n-        text-decoration: none;\r\n-    }\r\n-\r\n-    .modal-content {\r\n-        background: #b4dfee;\r\n-        color: #101feb;\r\n-    }\r\n-\r\n-    .form-control {\r\n-        background: #9cd6e7;\r\n-        color: #2d08b4;\r\n-        width: 100%;\r\n-    }\r\n-\r\n-    .form-control::placeholder {\r\n-        color: #1132d6;\r\n-    }\r\n-\r\n-    .form-control:focus {\r\n-        background: #a0d3e9;\r\n-        color: #330fe5;\r\n-    }\r\n-\r\n-    .table tbody tr td {\r\n-        padding: 18px 0px;\r\n-        text-align: left;\r\n-        background: #9ed7e7;\r\n-        color: #0a0df1;\r\n-       \r\n-    }\r\n-    \r\n-    .table-container {\r\n-        padding-left: 30px; /* Adds padding inside the container */\r\n-        margin-left: 230px; /* Adds margin outside the container */\r\n-        width: calc(100% - 30px); /* Ensures proper alignment if width is an issue */\r\n-    }\r\n-\r\n-    .table {\r\n-        margin-left: 0; /* Reset margin if necessary */\r\n-    }\r\n-    #formatCategory{\r\n-        padding-left: 30px; /* Adds padding inside the container */\r\n-        margin-left: 150px; /* Adds margin outside the container */\r\n-        width: calc(100% - 30px); /* Ensures proper alignment if width is an issue */   \r\n-    }\r\n-\r\n-    .pagination-container {\r\n-    display: flex;\r\n-    justify-content: center;\r\n-    padding: 20px;\r\n-}\r\n-\r\n-.pagination-box {\r\n-    display: flex;\r\n-    justify-content: center;\r\n-    padding: 10px;\r\n-    border: 1px solid #ccc;\r\n-    background-color: #f9f9f9;\r\n-    border-radius: 8px;\r\n-    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\r\n-}\r\n-\r\n-.pagination {\r\n-    display: flex;\r\n-    list-style-type: none;\r\n-}\r\n-\r\n-.pagination-link {\r\n-    padding: 8px 12px;\r\n-    margin: 0 5px;\r\n-    text-decoration: none;\r\n-    color: #333;\r\n-    background-color: #f1f1f1;\r\n-    border-radius: 4px;\r\n-    transition: background-color 0.3s;\r\n-}\r\n-\r\n-.pagination-link:hover {\r\n-    background-color: #ddd;\r\n-}\r\n-\r\n-.pagination-link.active {\r\n-    background-color: #007bff;\r\n-    color: white;\r\n-}\r\n-\r\n-.pagination-link:disabled {\r\n-    color: #999;\r\n-    pointer-events: none;\r\n-}\r\n-\r\n-</style>\r\n-\r\n-\r\n-\r\n-\r\n-\r\n-      <!------------------------------------- Coupon page Header -------------------------------------------------------->\r\n-<div class=\"col-12 category\" id=\"formatCategory\">\r\n-    <div class=\"search-container d-flex justify-content-between align-items-center gap-2 p-3\">\r\n-        <div class=\"d-flex align-items-center gap-3\">\r\n-            <h2 class=\"text-white mx-5\">\r\n-                <%= title %>\r\n-            </h2>\r\n-            \r\n-        </div>\r\n-        <button type=\"button\" class=\"btn btn-success\" data-bs-toggle=\"modal\" data-bs-target=\"#addCollection\">\r\n-            Add Coupon\r\n-        </button>\r\n-    </div>\r\n-</div>\r\n-\r\n-\r\n-\r\n-            <!----------------------------------------- category table --------------------------------------------------->\r\n-       \r\n-    <!------------------------------ Add Coupon Modal ---------------------------->\r\n-\r\n-  <!-- Add Coupon Modal -->\r\n-<div class=\"modal fade\" id=\"addCollection\" tabindex=\"-1\" aria-labelledby=\"addCouponLabel\" aria-hidden=\"true\">\r\n-    <div class=\"modal-dialog\">\r\n-        <div class=\"modal-content\">\r\n-            <div class=\"modal-header\">\r\n-                <h5 class=\"modal-title\" id=\"addCouponLabel\">Add Coupon</h5>\r\n-                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n-            </div>\r\n-            <div class=\"modal-body\">\r\n-                <form id=\"addCouponForm\">\r\n-                    <!-- Coupon Code -->\r\n-                    <div class=\"mb-3\">\r\n-                        <label for=\"code\" class=\"form-label\">Coupon Code</label>\r\n-                        <input type=\"text\" class=\"form-control\" id=\"code\" name=\"code\" required>\r\n-                    </div>\r\n-                    \r\n-                    <!-- Discount Type -->\r\n-                    <div class=\"mb-3\">\r\n-                        <label for=\"discountType\" class=\"form-label\">Discount Type</label>\r\n-                        <select class=\"form-control\" id=\"discountType\" name=\"discountType\" required>\r\n-                            <option value=\"Percentage\">Percentage</option>\r\n-                            <option value=\"Fixed\">Fixed</option>\r\n-                        </select>\r\n-                    </div>\r\n-                    \r\n-                    <!-- Discount Value -->\r\n-                    <div class=\"mb-3\">\r\n-                        <label for=\"discountValue\" class=\"form-label\">Discount Value</label>\r\n-                        <input type=\"number\" class=\"form-control\" id=\"discountValue\" name=\"discountValue\" required>\r\n-                    </div>\r\n-                           <!--  Coupon Usage count -->\r\n-                           <div class=\"mb-3\">\r\n-                            <label for=\"usageCount\" class=\"form-label\">Coupon Usage Count</label>\r\n-                            <input type=\"number\" class=\"form-control\" id=\"usageCount\" name=\"usageCount\" required>\r\n-                        </div>\r\n-                    \r\n-                    <!-- Start Date -->\r\n-                    <div class=\"mb-3\">\r\n-                        <label for=\"startDate\" class=\"form-label\">Start Date</label>\r\n-                        <input type=\"date\" class=\"form-control\" id=\"startDate\" name=\"startDate\" required>\r\n-                    </div>\r\n-                    \r\n-                    <!-- End Date -->\r\n-                    <div class=\"mb-3\">\r\n-                        <label for=\"endDate\" class=\"form-label\">End Date</label>\r\n-                        <input type=\"date\" class=\"form-control\" id=\"endDate\" name=\"endDate\" required>\r\n-                    </div>\r\n-                    \r\n-                    <!-- Minimum Order Amount -->\r\n-                    <div class=\"mb-3\">\r\n-                        <label for=\"minimumOrderAmount\" class=\"form-label\">Minimum Order Amount</label>\r\n-                        <input type=\"number\" class=\"form-control\" id=\"minimumOrderAmount\" name=\"minimumOrderAmount\" required>\r\n-                    </div>\r\n-\r\n-                    <!-- Max Order Amount (conditionally shown) -->\r\n-                    <div class=\"mb-3\" id=\"maxOrderAmountWrapper\" style=\"display: none;\">\r\n-                        <label for=\"maxOrderAmount\" class=\"form-label\">Maximum Discount Amount</label>\r\n-                        <input type=\"number\" class=\"form-control\" id=\"maxOrderAmount\" name=\"maxDiscountAmount\">\r\n-                    </div>\r\n-                   \r\n-                    <!-- Submit Button -->\r\n-                    <button type=\"submit\" class=\"btn\" style=\"background-color: #0a0df1;\">Add Coupon</button>\r\n-                </form>\r\n-            </div>\r\n-        </div>\r\n-    </div>\r\n-</div>\r\n-\r\n-    <!--------------------------- Edit Coupon Modal ---------------------------->\r\n-\r\n-  <!-- Edit Coupon Modal -->\r\n-<div class=\"modal fade\" id=\"editCollection\" tabindex=\"-1\" aria-labelledby=\"editCouponLabel\" aria-hidden=\"true\">\r\n-    <div class=\"modal-dialog\">\r\n-        <div class=\"modal-content\">\r\n-            <div class=\"modal-header\">\r\n-                <h5 class=\"modal-title\" id=\"editCouponLabel\">Edit Coupon</h5>\r\n-                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n-            </div>\r\n-            <div class=\"modal-body\">\r\n-                <form id=\"editCouponForm\">\r\n-                    <input type=\"hidden\" id=\"editCouponId\" name=\"id\">\r\n-                    \r\n-                    <!-- Coupon Code -->\r\n-                    <div class=\"mb-3\">\r\n-                        <label for=\"editCode\" class=\"form-label\">Coupon Code</label>\r\n-                        <input type=\"text\" class=\"form-control\" id=\"editCode\" name=\"code\" required>\r\n-                    </div>\r\n-                    \r\n-                    <!-- Discount Type -->\r\n-                    <div class=\"mb-3\">\r\n-                        <label for=\"editDiscountType\" class=\"form-label\">Discount Type</label>\r\n-                        <select class=\"form-control\" id=\"editDiscountType\" name=\"discountType\" required>\r\n-                            <option value=\"Percentage\">Percentage</option>\r\n-                            <option value=\"Fixed\">Fixed</option>\r\n-                        </select>\r\n-                    </div>\r\n-\r\n-                    <!-- Discount Value -->\r\n-                    <div class=\"mb-3\">\r\n-                        <label for=\"editDiscountValue\" class=\"form-label\">Discount Value</label>\r\n-                        <input type=\"number\" class=\"form-control\" id=\"editDiscountValue\" name=\"discountValue\" required>\r\n-                    </div>\r\n-                        <!--  Coupon Usage count -->\r\n-                        <div class=\"mb-3\">\r\n-                            <label for=\"editusageCount\" class=\"form-label\">Coupon Usage Count</label>\r\n-                            <input type=\"number\" class=\"form-control\" id=\"editusageCount\" name=\"usageCount\" required>\r\n-                        </div>\r\n-\r\n-                    <!-- Start Date -->\r\n-                    <div class=\"mb-3\">\r\n-                        <label for=\"editStartDate\" class=\"form-label\">Start Date</label>\r\n-                        <input type=\"date\" class=\"form-control\" id=\"editStartDate\" name=\"startDate\" required>\r\n-                    </div>\r\n-\r\n-                    <!-- End Date -->\r\n-                    <div class=\"mb-3\">\r\n-                        <label for=\"editEndDate\" class=\"form-label\">End Date</label>\r\n-                        <input type=\"date\" class=\"form-control\" id=\"editEndDate\" name=\"endDate\" required>\r\n-                    </div>\r\n-\r\n-                    <!-- Minimum Order Amount -->\r\n-                    <div class=\"mb-3\">\r\n-                        <label for=\"editMinimumOrderAmount\" class=\"form-label\">Minimum Order Amount</label>\r\n-                        <input type=\"number\" class=\"form-control\" id=\"editMinimumOrderAmount\" name=\"minimumOrderAmount\" required>\r\n-                    </div>\r\n-\r\n-                    <!-- Max Order Amount (conditionally shown) -->\r\n-                    <div class=\"mb-3\" id=\"editMaxOrderAmountWrapper\" style=\"display: none;\">\r\n-                        <label for=\"editMaxOrderAmount\" class=\"form-label\">Maximum Discount Amount</label>\r\n-                        <input type=\"number\" class=\"form-control\" id=\"editMaxOrderAmount\" name=\"maxDiscountAmount\">\r\n-                    </div>\r\n-\r\n-                    <!-- Submit Button -->\r\n-                    <button type=\"submit\" class=\"btn btn-primary\">Update Coupon</button>\r\n-                </form>\r\n-            </div>\r\n-        </div>\r\n-    </div>\r\n-</div>\r\n-\r\n-<!------------------------------------------------pagination-------------------------------------------------------->\r\n-<div class=\"pagination-container\">\r\n-    <div class=\"pagination-box\">\r\n-        <!-- Pagination -->\r\n-        <div class=\"pagination\">\r\n-            <% if (currentPage > 1) { %>\r\n-                <a href=\"/admin/coupons?page=<%= currentPage - 1 %>&search=<%= search %>\" class=\"pagination-link\">Prev</a>\r\n-            <% } %>\r\n-            \r\n-            <% for (let i = 1; i <= totalPages; i++) { %>\r\n-                <a href=\"/admin/coupons?page=<%= i %>&search=<%= search %>\" \r\n-                   class=\"pagination-link <%= currentPage === i ? 'active' : '' %>\">\r\n-                   <%= i %>\r\n-                </a>\r\n-            <% } %>\r\n-            \r\n-            <% if (currentPage < totalPages) { %>\r\n-                <a href=\"/admin/coupons?page=<%= currentPage + 1 %>&search=<%= search %>\" class=\"pagination-link\">Next</a>\r\n-            <% } %>\r\n-        </div>\r\n-    </div>\r\n-</div>\r\n-\r\n-\r\n-\r\n-        <script>\r\n-            //--------------------------- Add Coupon ---------------------------\r\n-            // For Add Coupon Modal\r\n-document.getElementById('discountType').addEventListener('change', function() {\r\n-    var discountType = this.value;\r\n-    var maxOrderAmountWrapper = document.getElementById('maxOrderAmountWrapper');\r\n-    if (discountType === 'Percentage') {\r\n-        maxOrderAmountWrapper.style.display = 'block';  // Show the Max Order Amount field\r\n-    } else {\r\n-        maxOrderAmountWrapper.style.display = 'none';   // Hide the Max Order Amount field\r\n-    }\r\n-});\r\n-\r\n-// For Edit Coupon Modal\r\n-document.getElementById('editDiscountType').addEventListener('change', function() {\r\n-    var discountType = this.value;\r\n-    var editMaxOrderAmountWrapper = document.getElementById('editMaxOrderAmountWrapper');\r\n-    if (discountType === 'Percentage') {\r\n-        editMaxOrderAmountWrapper.style.display = 'block';  // Show the Max Order Amount field\r\n-    } else {\r\n-        editMaxOrderAmountWrapper.style.display = 'none';   // Hide the Max Order Amount field\r\n-    }\r\n-});\r\n-\r\n-document.getElementById('addCouponForm').addEventListener('submit', async function (e) {\r\n-    e.preventDefault();\r\n-\r\n-    // Validation Logic\r\n-    const code = document.getElementById('code').value.trim();\r\n-    const discountValue = document.getElementById('discountValue').value.trim();\r\n-    const usageCount = document.getElementById('usageCount').value.trim();\r\n-    const startDate = new Date(document.getElementById('startDate').value);\r\n-    const endDate = new Date(document.getElementById('endDate').value);\r\n-    const currentDate = new Date();\r\n-    const minimumOrderAmount = document.getElementById('minimumOrderAmount').value.trim();\r\n-    \r\n-    // Validation for Coupon Code\r\n-    if (!code || code.length < 8) {\r\n-        Swal.fire({\r\n-            icon: 'error',\r\n-            title: 'Error',\r\n-            text: 'Coupon Code must be at least 8 characters long.',\r\n-        });\r\n-        return;\r\n-    }\r\n-    if (/[^a-zA-Z0-9]/.test(code)) {\r\n-        Swal.fire({\r\n-            icon: 'error',\r\n-            title: 'Error',\r\n-            text: 'Coupon Code must contain only alphabets and numbers.',\r\n-        });\r\n-        return;\r\n-    }\r\n-\r\n-    // Validation for Discount Value (Fixed)\r\n-    const discountType = document.getElementById('discountType').value;\r\n-    if (discountType === 'Fixed') {\r\n-        if (discountValue < 1 || discountValue > 100) {\r\n-            Swal.fire({\r\n-                icon: 'error',\r\n-                title: 'Error',\r\n-                text: 'Discount Value for Fixed must be between 1 and 100.',\r\n-            });\r\n-            return;\r\n-        }\r\n-    }\r\n-\r\n-    // Validation for Usage Count\r\n-    if (usageCount < 1 || usageCount > 10) {\r\n-        Swal.fire({\r\n-            icon: 'error',\r\n-            title: 'Error',\r\n-            text: 'Coupon Usage Count must be between 1 and 10.',\r\n-        });\r\n-        return;\r\n-    }\r\n-\r\n-    // Validation for Start Date - must be today or any date after today\r\n-    const today = currentDate.setHours(0, 0, 0, 0); // Set to midnight\r\n-    if (startDate < today) {\r\n-        Swal.fire({\r\n-            icon: 'error',\r\n-            title: 'Error',\r\n-            text: 'Start Date must be today or a date after today.',\r\n-        });\r\n-        return;\r\n-    }\r\n-\r\n-    // Validation for End Date\r\n-    const endDates = new Date(document.getElementById('endDate').value);\r\n-    if (endDates <= startDate) {\r\n-        Swal.fire({\r\n-            icon: 'error',\r\n-            title: 'Error',\r\n-            text: 'End Date must be later than Start Date.',\r\n-        });\r\n-        return;\r\n-    }\r\n-\r\n-    // Validation for Minimum Order Amount\r\n-    if (minimumOrderAmount.length === 0 || minimumOrderAmount <= 0) {\r\n-        Swal.fire({\r\n-            icon: 'error',\r\n-            title: 'Error',\r\n-            text: 'Minimum Order Amount is required and should be greater than 0.',\r\n-        });\r\n-        return;\r\n-    }\r\n-\r\n-    // If all validations pass, proceed with form submission\r\n-    const formData = new FormData(this);\r\n-    const data = Object.fromEntries(formData.entries());\r\n-\r\n-    try {\r\n-        const response = await fetch('/admin/addcoupon', {\r\n-            method: 'POST',\r\n-            headers: {\r\n-                'Content-Type': 'application/json',\r\n-            },\r\n-            body: JSON.stringify(data),\r\n-        });\r\n-        const result = await response.json();\r\n-        if (response.ok) {\r\n-            Swal.fire({\r\n-                icon: 'success',\r\n-                title: 'Success',\r\n-                text: result.message,\r\n-            }).then(() => {\r\n-                this.reset();\r\n-                location.reload();\r\n-            });\r\n-        } else {\r\n-            Swal.fire({\r\n-                icon: 'error',\r\n-                title: 'Error',\r\n-                text: result.message,\r\n-            });\r\n-        }\r\n-    } catch (error) {\r\n-        console.error('Error:', error);\r\n-        Swal.fire({\r\n-            icon: 'error',\r\n-            title: 'Error',\r\n-            text: 'An error occurred while adding the coupon.',\r\n-        });\r\n-    }\r\n-});\r\n-\r\n-            //--------------------------- Edit coupon ---------------------------\r\n-\r\n-            document.addEventListener('DOMContentLoaded', function () {\r\n-                var editCouponModal = new bootstrap.Modal(document.getElementById('editCollection'));\r\n-                document.getElementById('editCouponForm').addEventListener('submit', async (event) => {\r\n-                    event.preventDefault();\r\n-                    const formData = new FormData(event.target);\r\n-                    const data = Object.fromEntries(formData.entries());\r\n-                    data.id = document.getElementById('editCouponId').value;\r\n-                    try {\r\n-                        const response = await fetch(`/admin/editcoupon/${data.id}`, {\r\n-                            method: 'POST',\r\n-                            headers: { 'Content-Type': 'application/json' },\r\n-                            body: JSON.stringify(data),\r\n-                        });\r\n-                        const result = await response.json();\r\n-                        Swal.fire({\r\n-                            title: 'Coupon Updated Successfully',\r\n-                            text: result.message,\r\n-                            icon: 'success',\r\n-                            confirmButtonText: 'OK'\r\n-                        }).then(() => {\r\n-                            window.location.reload();\r\n-                        });\r\n-                    } catch (error) {\r\n-                        console.error('Error:', error);\r\n-                        Swal.fire({\r\n-                            title: 'Error',\r\n-                            text: 'Failed to update coupon.',\r\n-                            icon: 'error',\r\n-                            confirmButtonText: 'OK'\r\n-                        });\r\n-                    }\r\n-                });\r\n-\r\n-                window.editCoupon = function (id) {\r\n-                    fetch(`/admin/coupons/${id}`)\r\n-                        .then(response => {\r\n-                            if (!response.ok) {\r\n-                                throw new Error('Network response was not ok');\r\n-                            }\r\n-                            return response.json();\r\n-                        })\r\n-                        .then(coupon => {\r\n-                            document.getElementById('editCouponId').value = coupon._id;\r\n-                            document.getElementById('editCode').value = coupon.code;\r\n-                            document.getElementById('editDiscountType').value = coupon.discountType;\r\n-                            document.getElementById('editDiscountValue').value = coupon.discountValue;\r\n-                            document.getElementById('editusageCount').value = coupon.usageCount;\r\n-                            document.getElementById('editStartDate').value = new Date(coupon.startDate).toISOString().split('T')[0];\r\n-                            document.getElementById('editEndDate').value = new Date(coupon.endDate).toISOString().split('T')[0];\r\n-                            document.getElementById('editMinimumOrderAmount').value = coupon.minimumOrderAmount;\r\n-                            editCouponModal.show();\r\n-                        })\r\n-                        .catch(error => {\r\n-                            console.error('Error fetching coupon data:', error);\r\n-                            Swal.fire({\r\n-                                title: 'Error',\r\n-                                text: 'Failed to load coupon data.',\r\n-                                icon: 'error',\r\n-                                confirmButtonText: 'OK'\r\n-                            });\r\n-                        });\r\n-                };\r\n-            });\r\n-\r\n-            //--------------------------- Sweet delete ---------------------------\r\n-\r\n-            async function confirmDelete(id) {\r\n-                const confirmResult = await Swal.fire({\r\n-                    title: 'Are you sure?',\r\n-                    text: 'You are about to delete this coupon. This action cannot be undone.',\r\n-                    icon: 'warning',\r\n-                    showCancelButton: true,\r\n-                    confirmButtonColor: '#3085d6',\r\n-                    cancelButtonColor: '#d33',\r\n-                    confirmButtonText: 'Yes, delete it!'\r\n-                });\r\n-                if (confirmResult.isConfirmed) {\r\n-                    deleteCoupon(id);\r\n-                }\r\n-            }\r\n-\r\n-            //--------------------------- Delete Coupon ---------------------------\r\n-\r\n-            async function deleteCoupon(id) {\r\n-                try {\r\n-                    const response = await fetch(`/admin/deletecoupon/${id}`, {\r\n-                        method: 'DELETE',\r\n-                        headers: { 'Content-Type': 'application/json' }\r\n-                    });\r\n-                    const result = await response.json();\r\n-                    Swal.fire({\r\n-                        title: 'Delete Coupon',\r\n-                        text: result.message,\r\n-                        icon: 'success',\r\n-                        confirmButtonText: 'OK'\r\n-                    }).then(() => {\r\n-                        window.location.reload();\r\n-                    });\r\n-                } catch (error) {\r\n-                    Swal.fire({\r\n-                        title: 'Error',\r\n-                        text: 'Error deleting coupon',\r\n-                        icon: 'error',\r\n-                        confirmButtonText: 'OK'\r\n-                    });\r\n-                }\r\n-            }\r\n-\r\n-        </script>\r\n-\r\n-\r\n       \n\\ No newline at end of file\n"
                },
                {
                    "date": 1736748169711,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -10,14 +10,9 @@\n         align-items: center;\r\n         margin-left: 50px; \r\n     }\r\n \r\n-    .search-container {\r\n-        border-radius: 10px;\r\n-        margin: 24px;\r\n-        background: #2b7aaf;\r\n-        width: 95%;\r\n-    }\r\n+   \r\n \r\n     .coupon-action a {\r\n         text-decoration: none;\r\n     }\r\n@@ -191,8 +186,52 @@\n \r\n \r\n \r\n             <!----------------------------------------- category table --------------------------------------------------->\r\n+            <div class=\"table-container\">\r\n+                <table class=\"table\">\r\n+                    <thead>\r\n+                        <tr scope=\"row\" class=\"product-table-head\">\r\n+                            <th scope=\"col\" class=\"product-table-first\">SL.No</th>\r\n+                            <th scope=\"col\">Coupon Code</th>\r\n+                            <th scope=\"col\">Discount Type</th>\r\n+                            <th scope=\"col\">Discount Value</th>\r\n+                            <th scope=\"col\">Coupon Usage Count</th>\r\n+                            <th scope=\"col\">Min Amount</th>\r\n+                            <th scope=\"col\">Start Date</th>\r\n+                            <th scope=\"col\">End Date</th>\r\n+                            <th scope=\"col\">Status</th>\r\n+                            <th scope=\"col\" class=\"product-table-last\">Action</th>\r\n+                        </tr>\r\n+                    </thead>\r\n+                    <tbody>\r\n+                        <% coupons.forEach((coupon, index)=> { %>\r\n+                            <tr scope=\"row\">\r\n+                                <td><%= index + 1 %></td>\r\n+                                <td><%= coupon.code %></td>\r\n+                                <td><%= coupon.discountType %></td>\r\n+                                <td><%= coupon.discountValue %></td>\r\n+                                <td><%= coupon.usageCount %></td>\r\n+                                <td><%= coupon.minimumOrderAmount %></td>\r\n+                                <td><%= new Date(coupon.startDate).toLocaleDateString() %></td>\r\n+                                <td><%= new Date(coupon.endDate).toLocaleDateString() %></td>\r\n+                                <td><%= coupon.isActive ? 'Active' : 'Blocked' %></td>\r\n+                                <td class=\"coupon-action\">\r\n+                                    <a href=\"#\" id=\"edit-collection-modal\" data-bs-toggle=\"modal\" data-bs-target=\"#editCollection\" onclick=\"editCoupon('<%= coupon.id %>')\">\r\n+                                        <i class=\"bi bi-pencil-square\"></i>\r\n+                                    </a>\r\n+                                    <a href=\"/admin/statuscoupon?id=<%= coupon.id %>&status=<%= coupon.isActive %>\">\r\n+                                        <i class=\"bi bi-x-circle m-2\"></i>\r\n+                                    </a>\r\n+                                    <a href=\"#\" onclick=\"confirmDelete('<%= coupon._id %>')\">\r\n+                                        <i class=\"bi bi-trash3\"></i>\r\n+                                    </a>\r\n+                                </td>\r\n+                            </tr>\r\n+                        <% }) %>\r\n+                    </tbody>\r\n+                </table>\r\n+            </div>\r\n        \r\n     <!------------------------------ Add Coupon Modal ---------------------------->\r\n \r\n   <!-- Add Coupon Modal -->\r\n"
                },
                {
                    "date": 1736748178479,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -36,15 +36,9 @@\n         background: #a0d3e9;\r\n         color: #330fe5;\r\n     }\r\n \r\n-    .table tbody tr td {\r\n-        padding: 18px 0px;\r\n-        text-align: left;\r\n-        background: #9ed7e7;\r\n-        color: #0a0df1;\r\n-       \r\n-    }\r\n+  \r\n     \r\n     .table-container {\r\n         padding-left: 30px; /* Adds padding inside the container */\r\n         margin-left: 230px; /* Adds margin outside the container */\r\n"
                },
                {
                    "date": 1736748189383,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,652 @@\n+\r\n+\r\n+<%- include('sidebar') %>\r\n+\r\n+<style>\r\n+    .category {\r\n+        width: 85%;\r\n+        display: flex;\r\n+        flex-direction: column;\r\n+        align-items: center;\r\n+        margin-left: 50px; \r\n+    }\r\n+\r\n+   \r\n+\r\n+    .coupon-action a {\r\n+        text-decoration: none;\r\n+    }\r\n+\r\n+    .modal-content {\r\n+        background: #b4dfee;\r\n+        color: #101feb;\r\n+    }\r\n+\r\n+    .form-control {\r\n+        background: #9cd6e7;\r\n+        color: #2d08b4;\r\n+        width: 100%;\r\n+    }\r\n+\r\n+    .form-control::placeholder {\r\n+        color: #1132d6;\r\n+    }\r\n+\r\n+    .form-control:focus {\r\n+        background: #a0d3e9;\r\n+        color: #330fe5;\r\n+    }\r\n+\r\n+  \r\n+    \r\n+   \r\n+    .table {\r\n+        margin-left: 0; /* Reset margin if necessary */\r\n+    }\r\n+    #formatCategory{\r\n+        padding-left: 30px; /* Adds padding inside the container */\r\n+        margin-left: 150px; /* Adds margin outside the container */\r\n+        width: calc(100% - 30px); /* Ensures proper alignment if width is an issue */   \r\n+    }\r\n+\r\n+    .pagination-container {\r\n+    display: flex;\r\n+    justify-content: center;\r\n+    padding: 20px;\r\n+}\r\n+\r\n+.pagination-box {\r\n+    display: flex;\r\n+    justify-content: center;\r\n+    padding: 10px;\r\n+    border: 1px solid #ccc;\r\n+    background-color: #f9f9f9;\r\n+    border-radius: 8px;\r\n+    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\r\n+}\r\n+\r\n+.pagination {\r\n+    display: flex;\r\n+    list-style-type: none;\r\n+}\r\n+\r\n+.pagination-link {\r\n+    padding: 8px 12px;\r\n+    margin: 0 5px;\r\n+    text-decoration: none;\r\n+    color: #333;\r\n+    background-color: #f1f1f1;\r\n+    border-radius: 4px;\r\n+    transition: background-color 0.3s;\r\n+}\r\n+\r\n+.pagination-link:hover {\r\n+    background-color: #ddd;\r\n+}\r\n+\r\n+.pagination-link.active {\r\n+    background-color: #007bff;\r\n+    color: white;\r\n+}\r\n+\r\n+.pagination-link:disabled {\r\n+    color: #999;\r\n+    pointer-events: none;\r\n+}\r\n+\r\n+\r\n+    .table-container {\r\n+        width: 100%;\r\n+        overflow-x: auto;\r\n+        -webkit-overflow-scrolling: touch;\r\n+        margin: 1rem 0;\r\n+    }\r\n+    \r\n+    .table {\r\n+        width: 100%;\r\n+        border-collapse: collapse;\r\n+        white-space: nowrap;\r\n+        font-size: 0.875rem;\r\n+    }\r\n+    \r\n+    .table th,\r\n+    .table td {\r\n+        padding: 0.5rem;\r\n+        border-bottom: 1px solid #dee2e6;\r\n+        vertical-align: middle;\r\n+    }\r\n+    \r\n+    .table thead th {\r\n+        background-color: #f8f9fa;\r\n+        position: sticky;\r\n+        top: 0;\r\n+        z-index: 1;\r\n+    }\r\n+    \r\n+    .table tbody tr:hover {\r\n+        background-color: rgba(0,0,0,.075);\r\n+    }\r\n+    \r\n+    .coupon-action {\r\n+        white-space: nowrap;\r\n+    }\r\n+    \r\n+    .coupon-action a {\r\n+        color: inherit;\r\n+        text-decoration: none;\r\n+        padding: 0.25rem;\r\n+    }\r\n+    \r\n+    .coupon-action i {\r\n+        font-size: 1rem;\r\n+    }\r\n+    \r\n+    @media screen and (max-width: 768px) {\r\n+        .table {\r\n+            font-size: 0.75rem;\r\n+        }\r\n+        \r\n+        .table th,\r\n+        .table td {\r\n+            padding: 0.35rem;\r\n+        }\r\n+    }\r\n+    </style>\r\n+    \r\n+   \r\n+\r\n+\r\n+\r\n+\r\n+      <!------------------------------------- Coupon page Header -------------------------------------------------------->\r\n+<div class=\"col-12 category\" id=\"formatCategory\">\r\n+    <div class=\"search-container d-flex justify-content-between align-items-center gap-2 p-3\">\r\n+        <div class=\"d-flex align-items-center gap-3\">\r\n+            <h2 class=\"text-white mx-5\">\r\n+                <%= title %>\r\n+            </h2>\r\n+            \r\n+        </div>\r\n+        <button type=\"button\" class=\"btn btn-success\" data-bs-toggle=\"modal\" data-bs-target=\"#addCollection\">\r\n+            Add Coupon\r\n+        </button>\r\n+    </div>\r\n+</div>\r\n+\r\n+\r\n+\r\n+            <!----------------------------------------- category table --------------------------------------------------->\r\n+            <div class=\"table-container\">\r\n+                <table class=\"table\">\r\n+                    <thead>\r\n+                        <tr scope=\"row\" class=\"product-table-head\">\r\n+                            <th scope=\"col\" class=\"product-table-first\">SL.No</th>\r\n+                            <th scope=\"col\">Coupon Code</th>\r\n+                            <th scope=\"col\">Discount Type</th>\r\n+                            <th scope=\"col\">Discount Value</th>\r\n+                            <th scope=\"col\">Coupon Usage Count</th>\r\n+                            <th scope=\"col\">Min Amount</th>\r\n+                            <th scope=\"col\">Start Date</th>\r\n+                            <th scope=\"col\">End Date</th>\r\n+                            <th scope=\"col\">Status</th>\r\n+                            <th scope=\"col\" class=\"product-table-last\">Action</th>\r\n+                        </tr>\r\n+                    </thead>\r\n+                    <tbody>\r\n+                        <% coupons.forEach((coupon, index)=> { %>\r\n+                            <tr scope=\"row\">\r\n+                                <td><%= index + 1 %></td>\r\n+                                <td><%= coupon.code %></td>\r\n+                                <td><%= coupon.discountType %></td>\r\n+                                <td><%= coupon.discountValue %></td>\r\n+                                <td><%= coupon.usageCount %></td>\r\n+                                <td><%= coupon.minimumOrderAmount %></td>\r\n+                                <td><%= new Date(coupon.startDate).toLocaleDateString() %></td>\r\n+                                <td><%= new Date(coupon.endDate).toLocaleDateString() %></td>\r\n+                                <td><%= coupon.isActive ? 'Active' : 'Blocked' %></td>\r\n+                                <td class=\"coupon-action\">\r\n+                                    <a href=\"#\" id=\"edit-collection-modal\" data-bs-toggle=\"modal\" data-bs-target=\"#editCollection\" onclick=\"editCoupon('<%= coupon.id %>')\">\r\n+                                        <i class=\"bi bi-pencil-square\"></i>\r\n+                                    </a>\r\n+                                    <a href=\"/admin/statuscoupon?id=<%= coupon.id %>&status=<%= coupon.isActive %>\">\r\n+                                        <i class=\"bi bi-x-circle m-2\"></i>\r\n+                                    </a>\r\n+                                    <a href=\"#\" onclick=\"confirmDelete('<%= coupon._id %>')\">\r\n+                                        <i class=\"bi bi-trash3\"></i>\r\n+                                    </a>\r\n+                                </td>\r\n+                            </tr>\r\n+                        <% }) %>\r\n+                    </tbody>\r\n+                </table>\r\n+            </div>\r\n+       \r\n+    <!------------------------------ Add Coupon Modal ---------------------------->\r\n+\r\n+  <!-- Add Coupon Modal -->\r\n+<div class=\"modal fade\" id=\"addCollection\" tabindex=\"-1\" aria-labelledby=\"addCouponLabel\" aria-hidden=\"true\">\r\n+    <div class=\"modal-dialog\">\r\n+        <div class=\"modal-content\">\r\n+            <div class=\"modal-header\">\r\n+                <h5 class=\"modal-title\" id=\"addCouponLabel\">Add Coupon</h5>\r\n+                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n+            </div>\r\n+            <div class=\"modal-body\">\r\n+                <form id=\"addCouponForm\">\r\n+                    <!-- Coupon Code -->\r\n+                    <div class=\"mb-3\">\r\n+                        <label for=\"code\" class=\"form-label\">Coupon Code</label>\r\n+                        <input type=\"text\" class=\"form-control\" id=\"code\" name=\"code\" required>\r\n+                    </div>\r\n+                    \r\n+                    <!-- Discount Type -->\r\n+                    <div class=\"mb-3\">\r\n+                        <label for=\"discountType\" class=\"form-label\">Discount Type</label>\r\n+                        <select class=\"form-control\" id=\"discountType\" name=\"discountType\" required>\r\n+                            <option value=\"Percentage\">Percentage</option>\r\n+                            <option value=\"Fixed\">Fixed</option>\r\n+                        </select>\r\n+                    </div>\r\n+                    \r\n+                    <!-- Discount Value -->\r\n+                    <div class=\"mb-3\">\r\n+                        <label for=\"discountValue\" class=\"form-label\">Discount Value</label>\r\n+                        <input type=\"number\" class=\"form-control\" id=\"discountValue\" name=\"discountValue\" required>\r\n+                    </div>\r\n+                           <!--  Coupon Usage count -->\r\n+                           <div class=\"mb-3\">\r\n+                            <label for=\"usageCount\" class=\"form-label\">Coupon Usage Count</label>\r\n+                            <input type=\"number\" class=\"form-control\" id=\"usageCount\" name=\"usageCount\" required>\r\n+                        </div>\r\n+                    \r\n+                    <!-- Start Date -->\r\n+                    <div class=\"mb-3\">\r\n+                        <label for=\"startDate\" class=\"form-label\">Start Date</label>\r\n+                        <input type=\"date\" class=\"form-control\" id=\"startDate\" name=\"startDate\" required>\r\n+                    </div>\r\n+                    \r\n+                    <!-- End Date -->\r\n+                    <div class=\"mb-3\">\r\n+                        <label for=\"endDate\" class=\"form-label\">End Date</label>\r\n+                        <input type=\"date\" class=\"form-control\" id=\"endDate\" name=\"endDate\" required>\r\n+                    </div>\r\n+                    \r\n+                    <!-- Minimum Order Amount -->\r\n+                    <div class=\"mb-3\">\r\n+                        <label for=\"minimumOrderAmount\" class=\"form-label\">Minimum Order Amount</label>\r\n+                        <input type=\"number\" class=\"form-control\" id=\"minimumOrderAmount\" name=\"minimumOrderAmount\" required>\r\n+                    </div>\r\n+\r\n+                    <!-- Max Order Amount (conditionally shown) -->\r\n+                    <div class=\"mb-3\" id=\"maxOrderAmountWrapper\" style=\"display: none;\">\r\n+                        <label for=\"maxOrderAmount\" class=\"form-label\">Maximum Discount Amount</label>\r\n+                        <input type=\"number\" class=\"form-control\" id=\"maxOrderAmount\" name=\"maxDiscountAmount\">\r\n+                    </div>\r\n+                   \r\n+                    <!-- Submit Button -->\r\n+                    <button type=\"submit\" class=\"btn\" style=\"background-color: #0a0df1;\">Add Coupon</button>\r\n+                </form>\r\n+            </div>\r\n+        </div>\r\n+    </div>\r\n+</div>\r\n+\r\n+    <!--------------------------- Edit Coupon Modal ---------------------------->\r\n+\r\n+  <!-- Edit Coupon Modal -->\r\n+<div class=\"modal fade\" id=\"editCollection\" tabindex=\"-1\" aria-labelledby=\"editCouponLabel\" aria-hidden=\"true\">\r\n+    <div class=\"modal-dialog\">\r\n+        <div class=\"modal-content\">\r\n+            <div class=\"modal-header\">\r\n+                <h5 class=\"modal-title\" id=\"editCouponLabel\">Edit Coupon</h5>\r\n+                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n+            </div>\r\n+            <div class=\"modal-body\">\r\n+                <form id=\"editCouponForm\">\r\n+                    <input type=\"hidden\" id=\"editCouponId\" name=\"id\">\r\n+                    \r\n+                    <!-- Coupon Code -->\r\n+                    <div class=\"mb-3\">\r\n+                        <label for=\"editCode\" class=\"form-label\">Coupon Code</label>\r\n+                        <input type=\"text\" class=\"form-control\" id=\"editCode\" name=\"code\" required>\r\n+                    </div>\r\n+                    \r\n+                    <!-- Discount Type -->\r\n+                    <div class=\"mb-3\">\r\n+                        <label for=\"editDiscountType\" class=\"form-label\">Discount Type</label>\r\n+                        <select class=\"form-control\" id=\"editDiscountType\" name=\"discountType\" required>\r\n+                            <option value=\"Percentage\">Percentage</option>\r\n+                            <option value=\"Fixed\">Fixed</option>\r\n+                        </select>\r\n+                    </div>\r\n+\r\n+                    <!-- Discount Value -->\r\n+                    <div class=\"mb-3\">\r\n+                        <label for=\"editDiscountValue\" class=\"form-label\">Discount Value</label>\r\n+                        <input type=\"number\" class=\"form-control\" id=\"editDiscountValue\" name=\"discountValue\" required>\r\n+                    </div>\r\n+                        <!--  Coupon Usage count -->\r\n+                        <div class=\"mb-3\">\r\n+                            <label for=\"editusageCount\" class=\"form-label\">Coupon Usage Count</label>\r\n+                            <input type=\"number\" class=\"form-control\" id=\"editusageCount\" name=\"usageCount\" required>\r\n+                        </div>\r\n+\r\n+                    <!-- Start Date -->\r\n+                    <div class=\"mb-3\">\r\n+                        <label for=\"editStartDate\" class=\"form-label\">Start Date</label>\r\n+                        <input type=\"date\" class=\"form-control\" id=\"editStartDate\" name=\"startDate\" required>\r\n+                    </div>\r\n+\r\n+                    <!-- End Date -->\r\n+                    <div class=\"mb-3\">\r\n+                        <label for=\"editEndDate\" class=\"form-label\">End Date</label>\r\n+                        <input type=\"date\" class=\"form-control\" id=\"editEndDate\" name=\"endDate\" required>\r\n+                    </div>\r\n+\r\n+                    <!-- Minimum Order Amount -->\r\n+                    <div class=\"mb-3\">\r\n+                        <label for=\"editMinimumOrderAmount\" class=\"form-label\">Minimum Order Amount</label>\r\n+                        <input type=\"number\" class=\"form-control\" id=\"editMinimumOrderAmount\" name=\"minimumOrderAmount\" required>\r\n+                    </div>\r\n+\r\n+                    <!-- Max Order Amount (conditionally shown) -->\r\n+                    <div class=\"mb-3\" id=\"editMaxOrderAmountWrapper\" style=\"display: none;\">\r\n+                        <label for=\"editMaxOrderAmount\" class=\"form-label\">Maximum Discount Amount</label>\r\n+                        <input type=\"number\" class=\"form-control\" id=\"editMaxOrderAmount\" name=\"maxDiscountAmount\">\r\n+                    </div>\r\n+\r\n+                    <!-- Submit Button -->\r\n+                    <button type=\"submit\" class=\"btn btn-primary\">Update Coupon</button>\r\n+                </form>\r\n+            </div>\r\n+        </div>\r\n+    </div>\r\n+</div>\r\n+\r\n+<!------------------------------------------------pagination-------------------------------------------------------->\r\n+<div class=\"pagination-container\">\r\n+    <div class=\"pagination-box\">\r\n+        <!-- Pagination -->\r\n+        <div class=\"pagination\">\r\n+            <% if (currentPage > 1) { %>\r\n+                <a href=\"/admin/coupons?page=<%= currentPage - 1 %>&search=<%= search %>\" class=\"pagination-link\">Prev</a>\r\n+            <% } %>\r\n+            \r\n+            <% for (let i = 1; i <= totalPages; i++) { %>\r\n+                <a href=\"/admin/coupons?page=<%= i %>&search=<%= search %>\" \r\n+                   class=\"pagination-link <%= currentPage === i ? 'active' : '' %>\">\r\n+                   <%= i %>\r\n+                </a>\r\n+            <% } %>\r\n+            \r\n+            <% if (currentPage < totalPages) { %>\r\n+                <a href=\"/admin/coupons?page=<%= currentPage + 1 %>&search=<%= search %>\" class=\"pagination-link\">Next</a>\r\n+            <% } %>\r\n+        </div>\r\n+    </div>\r\n+</div>\r\n+\r\n+\r\n+\r\n+        <script>\r\n+            //--------------------------- Add Coupon ---------------------------\r\n+            // For Add Coupon Modal\r\n+document.getElementById('discountType').addEventListener('change', function() {\r\n+    var discountType = this.value;\r\n+    var maxOrderAmountWrapper = document.getElementById('maxOrderAmountWrapper');\r\n+    if (discountType === 'Percentage') {\r\n+        maxOrderAmountWrapper.style.display = 'block';  // Show the Max Order Amount field\r\n+    } else {\r\n+        maxOrderAmountWrapper.style.display = 'none';   // Hide the Max Order Amount field\r\n+    }\r\n+});\r\n+\r\n+// For Edit Coupon Modal\r\n+document.getElementById('editDiscountType').addEventListener('change', function() {\r\n+    var discountType = this.value;\r\n+    var editMaxOrderAmountWrapper = document.getElementById('editMaxOrderAmountWrapper');\r\n+    if (discountType === 'Percentage') {\r\n+        editMaxOrderAmountWrapper.style.display = 'block';  // Show the Max Order Amount field\r\n+    } else {\r\n+        editMaxOrderAmountWrapper.style.display = 'none';   // Hide the Max Order Amount field\r\n+    }\r\n+});\r\n+\r\n+document.getElementById('addCouponForm').addEventListener('submit', async function (e) {\r\n+    e.preventDefault();\r\n+\r\n+    // Validation Logic\r\n+    const code = document.getElementById('code').value.trim();\r\n+    const discountValue = document.getElementById('discountValue').value.trim();\r\n+    const usageCount = document.getElementById('usageCount').value.trim();\r\n+    const startDate = new Date(document.getElementById('startDate').value);\r\n+    const endDate = new Date(document.getElementById('endDate').value);\r\n+    const currentDate = new Date();\r\n+    const minimumOrderAmount = document.getElementById('minimumOrderAmount').value.trim();\r\n+    \r\n+    // Validation for Coupon Code\r\n+    if (!code || code.length < 8) {\r\n+        Swal.fire({\r\n+            icon: 'error',\r\n+            title: 'Error',\r\n+            text: 'Coupon Code must be at least 8 characters long.',\r\n+        });\r\n+        return;\r\n+    }\r\n+    if (/[^a-zA-Z0-9]/.test(code)) {\r\n+        Swal.fire({\r\n+            icon: 'error',\r\n+            title: 'Error',\r\n+            text: 'Coupon Code must contain only alphabets and numbers.',\r\n+        });\r\n+        return;\r\n+    }\r\n+\r\n+    // Validation for Discount Value (Fixed)\r\n+    const discountType = document.getElementById('discountType').value;\r\n+    if (discountType === 'Fixed') {\r\n+        if (discountValue < 1 || discountValue > 100) {\r\n+            Swal.fire({\r\n+                icon: 'error',\r\n+                title: 'Error',\r\n+                text: 'Discount Value for Fixed must be between 1 and 100.',\r\n+            });\r\n+            return;\r\n+        }\r\n+    }\r\n+\r\n+    // Validation for Usage Count\r\n+    if (usageCount < 1 || usageCount > 10) {\r\n+        Swal.fire({\r\n+            icon: 'error',\r\n+            title: 'Error',\r\n+            text: 'Coupon Usage Count must be between 1 and 10.',\r\n+        });\r\n+        return;\r\n+    }\r\n+\r\n+    // Validation for Start Date - must be today or any date after today\r\n+    const today = currentDate.setHours(0, 0, 0, 0); // Set to midnight\r\n+    if (startDate < today) {\r\n+        Swal.fire({\r\n+            icon: 'error',\r\n+            title: 'Error',\r\n+            text: 'Start Date must be today or a date after today.',\r\n+        });\r\n+        return;\r\n+    }\r\n+\r\n+    // Validation for End Date\r\n+    const endDates = new Date(document.getElementById('endDate').value);\r\n+    if (endDates <= startDate) {\r\n+        Swal.fire({\r\n+            icon: 'error',\r\n+            title: 'Error',\r\n+            text: 'End Date must be later than Start Date.',\r\n+        });\r\n+        return;\r\n+    }\r\n+\r\n+    // Validation for Minimum Order Amount\r\n+    if (minimumOrderAmount.length === 0 || minimumOrderAmount <= 0) {\r\n+        Swal.fire({\r\n+            icon: 'error',\r\n+            title: 'Error',\r\n+            text: 'Minimum Order Amount is required and should be greater than 0.',\r\n+        });\r\n+        return;\r\n+    }\r\n+\r\n+    // If all validations pass, proceed with form submission\r\n+    const formData = new FormData(this);\r\n+    const data = Object.fromEntries(formData.entries());\r\n+\r\n+    try {\r\n+        const response = await fetch('/admin/addcoupon', {\r\n+            method: 'POST',\r\n+            headers: {\r\n+                'Content-Type': 'application/json',\r\n+            },\r\n+            body: JSON.stringify(data),\r\n+        });\r\n+        const result = await response.json();\r\n+        if (response.ok) {\r\n+            Swal.fire({\r\n+                icon: 'success',\r\n+                title: 'Success',\r\n+                text: result.message,\r\n+            }).then(() => {\r\n+                this.reset();\r\n+                location.reload();\r\n+            });\r\n+        } else {\r\n+            Swal.fire({\r\n+                icon: 'error',\r\n+                title: 'Error',\r\n+                text: result.message,\r\n+            });\r\n+        }\r\n+    } catch (error) {\r\n+        console.error('Error:', error);\r\n+        Swal.fire({\r\n+            icon: 'error',\r\n+            title: 'Error',\r\n+            text: 'An error occurred while adding the coupon.',\r\n+        });\r\n+    }\r\n+});\r\n+\r\n+            //--------------------------- Edit coupon ---------------------------\r\n+\r\n+            document.addEventListener('DOMContentLoaded', function () {\r\n+                var editCouponModal = new bootstrap.Modal(document.getElementById('editCollection'));\r\n+                document.getElementById('editCouponForm').addEventListener('submit', async (event) => {\r\n+                    event.preventDefault();\r\n+                    const formData = new FormData(event.target);\r\n+                    const data = Object.fromEntries(formData.entries());\r\n+                    data.id = document.getElementById('editCouponId').value;\r\n+                    try {\r\n+                        const response = await fetch(`/admin/editcoupon/${data.id}`, {\r\n+                            method: 'POST',\r\n+                            headers: { 'Content-Type': 'application/json' },\r\n+                            body: JSON.stringify(data),\r\n+                        });\r\n+                        const result = await response.json();\r\n+                        Swal.fire({\r\n+                            title: 'Coupon Updated Successfully',\r\n+                            text: result.message,\r\n+                            icon: 'success',\r\n+                            confirmButtonText: 'OK'\r\n+                        }).then(() => {\r\n+                            window.location.reload();\r\n+                        });\r\n+                    } catch (error) {\r\n+                        console.error('Error:', error);\r\n+                        Swal.fire({\r\n+                            title: 'Error',\r\n+                            text: 'Failed to update coupon.',\r\n+                            icon: 'error',\r\n+                            confirmButtonText: 'OK'\r\n+                        });\r\n+                    }\r\n+                });\r\n+\r\n+                window.editCoupon = function (id) {\r\n+                    fetch(`/admin/coupons/${id}`)\r\n+                        .then(response => {\r\n+                            if (!response.ok) {\r\n+                                throw new Error('Network response was not ok');\r\n+                            }\r\n+                            return response.json();\r\n+                        })\r\n+                        .then(coupon => {\r\n+                            document.getElementById('editCouponId').value = coupon._id;\r\n+                            document.getElementById('editCode').value = coupon.code;\r\n+                            document.getElementById('editDiscountType').value = coupon.discountType;\r\n+                            document.getElementById('editDiscountValue').value = coupon.discountValue;\r\n+                            document.getElementById('editusageCount').value = coupon.usageCount;\r\n+                            document.getElementById('editStartDate').value = new Date(coupon.startDate).toISOString().split('T')[0];\r\n+                            document.getElementById('editEndDate').value = new Date(coupon.endDate).toISOString().split('T')[0];\r\n+                            document.getElementById('editMinimumOrderAmount').value = coupon.minimumOrderAmount;\r\n+                            editCouponModal.show();\r\n+                        })\r\n+                        .catch(error => {\r\n+                            console.error('Error fetching coupon data:', error);\r\n+                            Swal.fire({\r\n+                                title: 'Error',\r\n+                                text: 'Failed to load coupon data.',\r\n+                                icon: 'error',\r\n+                                confirmButtonText: 'OK'\r\n+                            });\r\n+                        });\r\n+                };\r\n+            });\r\n+\r\n+            //--------------------------- Sweet delete ---------------------------\r\n+\r\n+            async function confirmDelete(id) {\r\n+                const confirmResult = await Swal.fire({\r\n+                    title: 'Are you sure?',\r\n+                    text: 'You are about to delete this coupon. This action cannot be undone.',\r\n+                    icon: 'warning',\r\n+                    showCancelButton: true,\r\n+                    confirmButtonColor: '#3085d6',\r\n+                    cancelButtonColor: '#d33',\r\n+                    confirmButtonText: 'Yes, delete it!'\r\n+                });\r\n+                if (confirmResult.isConfirmed) {\r\n+                    deleteCoupon(id);\r\n+                }\r\n+            }\r\n+\r\n+            //--------------------------- Delete Coupon ---------------------------\r\n+\r\n+            async function deleteCoupon(id) {\r\n+                try {\r\n+                    const response = await fetch(`/admin/deletecoupon/${id}`, {\r\n+                        method: 'DELETE',\r\n+                        headers: { 'Content-Type': 'application/json' }\r\n+                    });\r\n+                    const result = await response.json();\r\n+                    Swal.fire({\r\n+                        title: 'Delete Coupon',\r\n+                        text: result.message,\r\n+                        icon: 'success',\r\n+                        confirmButtonText: 'OK'\r\n+                    }).then(() => {\r\n+                        window.location.reload();\r\n+                    });\r\n+                } catch (error) {\r\n+                    Swal.fire({\r\n+                        title: 'Error',\r\n+                        text: 'Error deleting coupon',\r\n+                        icon: 'error',\r\n+                        confirmButtonText: 'OK'\r\n+                    });\r\n+                }\r\n+            }\r\n+\r\n+        </script>\r\n+\r\n+\r\n+      \n\\ No newline at end of file\n"
                },
                {
                    "date": 1736748195760,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -37,676 +37,11 @@\n         color: #330fe5;\r\n     }\r\n \r\n   \r\n-    \r\n-   \r\n-    .table {\r\n-        margin-left: 0; /* Reset margin if necessary */\r\n-    }\r\n-    #formatCategory{\r\n-        padding-left: 30px; /* Adds padding inside the container */\r\n-        margin-left: 150px; /* Adds margin outside the container */\r\n-        width: calc(100% - 30px); /* Ensures proper alignment if width is an issue */   \r\n-    }\r\n \r\n-    .pagination-container {\r\n-    display: flex;\r\n-    justify-content: center;\r\n-    padding: 20px;\r\n-}\r\n \r\n-.pagination-box {\r\n-    display: flex;\r\n-    justify-content: center;\r\n-    padding: 10px;\r\n-    border: 1px solid #ccc;\r\n-    background-color: #f9f9f9;\r\n-    border-radius: 8px;\r\n-    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\r\n-}\r\n \r\n-.pagination {\r\n-    display: flex;\r\n-    list-style-type: none;\r\n-}\r\n-\r\n-.pagination-link {\r\n-    padding: 8px 12px;\r\n-    margin: 0 5px;\r\n-    text-decoration: none;\r\n-    color: #333;\r\n-    background-color: #f1f1f1;\r\n-    border-radius: 4px;\r\n-    transition: background-color 0.3s;\r\n-}\r\n-\r\n-.pagination-link:hover {\r\n-    background-color: #ddd;\r\n-}\r\n-\r\n-.pagination-link.active {\r\n-    background-color: #007bff;\r\n-    color: white;\r\n-}\r\n-\r\n-.pagination-link:disabled {\r\n-    color: #999;\r\n-    pointer-events: none;\r\n-}\r\n-\r\n-\r\n-    .table-container {\r\n-        width: 100%;\r\n-        overflow-x: auto;\r\n-        -webkit-overflow-scrolling: touch;\r\n-        margin: 1rem 0;\r\n-    }\r\n-    \r\n-    .table {\r\n-        width: 100%;\r\n-        border-collapse: collapse;\r\n-        white-space: nowrap;\r\n-        font-size: 0.875rem;\r\n-    }\r\n-    \r\n-    .table th,\r\n-    .table td {\r\n-        padding: 0.5rem;\r\n-        border-bottom: 1px solid #dee2e6;\r\n-        vertical-align: middle;\r\n-    }\r\n-    \r\n-    .table thead th {\r\n-        background-color: #f8f9fa;\r\n-        position: sticky;\r\n-        top: 0;\r\n-        z-index: 1;\r\n-    }\r\n-    \r\n-    .table tbody tr:hover {\r\n-        background-color: rgba(0,0,0,.075);\r\n-    }\r\n-    \r\n-    .coupon-action {\r\n-        white-space: nowrap;\r\n-    }\r\n-    \r\n-    .coupon-action a {\r\n-        color: inherit;\r\n-        text-decoration: none;\r\n-        padding: 0.25rem;\r\n-    }\r\n-    \r\n-    .coupon-action i {\r\n-        font-size: 1rem;\r\n-    }\r\n-    \r\n-    @media screen and (max-width: 768px) {\r\n-        .table {\r\n-            font-size: 0.75rem;\r\n-        }\r\n-        \r\n-        .table th,\r\n-        .table td {\r\n-            padding: 0.35rem;\r\n-        }\r\n-    }\r\n-    </style>\r\n-    \r\n-   \r\n-\r\n-\r\n-\r\n-\r\n-      <!------------------------------------- Coupon page Header -------------------------------------------------------->\r\n-<div class=\"col-12 category\" id=\"formatCategory\">\r\n-    <div class=\"search-container d-flex justify-content-between align-items-center gap-2 p-3\">\r\n-        <div class=\"d-flex align-items-center gap-3\">\r\n-            <h2 class=\"text-white mx-5\">\r\n-                <%= title %>\r\n-            </h2>\r\n-            \r\n-        </div>\r\n-        <button type=\"button\" class=\"btn btn-success\" data-bs-toggle=\"modal\" data-bs-target=\"#addCollection\">\r\n-            Add Coupon\r\n-        </button>\r\n-    </div>\r\n-</div>\r\n-\r\n-\r\n-\r\n-            <!----------------------------------------- category table --------------------------------------------------->\r\n-            <div class=\"table-container\">\r\n-                <table class=\"table\">\r\n-                    <thead>\r\n-                        <tr scope=\"row\" class=\"product-table-head\">\r\n-                            <th scope=\"col\" class=\"product-table-first\">SL.No</th>\r\n-                            <th scope=\"col\">Coupon Code</th>\r\n-                            <th scope=\"col\">Discount Type</th>\r\n-                            <th scope=\"col\">Discount Value</th>\r\n-                            <th scope=\"col\">Coupon Usage Count</th>\r\n-                            <th scope=\"col\">Min Amount</th>\r\n-                            <th scope=\"col\">Start Date</th>\r\n-                            <th scope=\"col\">End Date</th>\r\n-                            <th scope=\"col\">Status</th>\r\n-                            <th scope=\"col\" class=\"product-table-last\">Action</th>\r\n-                        </tr>\r\n-                    </thead>\r\n-                    <tbody>\r\n-                        <% coupons.forEach((coupon, index)=> { %>\r\n-                            <tr scope=\"row\">\r\n-                                <td><%= index + 1 %></td>\r\n-                                <td><%= coupon.code %></td>\r\n-                                <td><%= coupon.discountType %></td>\r\n-                                <td><%= coupon.discountValue %></td>\r\n-                                <td><%= coupon.usageCount %></td>\r\n-                                <td><%= coupon.minimumOrderAmount %></td>\r\n-                                <td><%= new Date(coupon.startDate).toLocaleDateString() %></td>\r\n-                                <td><%= new Date(coupon.endDate).toLocaleDateString() %></td>\r\n-                                <td><%= coupon.isActive ? 'Active' : 'Blocked' %></td>\r\n-                                <td class=\"coupon-action\">\r\n-                                    <a href=\"#\" id=\"edit-collection-modal\" data-bs-toggle=\"modal\" data-bs-target=\"#editCollection\" onclick=\"editCoupon('<%= coupon.id %>')\">\r\n-                                        <i class=\"bi bi-pencil-square\"></i>\r\n-                                    </a>\r\n-                                    <a href=\"/admin/statuscoupon?id=<%= coupon.id %>&status=<%= coupon.isActive %>\">\r\n-                                        <i class=\"bi bi-x-circle m-2\"></i>\r\n-                                    </a>\r\n-                                    <a href=\"#\" onclick=\"confirmDelete('<%= coupon._id %>')\">\r\n-                                        <i class=\"bi bi-trash3\"></i>\r\n-                                    </a>\r\n-                                </td>\r\n-                            </tr>\r\n-                        <% }) %>\r\n-                    </tbody>\r\n-                </table>\r\n-            </div>\r\n-       \r\n-    <!------------------------------ Add Coupon Modal ---------------------------->\r\n-\r\n-  <!-- Add Coupon Modal -->\r\n-<div class=\"modal fade\" id=\"addCollection\" tabindex=\"-1\" aria-labelledby=\"addCouponLabel\" aria-hidden=\"true\">\r\n-    <div class=\"modal-dialog\">\r\n-        <div class=\"modal-content\">\r\n-            <div class=\"modal-header\">\r\n-                <h5 class=\"modal-title\" id=\"addCouponLabel\">Add Coupon</h5>\r\n-                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n-            </div>\r\n-            <div class=\"modal-body\">\r\n-                <form id=\"addCouponForm\">\r\n-                    <!-- Coupon Code -->\r\n-                    <div class=\"mb-3\">\r\n-                        <label for=\"code\" class=\"form-label\">Coupon Code</label>\r\n-                        <input type=\"text\" class=\"form-control\" id=\"code\" name=\"code\" required>\r\n-                    </div>\r\n-                    \r\n-                    <!-- Discount Type -->\r\n-                    <div class=\"mb-3\">\r\n-                        <label for=\"discountType\" class=\"form-label\">Discount Type</label>\r\n-                        <select class=\"form-control\" id=\"discountType\" name=\"discountType\" required>\r\n-                            <option value=\"Percentage\">Percentage</option>\r\n-                            <option value=\"Fixed\">Fixed</option>\r\n-                        </select>\r\n-                    </div>\r\n-                    \r\n-                    <!-- Discount Value -->\r\n-                    <div class=\"mb-3\">\r\n-                        <label for=\"discountValue\" class=\"form-label\">Discount Value</label>\r\n-                        <input type=\"number\" class=\"form-control\" id=\"discountValue\" name=\"discountValue\" required>\r\n-                    </div>\r\n-                           <!--  Coupon Usage count -->\r\n-                           <div class=\"mb-3\">\r\n-                            <label for=\"usageCount\" class=\"form-label\">Coupon Usage Count</label>\r\n-                            <input type=\"number\" class=\"form-control\" id=\"usageCount\" name=\"usageCount\" required>\r\n-                        </div>\r\n-                    \r\n-                    <!-- Start Date -->\r\n-                    <div class=\"mb-3\">\r\n-                        <label for=\"startDate\" class=\"form-label\">Start Date</label>\r\n-                        <input type=\"date\" class=\"form-control\" id=\"startDate\" name=\"startDate\" required>\r\n-                    </div>\r\n-                    \r\n-                    <!-- End Date -->\r\n-                    <div class=\"mb-3\">\r\n-                        <label for=\"endDate\" class=\"form-label\">End Date</label>\r\n-                        <input type=\"date\" class=\"form-control\" id=\"endDate\" name=\"endDate\" required>\r\n-                    </div>\r\n-                    \r\n-                    <!-- Minimum Order Amount -->\r\n-                    <div class=\"mb-3\">\r\n-                        <label for=\"minimumOrderAmount\" class=\"form-label\">Minimum Order Amount</label>\r\n-                        <input type=\"number\" class=\"form-control\" id=\"minimumOrderAmount\" name=\"minimumOrderAmount\" required>\r\n-                    </div>\r\n-\r\n-                    <!-- Max Order Amount (conditionally shown) -->\r\n-                    <div class=\"mb-3\" id=\"maxOrderAmountWrapper\" style=\"display: none;\">\r\n-                        <label for=\"maxOrderAmount\" class=\"form-label\">Maximum Discount Amount</label>\r\n-                        <input type=\"number\" class=\"form-control\" id=\"maxOrderAmount\" name=\"maxDiscountAmount\">\r\n-                    </div>\r\n-                   \r\n-                    <!-- Submit Button -->\r\n-                    <button type=\"submit\" class=\"btn\" style=\"background-color: #0a0df1;\">Add Coupon</button>\r\n-                </form>\r\n-            </div>\r\n-        </div>\r\n-    </div>\r\n-</div>\r\n-\r\n-    <!--------------------------- Edit Coupon Modal ---------------------------->\r\n-\r\n-  <!-- Edit Coupon Modal -->\r\n-<div class=\"modal fade\" id=\"editCollection\" tabindex=\"-1\" aria-labelledby=\"editCouponLabel\" aria-hidden=\"true\">\r\n-    <div class=\"modal-dialog\">\r\n-        <div class=\"modal-content\">\r\n-            <div class=\"modal-header\">\r\n-                <h5 class=\"modal-title\" id=\"editCouponLabel\">Edit Coupon</h5>\r\n-                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n-            </div>\r\n-            <div class=\"modal-body\">\r\n-                <form id=\"editCouponForm\">\r\n-                    <input type=\"hidden\" id=\"editCouponId\" name=\"id\">\r\n-                    \r\n-                    <!-- Coupon Code -->\r\n-                    <div class=\"mb-3\">\r\n-                        <label for=\"editCode\" class=\"form-label\">Coupon Code</label>\r\n-                        <input type=\"text\" class=\"form-control\" id=\"editCode\" name=\"code\" required>\r\n-                    </div>\r\n-                    \r\n-                    <!-- Discount Type -->\r\n-                    <div class=\"mb-3\">\r\n-                        <label for=\"editDiscountType\" class=\"form-label\">Discount Type</label>\r\n-                        <select class=\"form-control\" id=\"editDiscountType\" name=\"discountType\" required>\r\n-                            <option value=\"Percentage\">Percentage</option>\r\n-                            <option value=\"Fixed\">Fixed</option>\r\n-                        </select>\r\n-                    </div>\r\n-\r\n-                    <!-- Discount Value -->\r\n-                    <div class=\"mb-3\">\r\n-                        <label for=\"editDiscountValue\" class=\"form-label\">Discount Value</label>\r\n-                        <input type=\"number\" class=\"form-control\" id=\"editDiscountValue\" name=\"discountValue\" required>\r\n-                    </div>\r\n-                        <!--  Coupon Usage count -->\r\n-                        <div class=\"mb-3\">\r\n-                            <label for=\"editusageCount\" class=\"form-label\">Coupon Usage Count</label>\r\n-                            <input type=\"number\" class=\"form-control\" id=\"editusageCount\" name=\"usageCount\" required>\r\n-                        </div>\r\n-\r\n-                    <!-- Start Date -->\r\n-                    <div class=\"mb-3\">\r\n-                        <label for=\"editStartDate\" class=\"form-label\">Start Date</label>\r\n-                        <input type=\"date\" class=\"form-control\" id=\"editStartDate\" name=\"startDate\" required>\r\n-                    </div>\r\n-\r\n-                    <!-- End Date -->\r\n-                    <div class=\"mb-3\">\r\n-                        <label for=\"editEndDate\" class=\"form-label\">End Date</label>\r\n-                        <input type=\"date\" class=\"form-control\" id=\"editEndDate\" name=\"endDate\" required>\r\n-                    </div>\r\n-\r\n-                    <!-- Minimum Order Amount -->\r\n-                    <div class=\"mb-3\">\r\n-                        <label for=\"editMinimumOrderAmount\" class=\"form-label\">Minimum Order Amount</label>\r\n-                        <input type=\"number\" class=\"form-control\" id=\"editMinimumOrderAmount\" name=\"minimumOrderAmount\" required>\r\n-                    </div>\r\n-\r\n-                    <!-- Max Order Amount (conditionally shown) -->\r\n-                    <div class=\"mb-3\" id=\"editMaxOrderAmountWrapper\" style=\"display: none;\">\r\n-                        <label for=\"editMaxOrderAmount\" class=\"form-label\">Maximum Discount Amount</label>\r\n-                        <input type=\"number\" class=\"form-control\" id=\"editMaxOrderAmount\" name=\"maxDiscountAmount\">\r\n-                    </div>\r\n-\r\n-                    <!-- Submit Button -->\r\n-                    <button type=\"submit\" class=\"btn btn-primary\">Update Coupon</button>\r\n-                </form>\r\n-            </div>\r\n-        </div>\r\n-    </div>\r\n-</div>\r\n-\r\n-<!------------------------------------------------pagination-------------------------------------------------------->\r\n-<div class=\"pagination-container\">\r\n-    <div class=\"pagination-box\">\r\n-        <!-- Pagination -->\r\n-        <div class=\"pagination\">\r\n-            <% if (currentPage > 1) { %>\r\n-                <a href=\"/admin/coupons?page=<%= currentPage - 1 %>&search=<%= search %>\" class=\"pagination-link\">Prev</a>\r\n-            <% } %>\r\n-            \r\n-            <% for (let i = 1; i <= totalPages; i++) { %>\r\n-                <a href=\"/admin/coupons?page=<%= i %>&search=<%= search %>\" \r\n-                   class=\"pagination-link <%= currentPage === i ? 'active' : '' %>\">\r\n-                   <%= i %>\r\n-                </a>\r\n-            <% } %>\r\n-            \r\n-            <% if (currentPage < totalPages) { %>\r\n-                <a href=\"/admin/coupons?page=<%= currentPage + 1 %>&search=<%= search %>\" class=\"pagination-link\">Next</a>\r\n-            <% } %>\r\n-        </div>\r\n-    </div>\r\n-</div>\r\n-\r\n-\r\n-\r\n-        <script>\r\n-            //--------------------------- Add Coupon ---------------------------\r\n-            // For Add Coupon Modal\r\n-document.getElementById('discountType').addEventListener('change', function() {\r\n-    var discountType = this.value;\r\n-    var maxOrderAmountWrapper = document.getElementById('maxOrderAmountWrapper');\r\n-    if (discountType === 'Percentage') {\r\n-        maxOrderAmountWrapper.style.display = 'block';  // Show the Max Order Amount field\r\n-    } else {\r\n-        maxOrderAmountWrapper.style.display = 'none';   // Hide the Max Order Amount field\r\n-    }\r\n-});\r\n-\r\n-// For Edit Coupon Modal\r\n-document.getElementById('editDiscountType').addEventListener('change', function() {\r\n-    var discountType = this.value;\r\n-    var editMaxOrderAmountWrapper = document.getElementById('editMaxOrderAmountWrapper');\r\n-    if (discountType === 'Percentage') {\r\n-        editMaxOrderAmountWrapper.style.display = 'block';  // Show the Max Order Amount field\r\n-    } else {\r\n-        editMaxOrderAmountWrapper.style.display = 'none';   // Hide the Max Order Amount field\r\n-    }\r\n-});\r\n-\r\n-document.getElementById('addCouponForm').addEventListener('submit', async function (e) {\r\n-    e.preventDefault();\r\n-\r\n-    // Validation Logic\r\n-    const code = document.getElementById('code').value.trim();\r\n-    const discountValue = document.getElementById('discountValue').value.trim();\r\n-    const usageCount = document.getElementById('usageCount').value.trim();\r\n-    const startDate = new Date(document.getElementById('startDate').value);\r\n-    const endDate = new Date(document.getElementById('endDate').value);\r\n-    const currentDate = new Date();\r\n-    const minimumOrderAmount = document.getElementById('minimumOrderAmount').value.trim();\r\n-    \r\n-    // Validation for Coupon Code\r\n-    if (!code || code.length < 8) {\r\n-        Swal.fire({\r\n-            icon: 'error',\r\n-            title: 'Error',\r\n-            text: 'Coupon Code must be at least 8 characters long.',\r\n-        });\r\n-        return;\r\n-    }\r\n-    if (/[^a-zA-Z0-9]/.test(code)) {\r\n-        Swal.fire({\r\n-            icon: 'error',\r\n-            title: 'Error',\r\n-            text: 'Coupon Code must contain only alphabets and numbers.',\r\n-        });\r\n-        return;\r\n-    }\r\n-\r\n-    // Validation for Discount Value (Fixed)\r\n-    const discountType = document.getElementById('discountType').value;\r\n-    if (discountType === 'Fixed') {\r\n-        if (discountValue < 1 || discountValue > 100) {\r\n-            Swal.fire({\r\n-                icon: 'error',\r\n-                title: 'Error',\r\n-                text: 'Discount Value for Fixed must be between 1 and 100.',\r\n-            });\r\n-            return;\r\n-        }\r\n-    }\r\n-\r\n-    // Validation for Usage Count\r\n-    if (usageCount < 1 || usageCount > 10) {\r\n-        Swal.fire({\r\n-            icon: 'error',\r\n-            title: 'Error',\r\n-            text: 'Coupon Usage Count must be between 1 and 10.',\r\n-        });\r\n-        return;\r\n-    }\r\n-\r\n-    // Validation for Start Date - must be today or any date after today\r\n-    const today = currentDate.setHours(0, 0, 0, 0); // Set to midnight\r\n-    if (startDate < today) {\r\n-        Swal.fire({\r\n-            icon: 'error',\r\n-            title: 'Error',\r\n-            text: 'Start Date must be today or a date after today.',\r\n-        });\r\n-        return;\r\n-    }\r\n-\r\n-    // Validation for End Date\r\n-    const endDates = new Date(document.getElementById('endDate').value);\r\n-    if (endDates <= startDate) {\r\n-        Swal.fire({\r\n-            icon: 'error',\r\n-            title: 'Error',\r\n-            text: 'End Date must be later than Start Date.',\r\n-        });\r\n-        return;\r\n-    }\r\n-\r\n-    // Validation for Minimum Order Amount\r\n-    if (minimumOrderAmount.length === 0 || minimumOrderAmount <= 0) {\r\n-        Swal.fire({\r\n-            icon: 'error',\r\n-            title: 'Error',\r\n-            text: 'Minimum Order Amount is required and should be greater than 0.',\r\n-        });\r\n-        return;\r\n-    }\r\n-\r\n-    // If all validations pass, proceed with form submission\r\n-    const formData = new FormData(this);\r\n-    const data = Object.fromEntries(formData.entries());\r\n-\r\n-    try {\r\n-        const response = await fetch('/admin/addcoupon', {\r\n-            method: 'POST',\r\n-            headers: {\r\n-                'Content-Type': 'application/json',\r\n-            },\r\n-            body: JSON.stringify(data),\r\n-        });\r\n-        const result = await response.json();\r\n-        if (response.ok) {\r\n-            Swal.fire({\r\n-                icon: 'success',\r\n-                title: 'Success',\r\n-                text: result.message,\r\n-            }).then(() => {\r\n-                this.reset();\r\n-                location.reload();\r\n-            });\r\n-        } else {\r\n-            Swal.fire({\r\n-                icon: 'error',\r\n-                title: 'Error',\r\n-                text: result.message,\r\n-            });\r\n-        }\r\n-    } catch (error) {\r\n-        console.error('Error:', error);\r\n-        Swal.fire({\r\n-            icon: 'error',\r\n-            title: 'Error',\r\n-            text: 'An error occurred while adding the coupon.',\r\n-        });\r\n-    }\r\n-});\r\n-\r\n-            //--------------------------- Edit coupon ---------------------------\r\n-\r\n-            document.addEventListener('DOMContentLoaded', function () {\r\n-                var editCouponModal = new bootstrap.Modal(document.getElementById('editCollection'));\r\n-                document.getElementById('editCouponForm').addEventListener('submit', async (event) => {\r\n-                    event.preventDefault();\r\n-                    const formData = new FormData(event.target);\r\n-                    const data = Object.fromEntries(formData.entries());\r\n-                    data.id = document.getElementById('editCouponId').value;\r\n-                    try {\r\n-                        const response = await fetch(`/admin/editcoupon/${data.id}`, {\r\n-                            method: 'POST',\r\n-                            headers: { 'Content-Type': 'application/json' },\r\n-                            body: JSON.stringify(data),\r\n-                        });\r\n-                        const result = await response.json();\r\n-                        Swal.fire({\r\n-                            title: 'Coupon Updated Successfully',\r\n-                            text: result.message,\r\n-                            icon: 'success',\r\n-                            confirmButtonText: 'OK'\r\n-                        }).then(() => {\r\n-                            window.location.reload();\r\n-                        });\r\n-                    } catch (error) {\r\n-                        console.error('Error:', error);\r\n-                        Swal.fire({\r\n-                            title: 'Error',\r\n-                            text: 'Failed to update coupon.',\r\n-                            icon: 'error',\r\n-                            confirmButtonText: 'OK'\r\n-                        });\r\n-                    }\r\n-                });\r\n-\r\n-                window.editCoupon = function (id) {\r\n-                    fetch(`/admin/coupons/${id}`)\r\n-                        .then(response => {\r\n-                            if (!response.ok) {\r\n-                                throw new Error('Network response was not ok');\r\n-                            }\r\n-                            return response.json();\r\n-                        })\r\n-                        .then(coupon => {\r\n-                            document.getElementById('editCouponId').value = coupon._id;\r\n-                            document.getElementById('editCode').value = coupon.code;\r\n-                            document.getElementById('editDiscountType').value = coupon.discountType;\r\n-                            document.getElementById('editDiscountValue').value = coupon.discountValue;\r\n-                            document.getElementById('editusageCount').value = coupon.usageCount;\r\n-                            document.getElementById('editStartDate').value = new Date(coupon.startDate).toISOString().split('T')[0];\r\n-                            document.getElementById('editEndDate').value = new Date(coupon.endDate).toISOString().split('T')[0];\r\n-                            document.getElementById('editMinimumOrderAmount').value = coupon.minimumOrderAmount;\r\n-                            editCouponModal.show();\r\n-                        })\r\n-                        .catch(error => {\r\n-                            console.error('Error fetching coupon data:', error);\r\n-                            Swal.fire({\r\n-                                title: 'Error',\r\n-                                text: 'Failed to load coupon data.',\r\n-                                icon: 'error',\r\n-                                confirmButtonText: 'OK'\r\n-                            });\r\n-                        });\r\n-                };\r\n-            });\r\n-\r\n-            //--------------------------- Sweet delete ---------------------------\r\n-\r\n-            async function confirmDelete(id) {\r\n-                const confirmResult = await Swal.fire({\r\n-                    title: 'Are you sure?',\r\n-                    text: 'You are about to delete this coupon. This action cannot be undone.',\r\n-                    icon: 'warning',\r\n-                    showCancelButton: true,\r\n-                    confirmButtonColor: '#3085d6',\r\n-                    cancelButtonColor: '#d33',\r\n-                    confirmButtonText: 'Yes, delete it!'\r\n-                });\r\n-                if (confirmResult.isConfirmed) {\r\n-                    deleteCoupon(id);\r\n-                }\r\n-            }\r\n-\r\n-            //--------------------------- Delete Coupon ---------------------------\r\n-\r\n-            async function deleteCoupon(id) {\r\n-                try {\r\n-                    const response = await fetch(`/admin/deletecoupon/${id}`, {\r\n-                        method: 'DELETE',\r\n-                        headers: { 'Content-Type': 'application/json' }\r\n-                    });\r\n-                    const result = await response.json();\r\n-                    Swal.fire({\r\n-                        title: 'Delete Coupon',\r\n-                        text: result.message,\r\n-                        icon: 'success',\r\n-                        confirmButtonText: 'OK'\r\n-                    }).then(() => {\r\n-                        window.location.reload();\r\n-                    });\r\n-                } catch (error) {\r\n-                    Swal.fire({\r\n-                        title: 'Error',\r\n-                        text: 'Error deleting coupon',\r\n-                        icon: 'error',\r\n-                        confirmButtonText: 'OK'\r\n-                    });\r\n-                }\r\n-            }\r\n-\r\n-        </script>\r\n-\r\n-\r\n-      \n-\r\n-\r\n-<%- include('sidebar') %>\r\n-\r\n-<style>\r\n-    .category {\r\n-        width: 85%;\r\n-        display: flex;\r\n-        flex-direction: column;\r\n-        align-items: center;\r\n-        margin-left: 50px; \r\n-    }\r\n-\r\n-   \r\n-\r\n-    .coupon-action a {\r\n-        text-decoration: none;\r\n-    }\r\n-\r\n-    .modal-content {\r\n-        background: #b4dfee;\r\n-        color: #101feb;\r\n-    }\r\n-\r\n-    .form-control {\r\n-        background: #9cd6e7;\r\n-        color: #2d08b4;\r\n-        width: 100%;\r\n-    }\r\n-\r\n-    .form-control::placeholder {\r\n-        color: #1132d6;\r\n-    }\r\n-\r\n-    .form-control:focus {\r\n-        background: #a0d3e9;\r\n-        color: #330fe5;\r\n-    }\r\n-\r\n-  \r\n-    \r\n-    .table-container {\r\n-        padding-left: 30px; /* Adds padding inside the container */\r\n-        margin-left: 230px; /* Adds margin outside the container */\r\n-        width: calc(100% - 30px); /* Ensures proper alignment if width is an issue */\r\n-    }\r\n-\r\n-    .table {\r\n-        margin-left: 0; /* Reset margin if necessary */\r\n-    }\r\n-    #formatCategory{\r\n-        padding-left: 30px; /* Adds padding inside the container */\r\n-        margin-left: 150px; /* Adds margin outside the container */\r\n-        width: calc(100% - 30px); /* Ensures proper alignment if width is an issue */   \r\n-    }\r\n-\r\n     .pagination-container {\r\n     display: flex;\r\n     justify-content: center;\r\n     padding: 20px;\r\n"
                },
                {
                    "date": 1736748219707,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -38,10 +38,8 @@\n     }\r\n \r\n   \r\n \r\n-\r\n-\r\n     .pagination-container {\r\n     display: flex;\r\n     justify-content: center;\r\n     padding: 20px;\r\n@@ -175,9 +173,9 @@\n                             <th scope=\"col\" class=\"product-table-first\">SL.No</th>\r\n                             <th scope=\"col\">Coupon Code</th>\r\n                             <th scope=\"col\">Discount Type</th>\r\n                             <th scope=\"col\">Discount Value</th>\r\n-                            <th scope=\"col\">Coupon Usage Count</th>\r\n+                            <th scope=\"col\">Usage Count</th>\r\n                             <th scope=\"col\">Min Amount</th>\r\n                             <th scope=\"col\">Start Date</th>\r\n                             <th scope=\"col\">End Date</th>\r\n                             <th scope=\"col\">Status</th>\r\n"
                },
                {
                    "date": 1736748269564,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -173,9 +173,9 @@\n                             <th scope=\"col\" class=\"product-table-first\">SL.No</th>\r\n                             <th scope=\"col\">Coupon Code</th>\r\n                             <th scope=\"col\">Discount Type</th>\r\n                             <th scope=\"col\">Discount Value</th>\r\n-                            <th scope=\"col\">Usage Count</th>\r\n+                            <th scope=\"col\">Coupon Usage Count</th>\r\n                             <th scope=\"col\">Min Amount</th>\r\n                             <th scope=\"col\">Start Date</th>\r\n                             <th scope=\"col\">End Date</th>\r\n                             <th scope=\"col\">Status</th>\r\n"
                },
                {
                    "date": 1736748278562,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -37,8 +37,18 @@\n         color: #330fe5;\r\n     }\r\n \r\n   \r\n+    \r\n+   \r\n+    .table {\r\n+        margin-left: 0; /* Reset margin if necessary */\r\n+    }\r\n+    #formatCategory{\r\n+        padding-left: 30px; /* Adds padding inside the container */\r\n+        margin-left: 150px; /* Adds margin outside the container */\r\n+        width: calc(100% - 30px); /* Ensures proper alignment if width is an issue */   \r\n+    }\r\n \r\n     .pagination-container {\r\n     display: flex;\r\n     justify-content: center;\r\n"
                },
                {
                    "date": 1736748286773,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -36,11 +36,22 @@\n         background: #a0d3e9;\r\n         color: #330fe5;\r\n     }\r\n \r\n-  \r\n+    .table tbody tr td {\r\n+        padding: 18px 0px;\r\n+        text-align: left;\r\n+        background: #9ed7e7;\r\n+        color: #0a0df1;\r\n+       \r\n+    }\r\n     \r\n-   \r\n+    .table-container {\r\n+        padding-left: 30px; /* Adds padding inside the container */\r\n+        margin-left: 230px; /* Adds margin outside the container */\r\n+        width: calc(100% - 30px); /* Ensures proper alignment if width is an issue */\r\n+    }\r\n+\r\n     .table {\r\n         margin-left: 0; /* Reset margin if necessary */\r\n     }\r\n     #formatCategory{\r\n"
                },
                {
                    "date": 1736748292964,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -36,14 +36,9 @@\n         background: #a0d3e9;\r\n         color: #330fe5;\r\n     }\r\n \r\n-    .table tbody tr td {\r\n-        padding: 18px 0px;\r\n-        text-align: left;\r\n-        background: #9ed7e7;\r\n-        color: #0a0df1;\r\n-       \r\n+  \r\n     }\r\n     \r\n     .table-container {\r\n         padding-left: 30px; /* Adds padding inside the container */\r\n"
                },
                {
                    "date": 1736748299443,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -10,9 +10,14 @@\n         align-items: center;\r\n         margin-left: 50px; \r\n     }\r\n \r\n-   \r\n+    .search-container {\r\n+        border-radius: 10px;\r\n+        margin: 24px;\r\n+        background: #2b7aaf;\r\n+        width: 95%;\r\n+    }\r\n \r\n     .coupon-action a {\r\n         text-decoration: none;\r\n     }\r\n@@ -36,9 +41,14 @@\n         background: #a0d3e9;\r\n         color: #330fe5;\r\n     }\r\n \r\n-  \r\n+    .table tbody tr td {\r\n+        padding: 18px 0px;\r\n+        text-align: left;\r\n+        background: #9ed7e7;\r\n+        color: #0a0df1;\r\n+       \r\n     }\r\n     \r\n     .table-container {\r\n         padding-left: 30px; /* Adds padding inside the container */\r\n"
                },
                {
                    "date": 1736748305123,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -10,14 +10,9 @@\n         align-items: center;\r\n         margin-left: 50px; \r\n     }\r\n \r\n-    .search-container {\r\n-        border-radius: 10px;\r\n-        margin: 24px;\r\n-        background: #2b7aaf;\r\n-        width: 95%;\r\n-    }\r\n+   \r\n \r\n     .coupon-action a {\r\n         text-decoration: none;\r\n     }\r\n@@ -41,15 +36,9 @@\n         background: #a0d3e9;\r\n         color: #330fe5;\r\n     }\r\n \r\n-    .table tbody tr td {\r\n-        padding: 18px 0px;\r\n-        text-align: left;\r\n-        background: #9ed7e7;\r\n-        color: #0a0df1;\r\n-       \r\n-    }\r\n+  \r\n     \r\n     .table-container {\r\n         padding-left: 30px; /* Adds padding inside the container */\r\n         margin-left: 230px; /* Adds margin outside the container */\r\n"
                },
                {
                    "date": 1736748362111,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,169 +1,13 @@\n \r\n \r\n <%- include('sidebar') %>\r\n \r\n-<style>\r\n-    .category {\r\n-        width: 85%;\r\n-        display: flex;\r\n-        flex-direction: column;\r\n-        align-items: center;\r\n-        margin-left: 50px; \r\n-    }\r\n-\r\n    \r\n \r\n-    .coupon-action a {\r\n-        text-decoration: none;\r\n-    }\r\n \r\n-    .modal-content {\r\n-        background: #b4dfee;\r\n-        color: #101feb;\r\n-    }\r\n \r\n-    .form-control {\r\n-        background: #9cd6e7;\r\n-        color: #2d08b4;\r\n-        width: 100%;\r\n-    }\r\n \r\n-    .form-control::placeholder {\r\n-        color: #1132d6;\r\n-    }\r\n-\r\n-    .form-control:focus {\r\n-        background: #a0d3e9;\r\n-        color: #330fe5;\r\n-    }\r\n-\r\n-  \r\n-    \r\n-    .table-container {\r\n-        padding-left: 30px; /* Adds padding inside the container */\r\n-        margin-left: 230px; /* Adds margin outside the container */\r\n-        width: calc(100% - 30px); /* Ensures proper alignment if width is an issue */\r\n-    }\r\n-\r\n-    .table {\r\n-        margin-left: 0; /* Reset margin if necessary */\r\n-    }\r\n-    #formatCategory{\r\n-        padding-left: 30px; /* Adds padding inside the container */\r\n-        margin-left: 150px; /* Adds margin outside the container */\r\n-        width: calc(100% - 30px); /* Ensures proper alignment if width is an issue */   \r\n-    }\r\n-\r\n-    .pagination-container {\r\n-    display: flex;\r\n-    justify-content: center;\r\n-    padding: 20px;\r\n-}\r\n-\r\n-.pagination-box {\r\n-    display: flex;\r\n-    justify-content: center;\r\n-    padding: 10px;\r\n-    border: 1px solid #ccc;\r\n-    background-color: #f9f9f9;\r\n-    border-radius: 8px;\r\n-    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\r\n-}\r\n-\r\n-.pagination {\r\n-    display: flex;\r\n-    list-style-type: none;\r\n-}\r\n-\r\n-.pagination-link {\r\n-    padding: 8px 12px;\r\n-    margin: 0 5px;\r\n-    text-decoration: none;\r\n-    color: #333;\r\n-    background-color: #f1f1f1;\r\n-    border-radius: 4px;\r\n-    transition: background-color 0.3s;\r\n-}\r\n-\r\n-.pagination-link:hover {\r\n-    background-color: #ddd;\r\n-}\r\n-\r\n-.pagination-link.active {\r\n-    background-color: #007bff;\r\n-    color: white;\r\n-}\r\n-\r\n-.pagination-link:disabled {\r\n-    color: #999;\r\n-    pointer-events: none;\r\n-}\r\n-\r\n-\r\n-    .table-container {\r\n-        width: 100%;\r\n-        overflow-x: auto;\r\n-        -webkit-overflow-scrolling: touch;\r\n-        margin: 1rem 0;\r\n-    }\r\n-    \r\n-    .table {\r\n-        width: 100%;\r\n-        border-collapse: collapse;\r\n-        white-space: nowrap;\r\n-        font-size: 0.875rem;\r\n-    }\r\n-    \r\n-    .table th,\r\n-    .table td {\r\n-        padding: 0.5rem;\r\n-        border-bottom: 1px solid #dee2e6;\r\n-        vertical-align: middle;\r\n-    }\r\n-    \r\n-    .table thead th {\r\n-        background-color: #f8f9fa;\r\n-        position: sticky;\r\n-        top: 0;\r\n-        z-index: 1;\r\n-    }\r\n-    \r\n-    .table tbody tr:hover {\r\n-        background-color: rgba(0,0,0,.075);\r\n-    }\r\n-    \r\n-    .coupon-action {\r\n-        white-space: nowrap;\r\n-    }\r\n-    \r\n-    .coupon-action a {\r\n-        color: inherit;\r\n-        text-decoration: none;\r\n-        padding: 0.25rem;\r\n-    }\r\n-    \r\n-    .coupon-action i {\r\n-        font-size: 1rem;\r\n-    }\r\n-    \r\n-    @media screen and (max-width: 768px) {\r\n-        .table {\r\n-            font-size: 0.75rem;\r\n-        }\r\n-        \r\n-        .table th,\r\n-        .table td {\r\n-            padding: 0.35rem;\r\n-        }\r\n-    }\r\n-    </style>\r\n-    \r\n-   \r\n-\r\n-\r\n-\r\n-\r\n       <!------------------------------------- Coupon page Header -------------------------------------------------------->\r\n <div class=\"col-12 category\" id=\"formatCategory\">\r\n     <div class=\"search-container d-flex justify-content-between align-items-center gap-2 p-3\">\r\n         <div class=\"d-flex align-items-center gap-3\">\r\n"
                },
                {
                    "date": 1736748367698,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,8 +1,8 @@\n \r\n \r\n <%- include('sidebar') %>\r\n-<sty\r\n+<style\r\n    \r\n \r\n \r\n \r\n"
                },
                {
                    "date": 1736748396691,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -83,9 +83,9 @@\n     width: 95%;  /* Reduced from 100% to allow for margins */\r\n     overflow-x: auto;\r\n     -webkit-overflow-scrolling: touch;\r\n     margin: 1rem auto;  /* Changed to auto for horizontal centering */\r\n-    padding-left: 5rem;  /* Added left padding */\r\n+    padding-left: 15rem;  /* Added left padding */\r\n }\r\n \r\n .table {\r\n     width: 100%;\r\n"
                }
            ],
            "date": 1736747850924,
            "name": "Commit-0",
            "content": "\r\n\r\n<%- include('sidebar') %>\r\n\r\n<style>\r\n    .category {\r\n        width: 85%;\r\n        display: flex;\r\n        flex-direction: column;\r\n        align-items: center;\r\n        margin-left: 50px; \r\n    }\r\n\r\n\r\n\r\n    .coupon-action a {\r\n        text-decoration: none;\r\n    }\r\n\r\n    .modal-content {\r\n        background: #b4dfee;\r\n        color: #101feb;\r\n    }\r\n\r\n    .form-control {\r\n        background: #9cd6e7;\r\n        color: #2d08b4;\r\n        width: 100%;\r\n    }\r\n\r\n    .form-control::placeholder {\r\n        color: #1132d6;\r\n    }\r\n\r\n    .form-control:focus {\r\n        background: #a0d3e9;\r\n        color: #330fe5;\r\n    }\r\n\r\n    .table tbody tr td {\r\n        padding: 18px 0px;\r\n        text-align: left;\r\n        background: #9ed7e7;\r\n        color: #0a0df1;\r\n       \r\n    }\r\n    \r\n    .table-container {\r\n        padding-left: 30px; /* Adds padding inside the container */\r\n        margin-left: 230px; /* Adds margin outside the container */\r\n        width: calc(100% - 30px); /* Ensures proper alignment if width is an issue */\r\n    }\r\n\r\n    .table {\r\n        margin-left: 0; /* Reset margin if necessary */\r\n    }\r\n    #formatCategory{\r\n        padding-left: 30px; /* Adds padding inside the container */\r\n        margin-left: 150px; /* Adds margin outside the container */\r\n        width: calc(100% - 30px); /* Ensures proper alignment if width is an issue */   \r\n    }\r\n</style>\r\n\r\n\r\n\r\n\r\n      <!------------------------------------- Coupon page Header -------------------------------------------------------->\r\n<div class=\"col-12 category\" id=\"formatCategory\">\r\n    <div class=\"search-container d-flex justify-content-between align-items-center gap-2 p-3\">\r\n        <div class=\"d-flex align-items-center gap-3\">\r\n            <h2 class=\"text-white mx-5\">\r\n                <%= title %>\r\n            </h2>\r\n            <form action=\"/admin/coupons\" method=\"get\" class=\"form d-flex align-items-center\">\r\n                <input type=\"text\" name=\"search\" placeholder=\"Search\" class=\"form-input form-control me-2\">\r\n                <input type=\"submit\" class=\"btn btn-primary\" value=\"Search\">\r\n            </form>\r\n        </div>\r\n        <button type=\"button\" class=\"btn btn-success\" data-bs-toggle=\"modal\" data-bs-target=\"#addCollection\">\r\n            Add Coupon\r\n        </button>\r\n    </div>\r\n</div>\r\n\r\n\r\n\r\n            <!----------------------------------------- category table --------------------------------------------------->\r\n            <div class=\"table-container\">\r\n                <table class=\"table\">\r\n                    <thead>\r\n                        <tr scope=\"row\" class=\"product-table-head\">\r\n                            <th scope=\"col\" class=\"product-table-first\">SL.No</th>\r\n                            <th scope=\"col\">Coupon Code</th>\r\n                            <th scope=\"col\">Discount Type</th>\r\n                            <th scope=\"col\">Discount Value</th>\r\n                            <th scope=\"col\">Coupon Usage Count</th>\r\n                            <th scope=\"col\">Min Amount</th>\r\n                            <th scope=\"col\">Start Date</th>\r\n                            <th scope=\"col\">End Date</th>\r\n                            <th scope=\"col\">Status</th>\r\n                            <th scope=\"col\" class=\"product-table-last\">Action</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        <% coupons.forEach((coupon, index)=> { %>\r\n                            <tr scope=\"row\">\r\n                                <td>\r\n                                    <%= index + 1 %>\r\n                                </td>\r\n                                <td>\r\n                                    <%= coupon.code %>\r\n                                </td>\r\n                                <td>\r\n                                    <%= coupon.discountType %>\r\n                                </td>\r\n                                <td>\r\n                                    <%= coupon.discountValue %>\r\n                                </td>\r\n                                <td>\r\n                                    <%= coupon.usageCount %>\r\n                                </td>\r\n                                <td>\r\n                                    <%= coupon.minimumOrderAmount %>\r\n                                </td>\r\n                                <td>\r\n                                    <%= new Date(coupon.startDate).toLocaleDateString() %>\r\n                                </td>\r\n                                <td>\r\n                                    <%= new Date(coupon.endDate).toLocaleDateString() %>\r\n                                </td>\r\n                                <td>\r\n                                    <%= coupon.isActive ? 'Active' : 'Blocked' %>\r\n                                </td>\r\n                                <td class=\"coupon-action\">\r\n                                    <a href=\"#\" id=\"edit-collection-modal\" data-bs-toggle=\"modal\"\r\n                                        data-bs-target=\"#editCollection\" onclick=\"editCoupon('<%= coupon.id %>')\"><i\r\n                                            class=\"bi bi-pencil-square\"></i></a>\r\n                                    <a href=\"/admin/statuscoupon?id=<%= coupon.id %>&status=<%= coupon.isActive %>\">\r\n                                        <i class=\"bi bi-x-circle m-2\"></i>\r\n                                    </a>\r\n                                    <a href=\"#\" onclick=\"confirmDelete('<%= coupon._id %>')\"><i\r\n                                            class=\"bi bi-trash3\"></i></a>\r\n                                </td>\r\n                            </tr>\r\n                            <% }) %>\r\n                    </tbody>\r\n                </table>\r\n        \r\n    <!------------------------------ Add Coupon Modal ---------------------------->\r\n\r\n  <!-- Add Coupon Modal -->\r\n<div class=\"modal fade\" id=\"addCollection\" tabindex=\"-1\" aria-labelledby=\"addCouponLabel\" aria-hidden=\"true\">\r\n    <div class=\"modal-dialog\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <h5 class=\"modal-title\" id=\"addCouponLabel\">Add Coupon</h5>\r\n                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n            </div>\r\n            <div class=\"modal-body\">\r\n                <form id=\"addCouponForm\">\r\n                    <!-- Coupon Code -->\r\n                    <div class=\"mb-3\">\r\n                        <label for=\"code\" class=\"form-label\">Coupon Code</label>\r\n                        <input type=\"text\" class=\"form-control\" id=\"code\" name=\"code\" required>\r\n                    </div>\r\n                    \r\n                    <!-- Discount Type -->\r\n                    <div class=\"mb-3\">\r\n                        <label for=\"discountType\" class=\"form-label\">Discount Type</label>\r\n                        <select class=\"form-control\" id=\"discountType\" name=\"discountType\" required>\r\n                            <option value=\"Percentage\">Percentage</option>\r\n                            <option value=\"Fixed\">Fixed</option>\r\n                        </select>\r\n                    </div>\r\n                    \r\n                    <!-- Discount Value -->\r\n                    <div class=\"mb-3\">\r\n                        <label for=\"discountValue\" class=\"form-label\">Discount Value</label>\r\n                        <input type=\"number\" class=\"form-control\" id=\"discountValue\" name=\"discountValue\" required>\r\n                    </div>\r\n                           <!--  Coupon Usage count -->\r\n                           <div class=\"mb-3\">\r\n                            <label for=\"usageCount\" class=\"form-label\">Coupon Usage Count</label>\r\n                            <input type=\"number\" class=\"form-control\" id=\"usageCount\" name=\"usageCount\" required>\r\n                        </div>\r\n                    \r\n                    <!-- Start Date -->\r\n                    <div class=\"mb-3\">\r\n                        <label for=\"startDate\" class=\"form-label\">Start Date</label>\r\n                        <input type=\"date\" class=\"form-control\" id=\"startDate\" name=\"startDate\" required>\r\n                    </div>\r\n                    \r\n                    <!-- End Date -->\r\n                    <div class=\"mb-3\">\r\n                        <label for=\"endDate\" class=\"form-label\">End Date</label>\r\n                        <input type=\"date\" class=\"form-control\" id=\"endDate\" name=\"endDate\" required>\r\n                    </div>\r\n                    \r\n                    <!-- Minimum Order Amount -->\r\n                    <div class=\"mb-3\">\r\n                        <label for=\"minimumOrderAmount\" class=\"form-label\">Minimum Order Amount</label>\r\n                        <input type=\"number\" class=\"form-control\" id=\"minimumOrderAmount\" name=\"minimumOrderAmount\" required>\r\n                    </div>\r\n\r\n                    <!-- Max Order Amount (conditionally shown) -->\r\n                    <div class=\"mb-3\" id=\"maxOrderAmountWrapper\" style=\"display: none;\">\r\n                        <label for=\"maxOrderAmount\" class=\"form-label\">Maximum Discount Amount</label>\r\n                        <input type=\"number\" class=\"form-control\" id=\"maxOrderAmount\" name=\"maxDiscountAmount\">\r\n                    </div>\r\n                   \r\n                    <!-- Submit Button -->\r\n                    <button type=\"submit\" class=\"btn\" style=\"background-color: #0a0df1;\">Add Coupon</button>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n    <!--------------------------- Edit Coupon Modal ---------------------------->\r\n\r\n  <!-- Edit Coupon Modal -->\r\n<div class=\"modal fade\" id=\"editCollection\" tabindex=\"-1\" aria-labelledby=\"editCouponLabel\" aria-hidden=\"true\">\r\n    <div class=\"modal-dialog\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <h5 class=\"modal-title\" id=\"editCouponLabel\">Edit Coupon</h5>\r\n                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n            </div>\r\n            <div class=\"modal-body\">\r\n                <form id=\"editCouponForm\">\r\n                    <input type=\"hidden\" id=\"editCouponId\" name=\"id\">\r\n                    \r\n                    <!-- Coupon Code -->\r\n                    <div class=\"mb-3\">\r\n                        <label for=\"editCode\" class=\"form-label\">Coupon Code</label>\r\n                        <input type=\"text\" class=\"form-control\" id=\"editCode\" name=\"code\" required>\r\n                    </div>\r\n                    \r\n                    <!-- Discount Type -->\r\n                    <div class=\"mb-3\">\r\n                        <label for=\"editDiscountType\" class=\"form-label\">Discount Type</label>\r\n                        <select class=\"form-control\" id=\"editDiscountType\" name=\"discountType\" required>\r\n                            <option value=\"Percentage\">Percentage</option>\r\n                            <option value=\"Fixed\">Fixed</option>\r\n                        </select>\r\n                    </div>\r\n\r\n                    <!-- Discount Value -->\r\n                    <div class=\"mb-3\">\r\n                        <label for=\"editDiscountValue\" class=\"form-label\">Discount Value</label>\r\n                        <input type=\"number\" class=\"form-control\" id=\"editDiscountValue\" name=\"discountValue\" required>\r\n                    </div>\r\n                        <!--  Coupon Usage count -->\r\n                        <div class=\"mb-3\">\r\n                            <label for=\"editusageCount\" class=\"form-label\">Coupon Usage Count</label>\r\n                            <input type=\"number\" class=\"form-control\" id=\"editusageCount\" name=\"usageCount\" required>\r\n                        </div>\r\n\r\n                    <!-- Start Date -->\r\n                    <div class=\"mb-3\">\r\n                        <label for=\"editStartDate\" class=\"form-label\">Start Date</label>\r\n                        <input type=\"date\" class=\"form-control\" id=\"editStartDate\" name=\"startDate\" required>\r\n                    </div>\r\n\r\n                    <!-- End Date -->\r\n                    <div class=\"mb-3\">\r\n                        <label for=\"editEndDate\" class=\"form-label\">End Date</label>\r\n                        <input type=\"date\" class=\"form-control\" id=\"editEndDate\" name=\"endDate\" required>\r\n                    </div>\r\n\r\n                    <!-- Minimum Order Amount -->\r\n                    <div class=\"mb-3\">\r\n                        <label for=\"editMinimumOrderAmount\" class=\"form-label\">Minimum Order Amount</label>\r\n                        <input type=\"number\" class=\"form-control\" id=\"editMinimumOrderAmount\" name=\"minimumOrderAmount\" required>\r\n                    </div>\r\n\r\n                    <!-- Max Order Amount (conditionally shown) -->\r\n                    <div class=\"mb-3\" id=\"editMaxOrderAmountWrapper\" style=\"display: none;\">\r\n                        <label for=\"editMaxOrderAmount\" class=\"form-label\">Maximum Discount Amount</label>\r\n                        <input type=\"number\" class=\"form-control\" id=\"editMaxOrderAmount\" name=\"maxDiscountAmount\">\r\n                    </div>\r\n\r\n                    <!-- Submit Button -->\r\n                    <button type=\"submit\" class=\"btn btn-primary\">Update Coupon</button>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<!------------------------------------------------pagination-------------------------------------------------------->\r\n  <!-- Pagination -->\r\n  <div class=\"pagination\">\r\n    <% if (currentPage > 1) { %>\r\n        <a href=\"/admin/coupons?page=<%= currentPage - 1 %>&search=<%= search %>\">Prev</a>\r\n    <% } %>\r\n    \r\n    <% for (let i = 1; i <= totalPages; i++) { %>\r\n        <a href=\"/admin/coupons?page=<%= i %>&search=<%= search %>\" class=\"<%= currentPage === i ? 'active' : '' %>\"><%= i %></a>\r\n    <% } %>\r\n    \r\n    <% if (currentPage < totalPages) { %>\r\n        <a href=\"/admin/coupons?page=<%= currentPage + 1 %>&search=<%= search %>\">Next</a>\r\n    <% } %>\r\n</div>\r\n\r\n\r\n        <script>\r\n            //--------------------------- Add Coupon ---------------------------\r\n            // For Add Coupon Modal\r\ndocument.getElementById('discountType').addEventListener('change', function() {\r\n    var discountType = this.value;\r\n    var maxOrderAmountWrapper = document.getElementById('maxOrderAmountWrapper');\r\n    if (discountType === 'Percentage') {\r\n        maxOrderAmountWrapper.style.display = 'block';  // Show the Max Order Amount field\r\n    } else {\r\n        maxOrderAmountWrapper.style.display = 'none';   // Hide the Max Order Amount field\r\n    }\r\n});\r\n\r\n// For Edit Coupon Modal\r\ndocument.getElementById('editDiscountType').addEventListener('change', function() {\r\n    var discountType = this.value;\r\n    var editMaxOrderAmountWrapper = document.getElementById('editMaxOrderAmountWrapper');\r\n    if (discountType === 'Percentage') {\r\n        editMaxOrderAmountWrapper.style.display = 'block';  // Show the Max Order Amount field\r\n    } else {\r\n        editMaxOrderAmountWrapper.style.display = 'none';   // Hide the Max Order Amount field\r\n    }\r\n});\r\n\r\ndocument.getElementById('addCouponForm').addEventListener('submit', async function (e) {\r\n    e.preventDefault();\r\n\r\n    // Validation Logic\r\n    const code = document.getElementById('code').value.trim();\r\n    const discountValue = document.getElementById('discountValue').value.trim();\r\n    const usageCount = document.getElementById('usageCount').value.trim();\r\n    const startDate = new Date(document.getElementById('startDate').value);\r\n    const endDate = new Date(document.getElementById('endDate').value);\r\n    const currentDate = new Date();\r\n    const minimumOrderAmount = document.getElementById('minimumOrderAmount').value.trim();\r\n    \r\n    // Validation for Coupon Code\r\n    if (!code || code.length < 8) {\r\n        Swal.fire({\r\n            icon: 'error',\r\n            title: 'Error',\r\n            text: 'Coupon Code must be at least 8 characters long.',\r\n        });\r\n        return;\r\n    }\r\n    if (/[^a-zA-Z0-9]/.test(code)) {\r\n        Swal.fire({\r\n            icon: 'error',\r\n            title: 'Error',\r\n            text: 'Coupon Code must contain only alphabets and numbers.',\r\n        });\r\n        return;\r\n    }\r\n\r\n    // Validation for Discount Value (Fixed)\r\n    const discountType = document.getElementById('discountType').value;\r\n    if (discountType === 'Fixed') {\r\n        if (discountValue < 1 || discountValue > 100) {\r\n            Swal.fire({\r\n                icon: 'error',\r\n                title: 'Error',\r\n                text: 'Discount Value for Fixed must be between 1 and 100.',\r\n            });\r\n            return;\r\n        }\r\n    }\r\n\r\n    // Validation for Usage Count\r\n    if (usageCount < 1 || usageCount > 10) {\r\n        Swal.fire({\r\n            icon: 'error',\r\n            title: 'Error',\r\n            text: 'Coupon Usage Count must be between 1 and 10.',\r\n        });\r\n        return;\r\n    }\r\n\r\n    // Validation for Start Date - must be today or any date after today\r\n    const today = currentDate.setHours(0, 0, 0, 0); // Set to midnight\r\n    if (startDate < today) {\r\n        Swal.fire({\r\n            icon: 'error',\r\n            title: 'Error',\r\n            text: 'Start Date must be today or a date after today.',\r\n        });\r\n        return;\r\n    }\r\n\r\n    // Validation for End Date\r\n    const endDates = new Date(document.getElementById('endDate').value);\r\n    if (endDates <= startDate) {\r\n        Swal.fire({\r\n            icon: 'error',\r\n            title: 'Error',\r\n            text: 'End Date must be later than Start Date.',\r\n        });\r\n        return;\r\n    }\r\n\r\n    // Validation for Minimum Order Amount\r\n    if (minimumOrderAmount.length === 0 || minimumOrderAmount <= 0) {\r\n        Swal.fire({\r\n            icon: 'error',\r\n            title: 'Error',\r\n            text: 'Minimum Order Amount is required and should be greater than 0.',\r\n        });\r\n        return;\r\n    }\r\n\r\n    // If all validations pass, proceed with form submission\r\n    const formData = new FormData(this);\r\n    const data = Object.fromEntries(formData.entries());\r\n\r\n    try {\r\n        const response = await fetch('/admin/addcoupon', {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n            },\r\n            body: JSON.stringify(data),\r\n        });\r\n        const result = await response.json();\r\n        if (response.ok) {\r\n            Swal.fire({\r\n                icon: 'success',\r\n                title: 'Success',\r\n                text: result.message,\r\n            }).then(() => {\r\n                this.reset();\r\n                location.reload();\r\n            });\r\n        } else {\r\n            Swal.fire({\r\n                icon: 'error',\r\n                title: 'Error',\r\n                text: result.message,\r\n            });\r\n        }\r\n    } catch (error) {\r\n        console.error('Error:', error);\r\n        Swal.fire({\r\n            icon: 'error',\r\n            title: 'Error',\r\n            text: 'An error occurred while adding the coupon.',\r\n        });\r\n    }\r\n});\r\n\r\n            //--------------------------- Edit coupon ---------------------------\r\n\r\n            document.addEventListener('DOMContentLoaded', function () {\r\n                var editCouponModal = new bootstrap.Modal(document.getElementById('editCollection'));\r\n                document.getElementById('editCouponForm').addEventListener('submit', async (event) => {\r\n                    event.preventDefault();\r\n                    const formData = new FormData(event.target);\r\n                    const data = Object.fromEntries(formData.entries());\r\n                    data.id = document.getElementById('editCouponId').value;\r\n                    try {\r\n                        const response = await fetch(`/admin/editcoupon/${data.id}`, {\r\n                            method: 'POST',\r\n                            headers: { 'Content-Type': 'application/json' },\r\n                            body: JSON.stringify(data),\r\n                        });\r\n                        const result = await response.json();\r\n                        Swal.fire({\r\n                            title: 'Coupon Updated Successfully',\r\n                            text: result.message,\r\n                            icon: 'success',\r\n                            confirmButtonText: 'OK'\r\n                        }).then(() => {\r\n                            window.location.reload();\r\n                        });\r\n                    } catch (error) {\r\n                        console.error('Error:', error);\r\n                        Swal.fire({\r\n                            title: 'Error',\r\n                            text: 'Failed to update coupon.',\r\n                            icon: 'error',\r\n                            confirmButtonText: 'OK'\r\n                        });\r\n                    }\r\n                });\r\n\r\n                window.editCoupon = function (id) {\r\n                    fetch(`/admin/coupons/${id}`)\r\n                        .then(response => {\r\n                            if (!response.ok) {\r\n                                throw new Error('Network response was not ok');\r\n                            }\r\n                            return response.json();\r\n                        })\r\n                        .then(coupon => {\r\n                            document.getElementById('editCouponId').value = coupon._id;\r\n                            document.getElementById('editCode').value = coupon.code;\r\n                            document.getElementById('editDiscountType').value = coupon.discountType;\r\n                            document.getElementById('editDiscountValue').value = coupon.discountValue;\r\n                            document.getElementById('editusageCount').value = coupon.usageCount;\r\n                            document.getElementById('editStartDate').value = new Date(coupon.startDate).toISOString().split('T')[0];\r\n                            document.getElementById('editEndDate').value = new Date(coupon.endDate).toISOString().split('T')[0];\r\n                            document.getElementById('editMinimumOrderAmount').value = coupon.minimumOrderAmount;\r\n                            editCouponModal.show();\r\n                        })\r\n                        .catch(error => {\r\n                            console.error('Error fetching coupon data:', error);\r\n                            Swal.fire({\r\n                                title: 'Error',\r\n                                text: 'Failed to load coupon data.',\r\n                                icon: 'error',\r\n                                confirmButtonText: 'OK'\r\n                            });\r\n                        });\r\n                };\r\n            });\r\n\r\n            //--------------------------- Sweet delete ---------------------------\r\n\r\n            async function confirmDelete(id) {\r\n                const confirmResult = await Swal.fire({\r\n                    title: 'Are you sure?',\r\n                    text: 'You are about to delete this coupon. This action cannot be undone.',\r\n                    icon: 'warning',\r\n                    showCancelButton: true,\r\n                    confirmButtonColor: '#3085d6',\r\n                    cancelButtonColor: '#d33',\r\n                    confirmButtonText: 'Yes, delete it!'\r\n                });\r\n                if (confirmResult.isConfirmed) {\r\n                    deleteCoupon(id);\r\n                }\r\n            }\r\n\r\n            //--------------------------- Delete Coupon ---------------------------\r\n\r\n            async function deleteCoupon(id) {\r\n                try {\r\n                    const response = await fetch(`/admin/deletecoupon/${id}`, {\r\n                        method: 'DELETE',\r\n                        headers: { 'Content-Type': 'application/json' }\r\n                    });\r\n                    const result = await response.json();\r\n                    Swal.fire({\r\n                        title: 'Delete Coupon',\r\n                        text: result.message,\r\n                        icon: 'success',\r\n                        confirmButtonText: 'OK'\r\n                    }).then(() => {\r\n                        window.location.reload();\r\n                    });\r\n                } catch (error) {\r\n                    Swal.fire({\r\n                        title: 'Error',\r\n                        text: 'Error deleting coupon',\r\n                        icon: 'error',\r\n                        confirmButtonText: 'OK'\r\n                    });\r\n                }\r\n            }\r\n\r\n        </script>\r\n\r\n\r\n      "
        }
    ]
}