{
    "sourceFile": "views/admin/products.ejs",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 19,
            "patches": [
                {
                    "date": 1736326078955,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1736326087149,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -4,9 +4,9 @@\n     <%- include('sidebar') %>\r\n  \r\n  \r\n      <!-- Navbar  -->\r\n-    <div class=\"fixed top-0 left-0 right-0 z-10 flex items-center justify-between p-8 h-20 shadow-md ml-64 bg-gray-100\">\r\n+    <div class=\"fixed top- left-0 right-0 z-10 flex items-center justify-between p-8 h-20 shadow-md ml-64 bg-gray-100\">\r\n      <div>\r\n          <h2 class=\"text-lg font-semibold\">Products</h2>\r\n      </div>\r\n      <div>\r\n"
                },
                {
                    "date": 1736326092376,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,272 @@\n+\r\n+\r\n+    <!-- include the sidebar partial  -->\r\n+    <%- include('sidebar') %>\r\n+ \r\n+ \r\n+     <!-- Navbar  -->\r\n+    <div class=\"fixed top- left-0 right-0 z-10 flex items-center justify-between p-8 h-20 shadow-md ml-64 bg-gray-100\">\r\n+     <div>\r\n+         <h2 class=\"text-lg font-semibold\">Products</h2>\r\n+     </div>\r\n+     <div>\r\n+         <form action=\"/admin/users\" method=\"GET\">\r\n+             <input type=\"text\" name=\"search\" placeholder=\"Search\" class=\"p-2 w-[500px] h-10 rounded bg-gray-200\">\r\n+         </form>\r\n+     </div>\r\n+   </div>\r\n+ \r\n+    <div class=\" pt-24 pb-16\">\r\n+      \r\n+ \r\n+      <!-- Add Product button  -->\r\n+ \r\n+      <div>\r\n+         <a href=\"/admin/addproduct\"><button id=\"add-product-btn\" class=\"absolute right-8 px-4 py-2 bg-blue-800 text-white text-sm tracking-wider font-medium rounded hover:bg-blue-900\">Add New Product</button></a>\r\n+       </div>\r\n+ \r\n+     <!-- Table  -->\r\n+ \r\n+     <div class=\"font-sans overflow-x-auto ml-8 mr-8 mt-12\">\r\n+         <table class=\"min-w-full bg-white\">\r\n+             <thead class=\" bg-gray-200 whitespace-nowrap\">\r\n+                 <tr>\r\n+                     <th class=\"p-4 text-left text-xs font-bold text-gray-800 w-[3%]\">\r\n+                         SI\r\n+                     </th>\r\n+                     <th class=\"p-4 text-left text-xs font-bold w-[15%]\">\r\n+                         Product Name\r\n+                     </th>\r\n+                     <th class=\"p-4 text-left text-xs font-bold w-[11%]\">\r\n+                         Category\r\n+                     </th>\r\n+                    \r\n+                     <th class=\"p-4 text-left text-xs font-bold w-[10%]\">\r\n+                         Stock\r\n+                     </th>\r\n+                    \r\n+                     <th class=\"p-4 text-left text-xs font-bold w-[10%]\">\r\n+                         Price\r\n+                     </th>\r\n+                     <th class=\"p-4 text-left text-xs font-bold w-[10%]\">\r\n+                        Discount\r\n+                    </th>\r\n+                    <th class=\"p-4 text-left text-xs font-bold w-[10%]\">\r\n+                        Final Price\r\n+                    </th>\r\n+                     <th class=\"p-4 text-center text-xs font-bold w-[10%]\">\r\n+                         Action\r\n+                     </th>\r\n+                 </tr>\r\n+             </thead>\r\n+ \r\n+             <tbody class=\"whitespace-nowrap\">\r\n+ \r\n+                 <% products.forEach((product, index) => { %>\r\n+ \r\n+                     <tr class=\"hover:bg-gray-50\">\r\n+                         <td class=\"p-4 text-[15px] font-semibold text-gray-800\">\r\n+                             <%= ((currentPage - 1) * limit) + index + 1 %>\r\n+                         </td>\r\n+                         <td class=\"p-4 text-[15px] font-semibold text-gray-800\">\r\n+                             <%= product.name %>\r\n+                         </td>\r\n+                         <td class=\"p-4 text-[15px] font-semibold text-gray-800\">\r\n+                             <%= product.category.name %>\r\n+                         </td>\r\n+                        \r\n+                        \r\n+                         <td class=\"p-4 text-[15px] font-semibold text-gray-800\">\r\n+                             <%= product.stock %>\r\n+                         </td>\r\n+                         <td class=\"p-4 text-[15px] font-semibold text-gray-800\">\r\n+ \r\n+                           <span>&#8377;</span><%= product.price %>\r\n+                         </td>\r\n+                         <td class=\"p-4 text-[15px] font-semibold text-gray-800\">\r\n+                            <%= product.discount %>\r\n+                        </td>\r\n+                         <td class=\"p-4 text-[15px] font-semibold text-gray-800\">\r\n+ \r\n+                            <span>&#8377;</span><%= product.finalPrice %>\r\n+                          </td>\r\n+                         <td class=\"p-4 text-[15px] text-center font-semibold text-gray-800\">\r\n+                             \r\n+                              <!-- Block Unblock Button -->\r\n+                <button type=\"button\"\r\n+                class=\"block-unblock-btn w-[100px] px-4 py-2 rounded-lg text-white text-sm tracking-wider font-medium border border-current outline-none bg-<%= product.isActive ? 'orange-700' : 'green-700' %> hover:bg-<%= product.isActive ? 'orange-800' : 'green-800' %> active:bg-<%= product.isActive ? 'orange-700' : 'green-700' %>\"\r\n+                data-product-id=\"<%= product.id %>\"\r\n+                data-active=\"<%= product.isActive %>\">\r\n+                <%= product.isActive ? 'Block' : 'Unblock' %>\r\n+            </button>\r\n+ \r\n+                             <!-- Edit Button  -->\r\n+                              <a href=\"/admin/updateproduct/<%= product.id %>\">\r\n+                                 <button type=\"button\"\r\n+                                 class=\"edit-product-btn w-[100px] px-4 py-2  text-white rounded-lg text-sm tracking-wider font-medium border border-current outline-none hover:bg-gray-600 bg-gray-500\">\r\n+                                 Edit\r\n+                             </button>\r\n+                              </a>\r\n+                         </td>\r\n+                     </tr>\r\n+                     <% }) %>\r\n+                 \r\n+             </tbody>\r\n+         </table>\r\n+ \r\n+         <div class=\"mt-6 flex justify-between items-center px-8\">\r\n+             <!-- Previous Button -->\r\n+             <% if (currentPage > 1) { %>\r\n+               <a href=\"?page=<%= currentPage - 1 %>&limit=<%= limit %>\" class=\"px-4 py-2 bg-gray-300 text-sm rounded hover:bg-gray-400\">Previous</a>\r\n+             <% } else { %>\r\n+               <span class=\"px-4 py-2 bg-gray-300 text-sm rounded opacity-50\">Previous</span>\r\n+             <% } %>\r\n+           \r\n+             <!-- Page Numbers -->\r\n+             <div class=\"flex space-x-2\">\r\n+               <% for (let i = 1; i <= totalPages; i++) { %>\r\n+                 <% if (i === currentPage) { %>\r\n+                   <span class=\"px-4 py-2 bg-blue-500 text-white text-sm rounded\"><%= i %></span>\r\n+                 <% } else { %>\r\n+                   <a href=\"?page=<%= i %>&limit=<%= limit %>\" class=\"px-4 py-2 bg-gray-300 text-sm rounded hover:bg-gray-400\"><%= i %></a>\r\n+                 <% } %>\r\n+               <% } %>\r\n+             </div>\r\n+           \r\n+             <!-- Next Button -->\r\n+             <% if (currentPage < totalPages) { %>\r\n+               <a href=\"?page=<%= currentPage + 1 %>&limit=<%= limit %>\" class=\"px-4 py-2 bg-gray-300 text-sm rounded hover:bg-gray-400\">Next</a>\r\n+             <% } else { %>\r\n+               <span class=\"px-4 py-2 bg-gray-300 text-sm rounded opacity-50\">Next</span>\r\n+             <% } %>\r\n+           </div>\r\n+ \r\n+     </div>\r\n+ \r\n+       \r\n+       \r\n+    </div>\r\n+ \r\n+ \r\n+        <!--Block Unblock Modal -->\r\n+ <div id=\"confirmation-modal\" class=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-50\">\r\n+     <div class=\"bg-white p-8 rounded-lg shadow-lg w-[400px]\">\r\n+       <h2 class=\"text-xl font-semibold mb-4\">Confirm Action</h2>\r\n+       <p id=\"modal-message\" class=\"mb-6 text-gray-700\">Are you sure you want to proceed?</p>\r\n+       <div class=\"flex justify-end space-x-4\">\r\n+         <button id=\"cancel-btn\" class=\"px-4 py-2 bg-gray-300 rounded-lg hover:bg-gray-400\">Cancel</button>\r\n+         <button id=\"confirm-btn\" class=\"px-4 py-2 bg-black text-white rounded-lg hover:bg-gray-900\">Confirm</button>\r\n+       </div>\r\n+     </div>\r\n+   </div>\r\n+ \r\n+    \r\n+   <script>\r\n+ \r\n+ document.querySelectorAll('.pagination-link').forEach(link => {\r\n+     link.addEventListener('click', async (event) => {\r\n+       event.preventDefault();\r\n+       const url = event.target.href;\r\n+ \r\n+       try {\r\n+         const response = await fetch(url);\r\n+         const html = await response.text();\r\n+ \r\n+         // Replace the table and pagination controls with the new content\r\n+         const parser = new DOMParser();\r\n+         const doc = parser.parseFromString(html, 'text/html');\r\n+         const newTable = doc.querySelector('table');\r\n+         const newPagination = doc.querySelector('.pagination-controls');\r\n+ \r\n+         document.querySelector('table').innerHTML = newTable.innerHTML;\r\n+         document.querySelector('.pagination-controls').innerHTML = newPagination.innerHTML;\r\n+       } catch (error) {\r\n+         console.error('Error fetching new page:', error);\r\n+       }\r\n+     });\r\n+   });\r\n+   \r\n+// Handle Block Unblock\r\n+document.querySelectorAll('.block-unblock-btn').forEach(button => {\r\n+    button.addEventListener('click', (event) => {\r\n+        const productId = event.target.getAttribute('data-product-id');\r\n+        const isActive = event.target.getAttribute('data-active') === 'true';\r\n+        const modalMessage = document.getElementById('modal-message');\r\n+\r\n+        // Show confirmation modal\r\n+        const modal = document.getElementById('confirmation-modal');\r\n+        modal.classList.remove('hidden');\r\n+\r\n+        // Set the modal message dynamically\r\n+        modalMessage.textContent = isActive\r\n+            ? 'Are you sure you want to block this product?'\r\n+            : 'Are you sure you want to unblock this product?';\r\n+\r\n+        // Handle modal cancel button\r\n+        document.getElementById('cancel-btn').addEventListener('click', () => {\r\n+            modal.classList.add('hidden');\r\n+        });\r\n+\r\n+        // Handle modal confirm button\r\n+        document.getElementById('confirm-btn').onclick = async function () {\r\n+            try {\r\n+                const response = await fetch(`/admin/products/${productId}/block`, {\r\n+                    method: 'POST',\r\n+                    headers: {\r\n+                        'Content-Type': 'application/json'\r\n+                    },\r\n+                    body: JSON.stringify({ active: !isActive }) // Send updated active status to the server\r\n+                });\r\n+\r\n+                if (response.ok) {\r\n+                    // Update the new active status dynamically\r\n+                    const newIsActive = !isActive;\r\n+\r\n+                    // Update button text and attributes\r\n+                    event.target.textContent = newIsActive ? 'Block' : 'Unblock';\r\n+                    event.target.setAttribute('data-active', newIsActive);\r\n+\r\n+                    // Update the button color\r\n+                    event.target.classList.toggle('bg-green-700', !newIsActive);\r\n+                    event.target.classList.toggle('bg-orange-700', newIsActive);\r\n+                    event.target.classList.toggle('hover:bg-green-800', !newIsActive);\r\n+                    event.target.classList.toggle('hover:bg-orange-800', newIsActive);\r\n+\r\n+                    // Close the confirmation modal\r\n+                    modal.classList.add('hidden');\r\n+                } else {\r\n+                    console.error('Failed to block/unblock product');\r\n+                }\r\n+            } catch (error) {\r\n+                console.error('Error:', error);\r\n+            }\r\n+        };\r\n+    });\r\n+});\r\n+\r\n+\r\n+ \r\n+   </script>\r\n+ \r\n+\r\n+ \r\n+    <!-- JavaScript Libraries(needed)-->\r\n+    <script src=\"https://code.jquery.com/jquery-3.4.1.min.js\"></script>\r\n+    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js\"></script>\r\n+     <!-- Cropper JS -->\r\n+     <link href=\"https://unpkg.com/cropperjs/dist/cropper.min.css\" rel=\"stylesheet\">\r\n+ \r\n+     <!-- Toastify  -->\r\n+     <link rel=\"stylesheet\" type=\"text/css\" href=\"https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css\">\r\n+        <!-- Tailwind CSS Script -->\r\n+        <script src=\"https://cdn.tailwindcss.com\"></script>\r\n+ \r\n+        <!-- SweetAlert -->\r\n+        <script src=\"https://cdn.jsdelivr.net/npm/sweetalert2@11\"></script>\r\n+    \r\n+        <!-- Cropper JS -->\r\n+        <script src=\"https://unpkg.com/cropperjs/dist/cropper.min.js\"></script> \r\n+    \r\n+        <!-- Toastify  -->\r\n+        <script type=\"text/javascript\" src=\"https://cdn.jsdelivr.net/npm/toastify-js\"></script>\r\n+ </div>\n\\ No newline at end of file\n"
                },
                {
                    "date": 1736326103297,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,272 @@\n+\r\n+\r\n+    <!-- include the sidebar partial  -->\r\n+    <%- include('sidebar') %>\r\n+ \r\n+ \r\n+     <!-- Navbar  -->\r\n+    <div class=\"fixed top-0 left-10 right-0 z-10 flex items-center justify-between p-8 h-20 shadow-md ml-64 bg-gray-100\">\r\n+     <div>\r\n+         <h2 class=\"text-lg font-semibold\">Products</h2>\r\n+     </div>\r\n+     <div>\r\n+         <form action=\"/admin/users\" method=\"GET\">\r\n+             <input type=\"text\" name=\"search\" placeholder=\"Search\" class=\"p-2 w-[500px] h-10 rounded bg-gray-200\">\r\n+         </form>\r\n+     </div>\r\n+   </div>\r\n+ \r\n+    <div class=\" pt-24 pb-16\">\r\n+      \r\n+ \r\n+      <!-- Add Product button  -->\r\n+ \r\n+      <div>\r\n+         <a href=\"/admin/addproduct\"><button id=\"add-product-btn\" class=\"absolute right-8 px-4 py-2 bg-blue-800 text-white text-sm tracking-wider font-medium rounded hover:bg-blue-900\">Add New Product</button></a>\r\n+       </div>\r\n+ \r\n+     <!-- Table  -->\r\n+ \r\n+     <div class=\"font-sans overflow-x-auto ml-8 mr-8 mt-12\">\r\n+         <table class=\"min-w-full bg-white\">\r\n+             <thead class=\" bg-gray-200 whitespace-nowrap\">\r\n+                 <tr>\r\n+                     <th class=\"p-4 text-left text-xs font-bold text-gray-800 w-[3%]\">\r\n+                         SI\r\n+                     </th>\r\n+                     <th class=\"p-4 text-left text-xs font-bold w-[15%]\">\r\n+                         Product Name\r\n+                     </th>\r\n+                     <th class=\"p-4 text-left text-xs font-bold w-[11%]\">\r\n+                         Category\r\n+                     </th>\r\n+                    \r\n+                     <th class=\"p-4 text-left text-xs font-bold w-[10%]\">\r\n+                         Stock\r\n+                     </th>\r\n+                    \r\n+                     <th class=\"p-4 text-left text-xs font-bold w-[10%]\">\r\n+                         Price\r\n+                     </th>\r\n+                     <th class=\"p-4 text-left text-xs font-bold w-[10%]\">\r\n+                        Discount\r\n+                    </th>\r\n+                    <th class=\"p-4 text-left text-xs font-bold w-[10%]\">\r\n+                        Final Price\r\n+                    </th>\r\n+                     <th class=\"p-4 text-center text-xs font-bold w-[10%]\">\r\n+                         Action\r\n+                     </th>\r\n+                 </tr>\r\n+             </thead>\r\n+ \r\n+             <tbody class=\"whitespace-nowrap\">\r\n+ \r\n+                 <% products.forEach((product, index) => { %>\r\n+ \r\n+                     <tr class=\"hover:bg-gray-50\">\r\n+                         <td class=\"p-4 text-[15px] font-semibold text-gray-800\">\r\n+                             <%= ((currentPage - 1) * limit) + index + 1 %>\r\n+                         </td>\r\n+                         <td class=\"p-4 text-[15px] font-semibold text-gray-800\">\r\n+                             <%= product.name %>\r\n+                         </td>\r\n+                         <td class=\"p-4 text-[15px] font-semibold text-gray-800\">\r\n+                             <%= product.category.name %>\r\n+                         </td>\r\n+                        \r\n+                        \r\n+                         <td class=\"p-4 text-[15px] font-semibold text-gray-800\">\r\n+                             <%= product.stock %>\r\n+                         </td>\r\n+                         <td class=\"p-4 text-[15px] font-semibold text-gray-800\">\r\n+ \r\n+                           <span>&#8377;</span><%= product.price %>\r\n+                         </td>\r\n+                         <td class=\"p-4 text-[15px] font-semibold text-gray-800\">\r\n+                            <%= product.discount %>\r\n+                        </td>\r\n+                         <td class=\"p-4 text-[15px] font-semibold text-gray-800\">\r\n+ \r\n+                            <span>&#8377;</span><%= product.finalPrice %>\r\n+                          </td>\r\n+                         <td class=\"p-4 text-[15px] text-center font-semibold text-gray-800\">\r\n+                             \r\n+                              <!-- Block Unblock Button -->\r\n+                <button type=\"button\"\r\n+                class=\"block-unblock-btn w-[100px] px-4 py-2 rounded-lg text-white text-sm tracking-wider font-medium border border-current outline-none bg-<%= product.isActive ? 'orange-700' : 'green-700' %> hover:bg-<%= product.isActive ? 'orange-800' : 'green-800' %> active:bg-<%= product.isActive ? 'orange-700' : 'green-700' %>\"\r\n+                data-product-id=\"<%= product.id %>\"\r\n+                data-active=\"<%= product.isActive %>\">\r\n+                <%= product.isActive ? 'Block' : 'Unblock' %>\r\n+            </button>\r\n+ \r\n+                             <!-- Edit Button  -->\r\n+                              <a href=\"/admin/updateproduct/<%= product.id %>\">\r\n+                                 <button type=\"button\"\r\n+                                 class=\"edit-product-btn w-[100px] px-4 py-2  text-white rounded-lg text-sm tracking-wider font-medium border border-current outline-none hover:bg-gray-600 bg-gray-500\">\r\n+                                 Edit\r\n+                             </button>\r\n+                              </a>\r\n+                         </td>\r\n+                     </tr>\r\n+                     <% }) %>\r\n+                 \r\n+             </tbody>\r\n+         </table>\r\n+ \r\n+         <div class=\"mt-6 flex justify-between items-center px-8\">\r\n+             <!-- Previous Button -->\r\n+             <% if (currentPage > 1) { %>\r\n+               <a href=\"?page=<%= currentPage - 1 %>&limit=<%= limit %>\" class=\"px-4 py-2 bg-gray-300 text-sm rounded hover:bg-gray-400\">Previous</a>\r\n+             <% } else { %>\r\n+               <span class=\"px-4 py-2 bg-gray-300 text-sm rounded opacity-50\">Previous</span>\r\n+             <% } %>\r\n+           \r\n+             <!-- Page Numbers -->\r\n+             <div class=\"flex space-x-2\">\r\n+               <% for (let i = 1; i <= totalPages; i++) { %>\r\n+                 <% if (i === currentPage) { %>\r\n+                   <span class=\"px-4 py-2 bg-blue-500 text-white text-sm rounded\"><%= i %></span>\r\n+                 <% } else { %>\r\n+                   <a href=\"?page=<%= i %>&limit=<%= limit %>\" class=\"px-4 py-2 bg-gray-300 text-sm rounded hover:bg-gray-400\"><%= i %></a>\r\n+                 <% } %>\r\n+               <% } %>\r\n+             </div>\r\n+           \r\n+             <!-- Next Button -->\r\n+             <% if (currentPage < totalPages) { %>\r\n+               <a href=\"?page=<%= currentPage + 1 %>&limit=<%= limit %>\" class=\"px-4 py-2 bg-gray-300 text-sm rounded hover:bg-gray-400\">Next</a>\r\n+             <% } else { %>\r\n+               <span class=\"px-4 py-2 bg-gray-300 text-sm rounded opacity-50\">Next</span>\r\n+             <% } %>\r\n+           </div>\r\n+ \r\n+     </div>\r\n+ \r\n+       \r\n+       \r\n+    </div>\r\n+ \r\n+ \r\n+        <!--Block Unblock Modal -->\r\n+ <div id=\"confirmation-modal\" class=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-50\">\r\n+     <div class=\"bg-white p-8 rounded-lg shadow-lg w-[400px]\">\r\n+       <h2 class=\"text-xl font-semibold mb-4\">Confirm Action</h2>\r\n+       <p id=\"modal-message\" class=\"mb-6 text-gray-700\">Are you sure you want to proceed?</p>\r\n+       <div class=\"flex justify-end space-x-4\">\r\n+         <button id=\"cancel-btn\" class=\"px-4 py-2 bg-gray-300 rounded-lg hover:bg-gray-400\">Cancel</button>\r\n+         <button id=\"confirm-btn\" class=\"px-4 py-2 bg-black text-white rounded-lg hover:bg-gray-900\">Confirm</button>\r\n+       </div>\r\n+     </div>\r\n+   </div>\r\n+ \r\n+    \r\n+   <script>\r\n+ \r\n+ document.querySelectorAll('.pagination-link').forEach(link => {\r\n+     link.addEventListener('click', async (event) => {\r\n+       event.preventDefault();\r\n+       const url = event.target.href;\r\n+ \r\n+       try {\r\n+         const response = await fetch(url);\r\n+         const html = await response.text();\r\n+ \r\n+         // Replace the table and pagination controls with the new content\r\n+         const parser = new DOMParser();\r\n+         const doc = parser.parseFromString(html, 'text/html');\r\n+         const newTable = doc.querySelector('table');\r\n+         const newPagination = doc.querySelector('.pagination-controls');\r\n+ \r\n+         document.querySelector('table').innerHTML = newTable.innerHTML;\r\n+         document.querySelector('.pagination-controls').innerHTML = newPagination.innerHTML;\r\n+       } catch (error) {\r\n+         console.error('Error fetching new page:', error);\r\n+       }\r\n+     });\r\n+   });\r\n+   \r\n+// Handle Block Unblock\r\n+document.querySelectorAll('.block-unblock-btn').forEach(button => {\r\n+    button.addEventListener('click', (event) => {\r\n+        const productId = event.target.getAttribute('data-product-id');\r\n+        const isActive = event.target.getAttribute('data-active') === 'true';\r\n+        const modalMessage = document.getElementById('modal-message');\r\n+\r\n+        // Show confirmation modal\r\n+        const modal = document.getElementById('confirmation-modal');\r\n+        modal.classList.remove('hidden');\r\n+\r\n+        // Set the modal message dynamically\r\n+        modalMessage.textContent = isActive\r\n+            ? 'Are you sure you want to block this product?'\r\n+            : 'Are you sure you want to unblock this product?';\r\n+\r\n+        // Handle modal cancel button\r\n+        document.getElementById('cancel-btn').addEventListener('click', () => {\r\n+            modal.classList.add('hidden');\r\n+        });\r\n+\r\n+        // Handle modal confirm button\r\n+        document.getElementById('confirm-btn').onclick = async function () {\r\n+            try {\r\n+                const response = await fetch(`/admin/products/${productId}/block`, {\r\n+                    method: 'POST',\r\n+                    headers: {\r\n+                        'Content-Type': 'application/json'\r\n+                    },\r\n+                    body: JSON.stringify({ active: !isActive }) // Send updated active status to the server\r\n+                });\r\n+\r\n+                if (response.ok) {\r\n+                    // Update the new active status dynamically\r\n+                    const newIsActive = !isActive;\r\n+\r\n+                    // Update button text and attributes\r\n+                    event.target.textContent = newIsActive ? 'Block' : 'Unblock';\r\n+                    event.target.setAttribute('data-active', newIsActive);\r\n+\r\n+                    // Update the button color\r\n+                    event.target.classList.toggle('bg-green-700', !newIsActive);\r\n+                    event.target.classList.toggle('bg-orange-700', newIsActive);\r\n+                    event.target.classList.toggle('hover:bg-green-800', !newIsActive);\r\n+                    event.target.classList.toggle('hover:bg-orange-800', newIsActive);\r\n+\r\n+                    // Close the confirmation modal\r\n+                    modal.classList.add('hidden');\r\n+                } else {\r\n+                    console.error('Failed to block/unblock product');\r\n+                }\r\n+            } catch (error) {\r\n+                console.error('Error:', error);\r\n+            }\r\n+        };\r\n+    });\r\n+});\r\n+\r\n+\r\n+ \r\n+   </script>\r\n+ \r\n+\r\n+ \r\n+    <!-- JavaScript Libraries(needed)-->\r\n+    <script src=\"https://code.jquery.com/jquery-3.4.1.min.js\"></script>\r\n+    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js\"></script>\r\n+     <!-- Cropper JS -->\r\n+     <link href=\"https://unpkg.com/cropperjs/dist/cropper.min.css\" rel=\"stylesheet\">\r\n+ \r\n+     <!-- Toastify  -->\r\n+     <link rel=\"stylesheet\" type=\"text/css\" href=\"https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css\">\r\n+        <!-- Tailwind CSS Script -->\r\n+        <script src=\"https://cdn.tailwindcss.com\"></script>\r\n+ \r\n+        <!-- SweetAlert -->\r\n+        <script src=\"https://cdn.jsdelivr.net/npm/sweetalert2@11\"></script>\r\n+    \r\n+        <!-- Cropper JS -->\r\n+        <script src=\"https://unpkg.com/cropperjs/dist/cropper.min.js\"></script> \r\n+    \r\n+        <!-- Toastify  -->\r\n+        <script type=\"text/javascript\" src=\"https://cdn.jsdelivr.net/npm/toastify-js\"></script>\r\n+ </div>\n\\ No newline at end of file\n"
                },
                {
                    "date": 1736326113863,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -4,9 +4,9 @@\n     <%- include('sidebar') %>\r\n  \r\n  \r\n      <!-- Navbar  -->\r\n-    <div class=\"fixed top-0 left-10 right-0 z-10 flex items-center justify-between p-8 h-20 shadow-md ml-64 bg-gray-100\">\r\n+    <div class=\"fixed top-0 left-0 right-0 z-10 flex items-center justify-between p-8 h-20 shadow-md ml-64 bg-gray-100\">\r\n      <div>\r\n          <h2 class=\"text-lg font-semibold\">Products</h2>\r\n      </div>\r\n      <div>\r\n@@ -26,9 +26,9 @@\n        </div>\r\n  \r\n      <!-- Table  -->\r\n  \r\n-     <div class=\"font-sans overflow-x-auto ml-8 mr-8 mt-12\">\r\n+     <div class=\"font-sans overflow-x-auto ml- mr-8 mt-12\">\r\n          <table class=\"min-w-full bg-white\">\r\n              <thead class=\" bg-gray-200 whitespace-nowrap\">\r\n                  <tr>\r\n                      <th class=\"p-4 text-left text-xs font-bold text-gray-800 w-[3%]\">\r\n@@ -268,549 +268,5 @@\n         <script src=\"https://unpkg.com/cropperjs/dist/cropper.min.js\"></script> \r\n     \r\n         <!-- Toastify  -->\r\n         <script type=\"text/javascript\" src=\"https://cdn.jsdelivr.net/npm/toastify-js\"></script>\r\n- </div>\n-\r\n-\r\n-    <!-- include the sidebar partial  -->\r\n-    <%- include('sidebar') %>\r\n- \r\n- \r\n-     <!-- Navbar  -->\r\n-    <div class=\"fixed top- left-0 right-0 z-10 flex items-center justify-between p-8 h-20 shadow-md ml-64 bg-gray-100\">\r\n-     <div>\r\n-         <h2 class=\"text-lg font-semibold\">Products</h2>\r\n-     </div>\r\n-     <div>\r\n-         <form action=\"/admin/users\" method=\"GET\">\r\n-             <input type=\"text\" name=\"search\" placeholder=\"Search\" class=\"p-2 w-[500px] h-10 rounded bg-gray-200\">\r\n-         </form>\r\n-     </div>\r\n-   </div>\r\n- \r\n-    <div class=\" pt-24 pb-16\">\r\n-      \r\n- \r\n-      <!-- Add Product button  -->\r\n- \r\n-      <div>\r\n-         <a href=\"/admin/addproduct\"><button id=\"add-product-btn\" class=\"absolute right-8 px-4 py-2 bg-blue-800 text-white text-sm tracking-wider font-medium rounded hover:bg-blue-900\">Add New Product</button></a>\r\n-       </div>\r\n- \r\n-     <!-- Table  -->\r\n- \r\n-     <div class=\"font-sans overflow-x-auto ml-8 mr-8 mt-12\">\r\n-         <table class=\"min-w-full bg-white\">\r\n-             <thead class=\" bg-gray-200 whitespace-nowrap\">\r\n-                 <tr>\r\n-                     <th class=\"p-4 text-left text-xs font-bold text-gray-800 w-[3%]\">\r\n-                         SI\r\n-                     </th>\r\n-                     <th class=\"p-4 text-left text-xs font-bold w-[15%]\">\r\n-                         Product Name\r\n-                     </th>\r\n-                     <th class=\"p-4 text-left text-xs font-bold w-[11%]\">\r\n-                         Category\r\n-                     </th>\r\n-                    \r\n-                     <th class=\"p-4 text-left text-xs font-bold w-[10%]\">\r\n-                         Stock\r\n-                     </th>\r\n-                    \r\n-                     <th class=\"p-4 text-left text-xs font-bold w-[10%]\">\r\n-                         Price\r\n-                     </th>\r\n-                     <th class=\"p-4 text-left text-xs font-bold w-[10%]\">\r\n-                        Discount\r\n-                    </th>\r\n-                    <th class=\"p-4 text-left text-xs font-bold w-[10%]\">\r\n-                        Final Price\r\n-                    </th>\r\n-                     <th class=\"p-4 text-center text-xs font-bold w-[10%]\">\r\n-                         Action\r\n-                     </th>\r\n-                 </tr>\r\n-             </thead>\r\n- \r\n-             <tbody class=\"whitespace-nowrap\">\r\n- \r\n-                 <% products.forEach((product, index) => { %>\r\n- \r\n-                     <tr class=\"hover:bg-gray-50\">\r\n-                         <td class=\"p-4 text-[15px] font-semibold text-gray-800\">\r\n-                             <%= ((currentPage - 1) * limit) + index + 1 %>\r\n-                         </td>\r\n-                         <td class=\"p-4 text-[15px] font-semibold text-gray-800\">\r\n-                             <%= product.name %>\r\n-                         </td>\r\n-                         <td class=\"p-4 text-[15px] font-semibold text-gray-800\">\r\n-                             <%= product.category.name %>\r\n-                         </td>\r\n-                        \r\n-                        \r\n-                         <td class=\"p-4 text-[15px] font-semibold text-gray-800\">\r\n-                             <%= product.stock %>\r\n-                         </td>\r\n-                         <td class=\"p-4 text-[15px] font-semibold text-gray-800\">\r\n- \r\n-                           <span>&#8377;</span><%= product.price %>\r\n-                         </td>\r\n-                         <td class=\"p-4 text-[15px] font-semibold text-gray-800\">\r\n-                            <%= product.discount %>\r\n-                        </td>\r\n-                         <td class=\"p-4 text-[15px] font-semibold text-gray-800\">\r\n- \r\n-                            <span>&#8377;</span><%= product.finalPrice %>\r\n-                          </td>\r\n-                         <td class=\"p-4 text-[15px] text-center font-semibold text-gray-800\">\r\n-                             \r\n-                              <!-- Block Unblock Button -->\r\n-                <button type=\"button\"\r\n-                class=\"block-unblock-btn w-[100px] px-4 py-2 rounded-lg text-white text-sm tracking-wider font-medium border border-current outline-none bg-<%= product.isActive ? 'orange-700' : 'green-700' %> hover:bg-<%= product.isActive ? 'orange-800' : 'green-800' %> active:bg-<%= product.isActive ? 'orange-700' : 'green-700' %>\"\r\n-                data-product-id=\"<%= product.id %>\"\r\n-                data-active=\"<%= product.isActive %>\">\r\n-                <%= product.isActive ? 'Block' : 'Unblock' %>\r\n-            </button>\r\n- \r\n-                             <!-- Edit Button  -->\r\n-                              <a href=\"/admin/updateproduct/<%= product.id %>\">\r\n-                                 <button type=\"button\"\r\n-                                 class=\"edit-product-btn w-[100px] px-4 py-2  text-white rounded-lg text-sm tracking-wider font-medium border border-current outline-none hover:bg-gray-600 bg-gray-500\">\r\n-                                 Edit\r\n-                             </button>\r\n-                              </a>\r\n-                         </td>\r\n-                     </tr>\r\n-                     <% }) %>\r\n-                 \r\n-             </tbody>\r\n-         </table>\r\n- \r\n-         <div class=\"mt-6 flex justify-between items-center px-8\">\r\n-             <!-- Previous Button -->\r\n-             <% if (currentPage > 1) { %>\r\n-               <a href=\"?page=<%= currentPage - 1 %>&limit=<%= limit %>\" class=\"px-4 py-2 bg-gray-300 text-sm rounded hover:bg-gray-400\">Previous</a>\r\n-             <% } else { %>\r\n-               <span class=\"px-4 py-2 bg-gray-300 text-sm rounded opacity-50\">Previous</span>\r\n-             <% } %>\r\n-           \r\n-             <!-- Page Numbers -->\r\n-             <div class=\"flex space-x-2\">\r\n-               <% for (let i = 1; i <= totalPages; i++) { %>\r\n-                 <% if (i === currentPage) { %>\r\n-                   <span class=\"px-4 py-2 bg-blue-500 text-white text-sm rounded\"><%= i %></span>\r\n-                 <% } else { %>\r\n-                   <a href=\"?page=<%= i %>&limit=<%= limit %>\" class=\"px-4 py-2 bg-gray-300 text-sm rounded hover:bg-gray-400\"><%= i %></a>\r\n-                 <% } %>\r\n-               <% } %>\r\n-             </div>\r\n-           \r\n-             <!-- Next Button -->\r\n-             <% if (currentPage < totalPages) { %>\r\n-               <a href=\"?page=<%= currentPage + 1 %>&limit=<%= limit %>\" class=\"px-4 py-2 bg-gray-300 text-sm rounded hover:bg-gray-400\">Next</a>\r\n-             <% } else { %>\r\n-               <span class=\"px-4 py-2 bg-gray-300 text-sm rounded opacity-50\">Next</span>\r\n-             <% } %>\r\n-           </div>\r\n- \r\n-     </div>\r\n- \r\n-       \r\n-       \r\n-    </div>\r\n- \r\n- \r\n-        <!--Block Unblock Modal -->\r\n- <div id=\"confirmation-modal\" class=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-50\">\r\n-     <div class=\"bg-white p-8 rounded-lg shadow-lg w-[400px]\">\r\n-       <h2 class=\"text-xl font-semibold mb-4\">Confirm Action</h2>\r\n-       <p id=\"modal-message\" class=\"mb-6 text-gray-700\">Are you sure you want to proceed?</p>\r\n-       <div class=\"flex justify-end space-x-4\">\r\n-         <button id=\"cancel-btn\" class=\"px-4 py-2 bg-gray-300 rounded-lg hover:bg-gray-400\">Cancel</button>\r\n-         <button id=\"confirm-btn\" class=\"px-4 py-2 bg-black text-white rounded-lg hover:bg-gray-900\">Confirm</button>\r\n-       </div>\r\n-     </div>\r\n-   </div>\r\n- \r\n-    \r\n-   <script>\r\n- \r\n- document.querySelectorAll('.pagination-link').forEach(link => {\r\n-     link.addEventListener('click', async (event) => {\r\n-       event.preventDefault();\r\n-       const url = event.target.href;\r\n- \r\n-       try {\r\n-         const response = await fetch(url);\r\n-         const html = await response.text();\r\n- \r\n-         // Replace the table and pagination controls with the new content\r\n-         const parser = new DOMParser();\r\n-         const doc = parser.parseFromString(html, 'text/html');\r\n-         const newTable = doc.querySelector('table');\r\n-         const newPagination = doc.querySelector('.pagination-controls');\r\n- \r\n-         document.querySelector('table').innerHTML = newTable.innerHTML;\r\n-         document.querySelector('.pagination-controls').innerHTML = newPagination.innerHTML;\r\n-       } catch (error) {\r\n-         console.error('Error fetching new page:', error);\r\n-       }\r\n-     });\r\n-   });\r\n-   \r\n-// Handle Block Unblock\r\n-document.querySelectorAll('.block-unblock-btn').forEach(button => {\r\n-    button.addEventListener('click', (event) => {\r\n-        const productId = event.target.getAttribute('data-product-id');\r\n-        const isActive = event.target.getAttribute('data-active') === 'true';\r\n-        const modalMessage = document.getElementById('modal-message');\r\n-\r\n-        // Show confirmation modal\r\n-        const modal = document.getElementById('confirmation-modal');\r\n-        modal.classList.remove('hidden');\r\n-\r\n-        // Set the modal message dynamically\r\n-        modalMessage.textContent = isActive\r\n-            ? 'Are you sure you want to block this product?'\r\n-            : 'Are you sure you want to unblock this product?';\r\n-\r\n-        // Handle modal cancel button\r\n-        document.getElementById('cancel-btn').addEventListener('click', () => {\r\n-            modal.classList.add('hidden');\r\n-        });\r\n-\r\n-        // Handle modal confirm button\r\n-        document.getElementById('confirm-btn').onclick = async function () {\r\n-            try {\r\n-                const response = await fetch(`/admin/products/${productId}/block`, {\r\n-                    method: 'POST',\r\n-                    headers: {\r\n-                        'Content-Type': 'application/json'\r\n-                    },\r\n-                    body: JSON.stringify({ active: !isActive }) // Send updated active status to the server\r\n-                });\r\n-\r\n-                if (response.ok) {\r\n-                    // Update the new active status dynamically\r\n-                    const newIsActive = !isActive;\r\n-\r\n-                    // Update button text and attributes\r\n-                    event.target.textContent = newIsActive ? 'Block' : 'Unblock';\r\n-                    event.target.setAttribute('data-active', newIsActive);\r\n-\r\n-                    // Update the button color\r\n-                    event.target.classList.toggle('bg-green-700', !newIsActive);\r\n-                    event.target.classList.toggle('bg-orange-700', newIsActive);\r\n-                    event.target.classList.toggle('hover:bg-green-800', !newIsActive);\r\n-                    event.target.classList.toggle('hover:bg-orange-800', newIsActive);\r\n-\r\n-                    // Close the confirmation modal\r\n-                    modal.classList.add('hidden');\r\n-                } else {\r\n-                    console.error('Failed to block/unblock product');\r\n-                }\r\n-            } catch (error) {\r\n-                console.error('Error:', error);\r\n-            }\r\n-        };\r\n-    });\r\n-});\r\n-\r\n-\r\n- \r\n-   </script>\r\n- \r\n-\r\n- \r\n-    <!-- JavaScript Libraries(needed)-->\r\n-    <script src=\"https://code.jquery.com/jquery-3.4.1.min.js\"></script>\r\n-    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js\"></script>\r\n-     <!-- Cropper JS -->\r\n-     <link href=\"https://unpkg.com/cropperjs/dist/cropper.min.css\" rel=\"stylesheet\">\r\n- \r\n-     <!-- Toastify  -->\r\n-     <link rel=\"stylesheet\" type=\"text/css\" href=\"https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css\">\r\n-        <!-- Tailwind CSS Script -->\r\n-        <script src=\"https://cdn.tailwindcss.com\"></script>\r\n- \r\n-        <!-- SweetAlert -->\r\n-        <script src=\"https://cdn.jsdelivr.net/npm/sweetalert2@11\"></script>\r\n-    \r\n-        <!-- Cropper JS -->\r\n-        <script src=\"https://unpkg.com/cropperjs/dist/cropper.min.js\"></script> \r\n-    \r\n-        <!-- Toastify  -->\r\n-        <script type=\"text/javascript\" src=\"https://cdn.jsdelivr.net/npm/toastify-js\"></script>\r\n- </div>\n-\r\n-\r\n-    <!-- include the sidebar partial  -->\r\n-    <%- include('sidebar') %>\r\n- \r\n- \r\n-     <!-- Navbar  -->\r\n-    <div class=\"fixed top- left-0 right-0 z-10 flex items-center justify-between p-8 h-20 shadow-md ml-64 bg-gray-100\">\r\n-     <div>\r\n-         <h2 class=\"text-lg font-semibold\">Products</h2>\r\n-     </div>\r\n-     <div>\r\n-         <form action=\"/admin/users\" method=\"GET\">\r\n-             <input type=\"text\" name=\"search\" placeholder=\"Search\" class=\"p-2 w-[500px] h-10 rounded bg-gray-200\">\r\n-         </form>\r\n-     </div>\r\n-   </div>\r\n- \r\n-    <div class=\" pt-24 pb-16\">\r\n-      \r\n- \r\n-      <!-- Add Product button  -->\r\n- \r\n-      <div>\r\n-         <a href=\"/admin/addproduct\"><button id=\"add-product-btn\" class=\"absolute right-8 px-4 py-2 bg-blue-800 text-white text-sm tracking-wider font-medium rounded hover:bg-blue-900\">Add New Product</button></a>\r\n-       </div>\r\n- \r\n-     <!-- Table  -->\r\n- \r\n-     <div class=\"font-sans overflow-x-auto ml-8 mr-8 mt-12\">\r\n-         <table class=\"min-w-full bg-white\">\r\n-             <thead class=\" bg-gray-200 whitespace-nowrap\">\r\n-                 <tr>\r\n-                     <th class=\"p-4 text-left text-xs font-bold text-gray-800 w-[3%]\">\r\n-                         SI\r\n-                     </th>\r\n-                     <th class=\"p-4 text-left text-xs font-bold w-[15%]\">\r\n-                         Product Name\r\n-                     </th>\r\n-                     <th class=\"p-4 text-left text-xs font-bold w-[11%]\">\r\n-                         Category\r\n-                     </th>\r\n-                    \r\n-                     <th class=\"p-4 text-left text-xs font-bold w-[10%]\">\r\n-                         Stock\r\n-                     </th>\r\n-                    \r\n-                     <th class=\"p-4 text-left text-xs font-bold w-[10%]\">\r\n-                         Price\r\n-                     </th>\r\n-                     <th class=\"p-4 text-left text-xs font-bold w-[10%]\">\r\n-                        Discount\r\n-                    </th>\r\n-                    <th class=\"p-4 text-left text-xs font-bold w-[10%]\">\r\n-                        Final Price\r\n-                    </th>\r\n-                     <th class=\"p-4 text-center text-xs font-bold w-[10%]\">\r\n-                         Action\r\n-                     </th>\r\n-                 </tr>\r\n-             </thead>\r\n- \r\n-             <tbody class=\"whitespace-nowrap\">\r\n- \r\n-                 <% products.forEach((product, index) => { %>\r\n- \r\n-                     <tr class=\"hover:bg-gray-50\">\r\n-                         <td class=\"p-4 text-[15px] font-semibold text-gray-800\">\r\n-                             <%= ((currentPage - 1) * limit) + index + 1 %>\r\n-                         </td>\r\n-                         <td class=\"p-4 text-[15px] font-semibold text-gray-800\">\r\n-                             <%= product.name %>\r\n-                         </td>\r\n-                         <td class=\"p-4 text-[15px] font-semibold text-gray-800\">\r\n-                             <%= product.category.name %>\r\n-                         </td>\r\n-                        \r\n-                        \r\n-                         <td class=\"p-4 text-[15px] font-semibold text-gray-800\">\r\n-                             <%= product.stock %>\r\n-                         </td>\r\n-                         <td class=\"p-4 text-[15px] font-semibold text-gray-800\">\r\n- \r\n-                           <span>&#8377;</span><%= product.price %>\r\n-                         </td>\r\n-                         <td class=\"p-4 text-[15px] font-semibold text-gray-800\">\r\n-                            <%= product.discount %>\r\n-                        </td>\r\n-                         <td class=\"p-4 text-[15px] font-semibold text-gray-800\">\r\n- \r\n-                            <span>&#8377;</span><%= product.finalPrice %>\r\n-                          </td>\r\n-                         <td class=\"p-4 text-[15px] text-center font-semibold text-gray-800\">\r\n-                             \r\n-                              <!-- Block Unblock Button -->\r\n-                <button type=\"button\"\r\n-                class=\"block-unblock-btn w-[100px] px-4 py-2 rounded-lg text-white text-sm tracking-wider font-medium border border-current outline-none bg-<%= product.isActive ? 'orange-700' : 'green-700' %> hover:bg-<%= product.isActive ? 'orange-800' : 'green-800' %> active:bg-<%= product.isActive ? 'orange-700' : 'green-700' %>\"\r\n-                data-product-id=\"<%= product.id %>\"\r\n-                data-active=\"<%= product.isActive %>\">\r\n-                <%= product.isActive ? 'Block' : 'Unblock' %>\r\n-            </button>\r\n- \r\n-                             <!-- Edit Button  -->\r\n-                              <a href=\"/admin/updateproduct/<%= product.id %>\">\r\n-                                 <button type=\"button\"\r\n-                                 class=\"edit-product-btn w-[100px] px-4 py-2  text-white rounded-lg text-sm tracking-wider font-medium border border-current outline-none hover:bg-gray-600 bg-gray-500\">\r\n-                                 Edit\r\n-                             </button>\r\n-                              </a>\r\n-                         </td>\r\n-                     </tr>\r\n-                     <% }) %>\r\n-                 \r\n-             </tbody>\r\n-         </table>\r\n- \r\n-         <div class=\"mt-6 flex justify-between items-center px-8\">\r\n-             <!-- Previous Button -->\r\n-             <% if (currentPage > 1) { %>\r\n-               <a href=\"?page=<%= currentPage - 1 %>&limit=<%= limit %>\" class=\"px-4 py-2 bg-gray-300 text-sm rounded hover:bg-gray-400\">Previous</a>\r\n-             <% } else { %>\r\n-               <span class=\"px-4 py-2 bg-gray-300 text-sm rounded opacity-50\">Previous</span>\r\n-             <% } %>\r\n-           \r\n-             <!-- Page Numbers -->\r\n-             <div class=\"flex space-x-2\">\r\n-               <% for (let i = 1; i <= totalPages; i++) { %>\r\n-                 <% if (i === currentPage) { %>\r\n-                   <span class=\"px-4 py-2 bg-blue-500 text-white text-sm rounded\"><%= i %></span>\r\n-                 <% } else { %>\r\n-                   <a href=\"?page=<%= i %>&limit=<%= limit %>\" class=\"px-4 py-2 bg-gray-300 text-sm rounded hover:bg-gray-400\"><%= i %></a>\r\n-                 <% } %>\r\n-               <% } %>\r\n-             </div>\r\n-           \r\n-             <!-- Next Button -->\r\n-             <% if (currentPage < totalPages) { %>\r\n-               <a href=\"?page=<%= currentPage + 1 %>&limit=<%= limit %>\" class=\"px-4 py-2 bg-gray-300 text-sm rounded hover:bg-gray-400\">Next</a>\r\n-             <% } else { %>\r\n-               <span class=\"px-4 py-2 bg-gray-300 text-sm rounded opacity-50\">Next</span>\r\n-             <% } %>\r\n-           </div>\r\n- \r\n-     </div>\r\n- \r\n-       \r\n-       \r\n-    </div>\r\n- \r\n- \r\n-        <!--Block Unblock Modal -->\r\n- <div id=\"confirmation-modal\" class=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-50\">\r\n-     <div class=\"bg-white p-8 rounded-lg shadow-lg w-[400px]\">\r\n-       <h2 class=\"text-xl font-semibold mb-4\">Confirm Action</h2>\r\n-       <p id=\"modal-message\" class=\"mb-6 text-gray-700\">Are you sure you want to proceed?</p>\r\n-       <div class=\"flex justify-end space-x-4\">\r\n-         <button id=\"cancel-btn\" class=\"px-4 py-2 bg-gray-300 rounded-lg hover:bg-gray-400\">Cancel</button>\r\n-         <button id=\"confirm-btn\" class=\"px-4 py-2 bg-black text-white rounded-lg hover:bg-gray-900\">Confirm</button>\r\n-       </div>\r\n-     </div>\r\n-   </div>\r\n- \r\n-    \r\n-   <script>\r\n- \r\n- document.querySelectorAll('.pagination-link').forEach(link => {\r\n-     link.addEventListener('click', async (event) => {\r\n-       event.preventDefault();\r\n-       const url = event.target.href;\r\n- \r\n-       try {\r\n-         const response = await fetch(url);\r\n-         const html = await response.text();\r\n- \r\n-         // Replace the table and pagination controls with the new content\r\n-         const parser = new DOMParser();\r\n-         const doc = parser.parseFromString(html, 'text/html');\r\n-         const newTable = doc.querySelector('table');\r\n-         const newPagination = doc.querySelector('.pagination-controls');\r\n- \r\n-         document.querySelector('table').innerHTML = newTable.innerHTML;\r\n-         document.querySelector('.pagination-controls').innerHTML = newPagination.innerHTML;\r\n-       } catch (error) {\r\n-         console.error('Error fetching new page:', error);\r\n-       }\r\n-     });\r\n-   });\r\n-   \r\n-// Handle Block Unblock\r\n-document.querySelectorAll('.block-unblock-btn').forEach(button => {\r\n-    button.addEventListener('click', (event) => {\r\n-        const productId = event.target.getAttribute('data-product-id');\r\n-        const isActive = event.target.getAttribute('data-active') === 'true';\r\n-        const modalMessage = document.getElementById('modal-message');\r\n-\r\n-        // Show confirmation modal\r\n-        const modal = document.getElementById('confirmation-modal');\r\n-        modal.classList.remove('hidden');\r\n-\r\n-        // Set the modal message dynamically\r\n-        modalMessage.textContent = isActive\r\n-            ? 'Are you sure you want to block this product?'\r\n-            : 'Are you sure you want to unblock this product?';\r\n-\r\n-        // Handle modal cancel button\r\n-        document.getElementById('cancel-btn').addEventListener('click', () => {\r\n-            modal.classList.add('hidden');\r\n-        });\r\n-\r\n-        // Handle modal confirm button\r\n-        document.getElementById('confirm-btn').onclick = async function () {\r\n-            try {\r\n-                const response = await fetch(`/admin/products/${productId}/block`, {\r\n-                    method: 'POST',\r\n-                    headers: {\r\n-                        'Content-Type': 'application/json'\r\n-                    },\r\n-                    body: JSON.stringify({ active: !isActive }) // Send updated active status to the server\r\n-                });\r\n-\r\n-                if (response.ok) {\r\n-                    // Update the new active status dynamically\r\n-                    const newIsActive = !isActive;\r\n-\r\n-                    // Update button text and attributes\r\n-                    event.target.textContent = newIsActive ? 'Block' : 'Unblock';\r\n-                    event.target.setAttribute('data-active', newIsActive);\r\n-\r\n-                    // Update the button color\r\n-                    event.target.classList.toggle('bg-green-700', !newIsActive);\r\n-                    event.target.classList.toggle('bg-orange-700', newIsActive);\r\n-                    event.target.classList.toggle('hover:bg-green-800', !newIsActive);\r\n-                    event.target.classList.toggle('hover:bg-orange-800', newIsActive);\r\n-\r\n-                    // Close the confirmation modal\r\n-                    modal.classList.add('hidden');\r\n-                } else {\r\n-                    console.error('Failed to block/unblock product');\r\n-                }\r\n-            } catch (error) {\r\n-                console.error('Error:', error);\r\n-            }\r\n-        };\r\n-    });\r\n-});\r\n-\r\n-\r\n- \r\n-   </script>\r\n- \r\n-\r\n- \r\n-    <!-- JavaScript Libraries(needed)-->\r\n-    <script src=\"https://code.jquery.com/jquery-3.4.1.min.js\"></script>\r\n-    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js\"></script>\r\n-     <!-- Cropper JS -->\r\n-     <link href=\"https://unpkg.com/cropperjs/dist/cropper.min.css\" rel=\"stylesheet\">\r\n- \r\n-     <!-- Toastify  -->\r\n-     <link rel=\"stylesheet\" type=\"text/css\" href=\"https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css\">\r\n-        <!-- Tailwind CSS Script -->\r\n-        <script src=\"https://cdn.tailwindcss.com\"></script>\r\n- \r\n-        <!-- SweetAlert -->\r\n-        <script src=\"https://cdn.jsdelivr.net/npm/sweetalert2@11\"></script>\r\n-    \r\n-        <!-- Cropper JS -->\r\n-        <script src=\"https://unpkg.com/cropperjs/dist/cropper.min.js\"></script> \r\n-    \r\n-        <!-- Toastify  -->\r\n-        <script type=\"text/javascript\" src=\"https://cdn.jsdelivr.net/npm/toastify-js\"></script>\r\n  </div>\n\\ No newline at end of file\n"
                },
                {
                    "date": 1736334802864,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,272 @@\n+\r\n+\r\n+    <!-- include the sidebar partial  -->\r\n+    <%- include('sidebar') %>\r\n+ \r\n+ \r\n+     <!-- Navbar  -->\r\n+    <div class=\"fixed top-0 left-0 right-0 z-10 flex items-center justify-between p-8 h-20 shadow-md ml-64 bg-gray-100\">\r\n+     <div>\r\n+         <h2 class=\"text-lg font-semibold\">Products</h2>\r\n+     </div>\r\n+     <div>\r\n+         <form action=\"/admin/users\" method=\"GET\">\r\n+             <input type=\"text\" name=\"search\" placeholder=\"Search\" class=\"p-2 w-[500px] h-10 rounded bg-gray-200\">\r\n+         </form>\r\n+     </div>\r\n+   </div>\r\n+ \r\n+    <div class=\" pt-24 pb-16\">\r\n+      \r\n+ \r\n+      <!-- Add Product button  -->\r\n+ \r\n+      <div>\r\n+         <a href=\"/admin/addproduct\"><button id=\"add-product-btn\" class=\"absolute right-8 px-4 py-2 bg-blue-800 text-white text-sm tracking-wider font-medium rounded hover:bg-blue-900\">Add New Product</button></a>\r\n+       </div>\r\n+ \r\n+     <!-- Table  -->\r\n+ \r\n+     <div class=\"font-sans overflow-x-auto ml-64 mr-8 mt-12\">\r\n+         <table class=\"min-w-full bg-white\">\r\n+             <thead class=\" bg-gray-200 whitespace-nowrap\">\r\n+                 <tr>\r\n+                     <th class=\"p-4 text-left text-xs font-bold text-gray-800 w-[3%]\">\r\n+                         SI\r\n+                     </th>\r\n+                     <th class=\"p-4 text-left text-xs font-bold w-[15%]\">\r\n+                         Product Name\r\n+                     </th>\r\n+                     <th class=\"p-4 text-left text-xs font-bold w-[11%]\">\r\n+                         Category\r\n+                     </th>\r\n+                    \r\n+                     <th class=\"p-4 text-left text-xs font-bold w-[10%]\">\r\n+                         Stock\r\n+                     </th>\r\n+                    \r\n+                     <th class=\"p-4 text-left text-xs font-bold w-[10%]\">\r\n+                         Price\r\n+                     </th>\r\n+                     <th class=\"p-4 text-left text-xs font-bold w-[10%]\">\r\n+                        Discount\r\n+                    </th>\r\n+                    <th class=\"p-4 text-left text-xs font-bold w-[10%]\">\r\n+                        Final Price\r\n+                    </th>\r\n+                     <th class=\"p-4 text-center text-xs font-bold w-[10%]\">\r\n+                         Action\r\n+                     </th>\r\n+                 </tr>\r\n+             </thead>\r\n+ \r\n+             <tbody class=\"whitespace-nowrap\">\r\n+ \r\n+                 <% products.forEach((product, index) => { %>\r\n+ \r\n+                     <tr class=\"hoverbg-gray-50\">\r\n+                         <td class=\"p-4 text-[15px] font-semibold text-gray-800\">\r\n+                             <%= ((currentPage - 1) * limit) + index + 1 %>\r\n+                         </td>\r\n+                         <td class=\"p-4 text-[15px] font-semibold text-gray-800\">\r\n+                             <%= product.name %>\r\n+                         </td>\r\n+                         <td class=\"p-4 text-[15px] font-semibold text-gray-800\">\r\n+                             <%= product.category.name %>\r\n+                         </td>\r\n+                        \r\n+                        \r\n+                         <td class=\"p-4 text-[15px] font-semibold text-gray-800\">\r\n+                             <%= product.stock %>\r\n+                         </td>\r\n+                         <td class=\"p-4 text-[15px] font-semibold text-gray-800\">\r\n+ \r\n+                           <span>&#8377;</span><%= product.price %>\r\n+                         </td>\r\n+                         <td class=\"p-4 text-[15px] font-semibold text-gray-800\">\r\n+                            <%= product.discount %>\r\n+                        </td>\r\n+                         <td class=\"p-4 text-[15px] font-semibold text-gray-800\">\r\n+ \r\n+                            <span>&#8377;</span><%= product.finalPrice %>\r\n+                          </td>\r\n+                         <td class=\"p-4 text-[15px] text-center font-semibold text-gray-800\">\r\n+                             \r\n+                              <!-- Block Unblock Button -->\r\n+                <button type=\"button\"\r\n+                class=\"block-unblock-btn w-[100px] px-4 py-2 rounded-lg text-white text-sm tracking-wider font-medium border border-current outline-none bg-<%= product.isActive ? 'orange-700' : 'green-700' %> hover:bg-<%= product.isActive ? 'orange-800' : 'green-800' %> active:bg-<%= product.isActive ? 'orange-700' : 'green-700' %>\"\r\n+                data-product-id=\"<%= product.id %>\"\r\n+                data-active=\"<%= product.isActive %>\">\r\n+                <%= product.isActive ? 'Block' : 'Unblock' %>\r\n+            </button>\r\n+ \r\n+                             <!-- Edit Button  -->\r\n+                              <a href=\"/admin/updateproduct/<%= product.id %>\">\r\n+                                 <button type=\"button\"\r\n+                                 class=\"edit-product-btn w-[100px] px-4 py-2  text-white rounded-lg text-sm tracking-wider font-medium border border-current outline-none hover:bg-gray-600 bg-gray-500\">\r\n+                                 Edit\r\n+                             </button>\r\n+                              </a>\r\n+                         </td>\r\n+                     </tr>\r\n+                     <% }) %>\r\n+                 \r\n+             </tbody>\r\n+         </table>\r\n+ \r\n+         <div class=\"mt-6 flex justify-between items-center px-8\">\r\n+             <!-- Previous Button -->\r\n+             <% if (currentPage > 1) { %>\r\n+               <a href=\"?page=<%= currentPage - 1 %>&limit=<%= limit %>\" class=\"px-4 py-2 bg-gray-300 text-sm rounded hover:bg-gray-400\">Previous</a>\r\n+             <% } else { %>\r\n+               <span class=\"px-4 py-2 bg-gray-300 text-sm rounded opacity-50\">Previous</span>\r\n+             <% } %>\r\n+           \r\n+             <!-- Page Numbers -->\r\n+             <div class=\"flex space-x-2\">\r\n+               <% for (let i = 1; i <= totalPages; i++) { %>\r\n+                 <% if (i === currentPage) { %>\r\n+                   <span class=\"px-4 py-2 bg-blue-500 text-white text-sm rounded\"><%= i %></span>\r\n+                 <% } else { %>\r\n+                   <a href=\"?page=<%= i %>&limit=<%= limit %>\" class=\"px-4 py-2 bg-gray-300 text-sm rounded hover:bg-gray-400\"><%= i %></a>\r\n+                 <% } %>\r\n+               <% } %>\r\n+             </div>\r\n+           \r\n+             <!-- Next Button -->\r\n+             <% if (currentPage < totalPages) { %>\r\n+               <a href=\"?page=<%= currentPage + 1 %>&limit=<%= limit %>\" class=\"px-4 py-2 bg-gray-300 text-sm rounded hover:bg-gray-400\">Next</a>\r\n+             <% } else { %>\r\n+               <span class=\"px-4 py-2 bg-gray-300 text-sm rounded opacity-50\">Next</span>\r\n+             <% } %>\r\n+           </div>\r\n+ \r\n+     </div>\r\n+ \r\n+       \r\n+       \r\n+    </div>\r\n+ \r\n+ \r\n+        <!--Block Unblock Modal -->\r\n+ <div id=\"confirmation-modal\" class=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-50\">\r\n+     <div class=\"bg-white p-8 rounded-lg shadow-lg w-[400px]\">\r\n+       <h2 class=\"text-xl font-semibold mb-4\">Confirm Action</h2>\r\n+       <p id=\"modal-message\" class=\"mb-6 text-gray-700\">Are you sure you want to proceed?</p>\r\n+       <div class=\"flex justify-end space-x-4\">\r\n+         <button id=\"cancel-btn\" class=\"px-4 py-2 bg-gray-300 rounded-lg hover:bg-gray-400\">Cancel</button>\r\n+         <button id=\"confirm-btn\" class=\"px-4 py-2 bg-black text-white rounded-lg hover:bg-gray-900\">Confirm</button>\r\n+       </div>\r\n+     </div>\r\n+   </div>\r\n+ \r\n+    \r\n+   <script>\r\n+ \r\n+ document.querySelectorAll('.pagination-link').forEach(link => {\r\n+     link.addEventListener('click', async (event) => {\r\n+       event.preventDefault();\r\n+       const url = event.target.href;\r\n+ \r\n+       try {\r\n+         const response = await fetch(url);\r\n+         const html = await response.text();\r\n+ \r\n+         // Replace the table and pagination controls with the new content\r\n+         const parser = new DOMParser();\r\n+         const doc = parser.parseFromString(html, 'text/html');\r\n+         const newTable = doc.querySelector('table');\r\n+         const newPagination = doc.querySelector('.pagination-controls');\r\n+ \r\n+         document.querySelector('table').innerHTML = newTable.innerHTML;\r\n+         document.querySelector('.pagination-controls').innerHTML = newPagination.innerHTML;\r\n+       } catch (error) {\r\n+         console.error('Error fetching new page:', error);\r\n+       }\r\n+     });\r\n+   });\r\n+   \r\n+// Handle Block Unblock\r\n+document.querySelectorAll('.block-unblock-btn').forEach(button => {\r\n+    button.addEventListener('click', (event) => {\r\n+        const productId = event.target.getAttribute('data-product-id');\r\n+        const isActive = event.target.getAttribute('data-active') === 'true';\r\n+        const modalMessage = document.getElementById('modal-message');\r\n+\r\n+        // Show confirmation modal\r\n+        const modal = document.getElementById('confirmation-modal');\r\n+        modal.classList.remove('hidden');\r\n+\r\n+        // Set the modal message dynamically\r\n+        modalMessage.textContent = isActive\r\n+            ? 'Are you sure you want to block this product?'\r\n+            : 'Are you sure you want to unblock this product?';\r\n+\r\n+        // Handle modal cancel button\r\n+        document.getElementById('cancel-btn').addEventListener('click', () => {\r\n+            modal.classList.add('hidden');\r\n+        });\r\n+\r\n+        // Handle modal confirm button\r\n+        document.getElementById('confirm-btn').onclick = async function () {\r\n+            try {\r\n+                const response = await fetch(`/admin/products/${productId}/block`, {\r\n+                    method: 'POST',\r\n+                    headers: {\r\n+                        'Content-Type': 'application/json'\r\n+                    },\r\n+                    body: JSON.stringify({ active: !isActive }) // Send updated active status to the server\r\n+                });\r\n+\r\n+                if (response.ok) {\r\n+                    // Update the new active status dynamically\r\n+                    const newIsActive = !isActive;\r\n+\r\n+                    // Update button text and attributes\r\n+                    event.target.textContent = newIsActive ? 'Block' : 'Unblock';\r\n+                    event.target.setAttribute('data-active', newIsActive);\r\n+\r\n+                    // Update the button color\r\n+                    event.target.classList.toggle('bg-green-700', !newIsActive);\r\n+                    event.target.classList.toggle('bg-orange-700', newIsActive);\r\n+                    event.target.classList.toggle('hover:bg-green-800', !newIsActive);\r\n+                    event.target.classList.toggle('hover:bg-orange-800', newIsActive);\r\n+\r\n+                    // Close the confirmation modal\r\n+                    modal.classList.add('hidden');\r\n+                } else {\r\n+                    console.error('Failed to block/unblock product');\r\n+                }\r\n+            } catch (error) {\r\n+                console.error('Error:', error);\r\n+            }\r\n+        };\r\n+    });\r\n+});\r\n+\r\n+\r\n+ \r\n+   </script>\r\n+ \r\n+\r\n+ \r\n+    <!-- JavaScript Libraries(needed)-->\r\n+    <script src=\"https://code.jquery.com/jquery-3.4.1.min.js\"></script>\r\n+    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js\"></script>\r\n+     <!-- Cropper JS -->\r\n+     <link href=\"https://unpkg.com/cropperjs/dist/cropper.min.css\" rel=\"stylesheet\">\r\n+ \r\n+     <!-- Toastify  -->\r\n+     <link rel=\"stylesheet\" type=\"text/css\" href=\"https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css\">\r\n+        <!-- Tailwind CSS Script -->\r\n+        <script src=\"https://cdn.tailwindcss.com\"></script>\r\n+ \r\n+        <!-- SweetAlert -->\r\n+        <script src=\"https://cdn.jsdelivr.net/npm/sweetalert2@11\"></script>\r\n+    \r\n+        <!-- Cropper JS -->\r\n+        <script src=\"https://unpkg.com/cropperjs/dist/cropper.min.js\"></script> \r\n+    \r\n+        <!-- Toastify  -->\r\n+        <script type=\"text/javascript\" src=\"https://cdn.jsdelivr.net/npm/toastify-js\"></script>\r\n+ </div>\n\\ No newline at end of file\n"
                },
                {
                    "date": 1736334838271,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -21,9 +21,9 @@\n  \r\n       <!-- Add Product button  -->\r\n  \r\n       <div>\r\n-         <a href=\"/admin/addproduct\"><button id=\"add-product-btn\" class=\"absolute right-8 px-4 py-2 bg-blue-800 text-white text-sm tracking-wider font-medium rounded hover:bg-blue-900\">Add New Product</button></a>\r\n+         <a href=\"/admin/addproduct\"><button id=\"add-product-btn\" class=\"absolute right-8 px-4 py-2 bg-blue-800 text-white text-sm tracking-wider font-medium rounded \">Add New Product</button></a>\r\n        </div>\r\n  \r\n      <!-- Table  -->\r\n  \r\n@@ -63,9 +63,9 @@\n              <tbody class=\"whitespace-nowrap\">\r\n  \r\n                  <% products.forEach((product, index) => { %>\r\n  \r\n-                     <tr class=\"hoverbg-gray-50\">\r\n+                     <tr class=\"bg-gray-50\">\r\n                          <td class=\"p-4 text-[15px] font-semibold text-gray-800\">\r\n                              <%= ((currentPage - 1) * limit) + index + 1 %>\r\n                          </td>\r\n                          <td class=\"p-4 text-[15px] font-semibold text-gray-800\">\r\n@@ -268,277 +268,5 @@\n         <script src=\"https://unpkg.com/cropperjs/dist/cropper.min.js\"></script> \r\n     \r\n         <!-- Toastify  -->\r\n         <script type=\"text/javascript\" src=\"https://cdn.jsdelivr.net/npm/toastify-js\"></script>\r\n- </div>\n-\r\n-\r\n-    <!-- include the sidebar partial  -->\r\n-    <%- include('sidebar') %>\r\n- \r\n- \r\n-     <!-- Navbar  -->\r\n-    <div class=\"fixed top-0 left-0 right-0 z-10 flex items-center justify-between p-8 h-20 shadow-md ml-64 bg-gray-100\">\r\n-     <div>\r\n-         <h2 class=\"text-lg font-semibold\">Products</h2>\r\n-     </div>\r\n-     <div>\r\n-         <form action=\"/admin/users\" method=\"GET\">\r\n-             <input type=\"text\" name=\"search\" placeholder=\"Search\" class=\"p-2 w-[500px] h-10 rounded bg-gray-200\">\r\n-         </form>\r\n-     </div>\r\n-   </div>\r\n- \r\n-    <div class=\" pt-24 pb-16\">\r\n-      \r\n- \r\n-      <!-- Add Product button  -->\r\n- \r\n-      <div>\r\n-         <a href=\"/admin/addproduct\"><button id=\"add-product-btn\" class=\"absolute right-8 px-4 py-2 bg-blue-800 text-white text-sm tracking-wider font-medium rounded hover:bg-blue-900\">Add New Product</button></a>\r\n-       </div>\r\n- \r\n-     <!-- Table  -->\r\n- \r\n-     <div class=\"font-sans overflow-x-auto ml- mr-8 mt-12\">\r\n-         <table class=\"min-w-full bg-white\">\r\n-             <thead class=\" bg-gray-200 whitespace-nowrap\">\r\n-                 <tr>\r\n-                     <th class=\"p-4 text-left text-xs font-bold text-gray-800 w-[3%]\">\r\n-                         SI\r\n-                     </th>\r\n-                     <th class=\"p-4 text-left text-xs font-bold w-[15%]\">\r\n-                         Product Name\r\n-                     </th>\r\n-                     <th class=\"p-4 text-left text-xs font-bold w-[11%]\">\r\n-                         Category\r\n-                     </th>\r\n-                    \r\n-                     <th class=\"p-4 text-left text-xs font-bold w-[10%]\">\r\n-                         Stock\r\n-                     </th>\r\n-                    \r\n-                     <th class=\"p-4 text-left text-xs font-bold w-[10%]\">\r\n-                         Price\r\n-                     </th>\r\n-                     <th class=\"p-4 text-left text-xs font-bold w-[10%]\">\r\n-                        Discount\r\n-                    </th>\r\n-                    <th class=\"p-4 text-left text-xs font-bold w-[10%]\">\r\n-                        Final Price\r\n-                    </th>\r\n-                     <th class=\"p-4 text-center text-xs font-bold w-[10%]\">\r\n-                         Action\r\n-                     </th>\r\n-                 </tr>\r\n-             </thead>\r\n- \r\n-             <tbody class=\"whitespace-nowrap\">\r\n- \r\n-                 <% products.forEach((product, index) => { %>\r\n- \r\n-                     <tr class=\"hover:bg-gray-50\">\r\n-                         <td class=\"p-4 text-[15px] font-semibold text-gray-800\">\r\n-                             <%= ((currentPage - 1) * limit) + index + 1 %>\r\n-                         </td>\r\n-                         <td class=\"p-4 text-[15px] font-semibold text-gray-800\">\r\n-                             <%= product.name %>\r\n-                         </td>\r\n-                         <td class=\"p-4 text-[15px] font-semibold text-gray-800\">\r\n-                             <%= product.category.name %>\r\n-                         </td>\r\n-                        \r\n-                        \r\n-                         <td class=\"p-4 text-[15px] font-semibold text-gray-800\">\r\n-                             <%= product.stock %>\r\n-                         </td>\r\n-                         <td class=\"p-4 text-[15px] font-semibold text-gray-800\">\r\n- \r\n-                           <span>&#8377;</span><%= product.price %>\r\n-                         </td>\r\n-                         <td class=\"p-4 text-[15px] font-semibold text-gray-800\">\r\n-                            <%= product.discount %>\r\n-                        </td>\r\n-                         <td class=\"p-4 text-[15px] font-semibold text-gray-800\">\r\n- \r\n-                            <span>&#8377;</span><%= product.finalPrice %>\r\n-                          </td>\r\n-                         <td class=\"p-4 text-[15px] text-center font-semibold text-gray-800\">\r\n-                             \r\n-                              <!-- Block Unblock Button -->\r\n-                <button type=\"button\"\r\n-                class=\"block-unblock-btn w-[100px] px-4 py-2 rounded-lg text-white text-sm tracking-wider font-medium border border-current outline-none bg-<%= product.isActive ? 'orange-700' : 'green-700' %> hover:bg-<%= product.isActive ? 'orange-800' : 'green-800' %> active:bg-<%= product.isActive ? 'orange-700' : 'green-700' %>\"\r\n-                data-product-id=\"<%= product.id %>\"\r\n-                data-active=\"<%= product.isActive %>\">\r\n-                <%= product.isActive ? 'Block' : 'Unblock' %>\r\n-            </button>\r\n- \r\n-                             <!-- Edit Button  -->\r\n-                              <a href=\"/admin/updateproduct/<%= product.id %>\">\r\n-                                 <button type=\"button\"\r\n-                                 class=\"edit-product-btn w-[100px] px-4 py-2  text-white rounded-lg text-sm tracking-wider font-medium border border-current outline-none hover:bg-gray-600 bg-gray-500\">\r\n-                                 Edit\r\n-                             </button>\r\n-                              </a>\r\n-                         </td>\r\n-                     </tr>\r\n-                     <% }) %>\r\n-                 \r\n-             </tbody>\r\n-         </table>\r\n- \r\n-         <div class=\"mt-6 flex justify-between items-center px-8\">\r\n-             <!-- Previous Button -->\r\n-             <% if (currentPage > 1) { %>\r\n-               <a href=\"?page=<%= currentPage - 1 %>&limit=<%= limit %>\" class=\"px-4 py-2 bg-gray-300 text-sm rounded hover:bg-gray-400\">Previous</a>\r\n-             <% } else { %>\r\n-               <span class=\"px-4 py-2 bg-gray-300 text-sm rounded opacity-50\">Previous</span>\r\n-             <% } %>\r\n-           \r\n-             <!-- Page Numbers -->\r\n-             <div class=\"flex space-x-2\">\r\n-               <% for (let i = 1; i <= totalPages; i++) { %>\r\n-                 <% if (i === currentPage) { %>\r\n-                   <span class=\"px-4 py-2 bg-blue-500 text-white text-sm rounded\"><%= i %></span>\r\n-                 <% } else { %>\r\n-                   <a href=\"?page=<%= i %>&limit=<%= limit %>\" class=\"px-4 py-2 bg-gray-300 text-sm rounded hover:bg-gray-400\"><%= i %></a>\r\n-                 <% } %>\r\n-               <% } %>\r\n-             </div>\r\n-           \r\n-             <!-- Next Button -->\r\n-             <% if (currentPage < totalPages) { %>\r\n-               <a href=\"?page=<%= currentPage + 1 %>&limit=<%= limit %>\" class=\"px-4 py-2 bg-gray-300 text-sm rounded hover:bg-gray-400\">Next</a>\r\n-             <% } else { %>\r\n-               <span class=\"px-4 py-2 bg-gray-300 text-sm rounded opacity-50\">Next</span>\r\n-             <% } %>\r\n-           </div>\r\n- \r\n-     </div>\r\n- \r\n-       \r\n-       \r\n-    </div>\r\n- \r\n- \r\n-        <!--Block Unblock Modal -->\r\n- <div id=\"confirmation-modal\" class=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-50\">\r\n-     <div class=\"bg-white p-8 rounded-lg shadow-lg w-[400px]\">\r\n-       <h2 class=\"text-xl font-semibold mb-4\">Confirm Action</h2>\r\n-       <p id=\"modal-message\" class=\"mb-6 text-gray-700\">Are you sure you want to proceed?</p>\r\n-       <div class=\"flex justify-end space-x-4\">\r\n-         <button id=\"cancel-btn\" class=\"px-4 py-2 bg-gray-300 rounded-lg hover:bg-gray-400\">Cancel</button>\r\n-         <button id=\"confirm-btn\" class=\"px-4 py-2 bg-black text-white rounded-lg hover:bg-gray-900\">Confirm</button>\r\n-       </div>\r\n-     </div>\r\n-   </div>\r\n- \r\n-    \r\n-   <script>\r\n- \r\n- document.querySelectorAll('.pagination-link').forEach(link => {\r\n-     link.addEventListener('click', async (event) => {\r\n-       event.preventDefault();\r\n-       const url = event.target.href;\r\n- \r\n-       try {\r\n-         const response = await fetch(url);\r\n-         const html = await response.text();\r\n- \r\n-         // Replace the table and pagination controls with the new content\r\n-         const parser = new DOMParser();\r\n-         const doc = parser.parseFromString(html, 'text/html');\r\n-         const newTable = doc.querySelector('table');\r\n-         const newPagination = doc.querySelector('.pagination-controls');\r\n- \r\n-         document.querySelector('table').innerHTML = newTable.innerHTML;\r\n-         document.querySelector('.pagination-controls').innerHTML = newPagination.innerHTML;\r\n-       } catch (error) {\r\n-         console.error('Error fetching new page:', error);\r\n-       }\r\n-     });\r\n-   });\r\n-   \r\n-// Handle Block Unblock\r\n-document.querySelectorAll('.block-unblock-btn').forEach(button => {\r\n-    button.addEventListener('click', (event) => {\r\n-        const productId = event.target.getAttribute('data-product-id');\r\n-        const isActive = event.target.getAttribute('data-active') === 'true';\r\n-        const modalMessage = document.getElementById('modal-message');\r\n-\r\n-        // Show confirmation modal\r\n-        const modal = document.getElementById('confirmation-modal');\r\n-        modal.classList.remove('hidden');\r\n-\r\n-        // Set the modal message dynamically\r\n-        modalMessage.textContent = isActive\r\n-            ? 'Are you sure you want to block this product?'\r\n-            : 'Are you sure you want to unblock this product?';\r\n-\r\n-        // Handle modal cancel button\r\n-        document.getElementById('cancel-btn').addEventListener('click', () => {\r\n-            modal.classList.add('hidden');\r\n-        });\r\n-\r\n-        // Handle modal confirm button\r\n-        document.getElementById('confirm-btn').onclick = async function () {\r\n-            try {\r\n-                const response = await fetch(`/admin/products/${productId}/block`, {\r\n-                    method: 'POST',\r\n-                    headers: {\r\n-                        'Content-Type': 'application/json'\r\n-                    },\r\n-                    body: JSON.stringify({ active: !isActive }) // Send updated active status to the server\r\n-                });\r\n-\r\n-                if (response.ok) {\r\n-                    // Update the new active status dynamically\r\n-                    const newIsActive = !isActive;\r\n-\r\n-                    // Update button text and attributes\r\n-                    event.target.textContent = newIsActive ? 'Block' : 'Unblock';\r\n-                    event.target.setAttribute('data-active', newIsActive);\r\n-\r\n-                    // Update the button color\r\n-                    event.target.classList.toggle('bg-green-700', !newIsActive);\r\n-                    event.target.classList.toggle('bg-orange-700', newIsActive);\r\n-                    event.target.classList.toggle('hover:bg-green-800', !newIsActive);\r\n-                    event.target.classList.toggle('hover:bg-orange-800', newIsActive);\r\n-\r\n-                    // Close the confirmation modal\r\n-                    modal.classList.add('hidden');\r\n-                } else {\r\n-                    console.error('Failed to block/unblock product');\r\n-                }\r\n-            } catch (error) {\r\n-                console.error('Error:', error);\r\n-            }\r\n-        };\r\n-    });\r\n-});\r\n-\r\n-\r\n- \r\n-   </script>\r\n- \r\n-\r\n- \r\n-    <!-- JavaScript Libraries(needed)-->\r\n-    <script src=\"https://code.jquery.com/jquery-3.4.1.min.js\"></script>\r\n-    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js\"></script>\r\n-     <!-- Cropper JS -->\r\n-     <link href=\"https://unpkg.com/cropperjs/dist/cropper.min.css\" rel=\"stylesheet\">\r\n- \r\n-     <!-- Toastify  -->\r\n-     <link rel=\"stylesheet\" type=\"text/css\" href=\"https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css\">\r\n-        <!-- Tailwind CSS Script -->\r\n-        <script src=\"https://cdn.tailwindcss.com\"></script>\r\n- \r\n-        <!-- SweetAlert -->\r\n-        <script src=\"https://cdn.jsdelivr.net/npm/sweetalert2@11\"></script>\r\n-    \r\n-        <!-- Cropper JS -->\r\n-        <script src=\"https://unpkg.com/cropperjs/dist/cropper.min.js\"></script> \r\n-    \r\n-        <!-- Toastify  -->\r\n-        <script type=\"text/javascript\" src=\"https://cdn.jsdelivr.net/npm/toastify-js\"></script>\r\n  </div>\n\\ No newline at end of file\n"
                },
                {
                    "date": 1736335105973,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -153,9 +153,9 @@\n      <div class=\"bg-white p-8 rounded-lg shadow-lg w-[400px]\">\r\n        <h2 class=\"text-xl font-semibold mb-4\">Confirm Action</h2>\r\n        <p id=\"modal-message\" class=\"mb-6 text-gray-700\">Are you sure you want to proceed?</p>\r\n        <div class=\"flex justify-end space-x-4\">\r\n-         <button id=\"cancel-btn\" class=\"px-4 py-2 bg-gray-300 rounded-lg hover:bg-gray-400\">Cancel</button>\r\n+         <button id=\"cancel-btn\" class=\"px-4 py-2 bg-gray-300 rounded-lg\">Cancel</button>\r\n          <button id=\"confirm-btn\" class=\"px-4 py-2 bg-black text-white rounded-lg hover:bg-gray-900\">Confirm</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n"
                },
                {
                    "date": 1736335128520,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -116,9 +116,9 @@\n  \r\n          <div class=\"mt-6 flex justify-between items-center px-8\">\r\n              <!-- Previous Button -->\r\n              <% if (currentPage > 1) { %>\r\n-               <a href=\"?page=<%= currentPage - 1 %>&limit=<%= limit %>\" class=\"px-4 py-2 bg-gray-300 text-sm rounded hover:bg-gray-400\">Previous</a>\r\n+               <a href=\"?page=<%= currentPage - 1 %>&limit=<%= limit %>\" class=\"px-4 py-2 bg-gray-300 text-sm rounded \">Previous</a>\r\n              <% } else { %>\r\n                <span class=\"px-4 py-2 bg-gray-300 text-sm rounded opacity-50\">Previous</span>\r\n              <% } %>\r\n            \r\n@@ -154,9 +154,9 @@\n        <h2 class=\"text-xl font-semibold mb-4\">Confirm Action</h2>\r\n        <p id=\"modal-message\" class=\"mb-6 text-gray-700\">Are you sure you want to proceed?</p>\r\n        <div class=\"flex justify-end space-x-4\">\r\n          <button id=\"cancel-btn\" class=\"px-4 py-2 bg-gray-300 rounded-lg\">Cancel</button>\r\n-         <button id=\"confirm-btn\" class=\"px-4 py-2 bg-black text-white rounded-lg hover:bg-gray-900\">Confirm</button>\r\n+         <button id=\"confirm-btn\" class=\"px-4 py-2 bg-black text-white rounded-lg \">Confirm</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  \r\n"
                },
                {
                    "date": 1736335133740,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -134,9 +134,9 @@\n              </div>\r\n            \r\n              <!-- Next Button -->\r\n              <% if (currentPage < totalPages) { %>\r\n-               <a href=\"?page=<%= currentPage + 1 %>&limit=<%= limit %>\" class=\"px-4 py-2 bg-gray-300 text-sm rounded hover:bg-gray-400\">Next</a>\r\n+               <a href=\"?page=<%= currentPage + 1 %>&limit=<%= limit %>\" class=\"px-4 py-2 bg-gray-300 text-sm rounded \">Next</a>\r\n              <% } else { %>\r\n                <span class=\"px-4 py-2 bg-gray-300 text-sm rounded opacity-50\">Next</span>\r\n              <% } %>\r\n            </div>\r\n"
                },
                {
                    "date": 1736335143051,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -93,9 +93,9 @@\n                          <td class=\"p-4 text-[15px] text-center font-semibold text-gray-800\">\r\n                              \r\n                               <!-- Block Unblock Button -->\r\n                 <button type=\"button\"\r\n-                class=\"block-unblock-btn w-[100px] px-4 py-2 rounded-lg text-white text-sm tracking-wider font-medium border border-current outline-none bg-<%= product.isActive ? 'orange-700' : 'green-700' %> hover:bg-<%= product.isActive ? 'orange-800' : 'green-800' %> active:bg-<%= product.isActive ? 'orange-700' : 'green-700' %>\"\r\n+                class=\"block-unblock-btn w-[100px] px-4 py-2 rounded-lg text-white text-sm tracking-wider font-medium border border-current outline-none bg-<%= product.isActive ? 'orange-700' : 'green-700' %><%= product.isActive ? 'orange-800' : 'green-800' %> active:bg-<%= product.isActive ? 'orange-700' : 'green-700' %>\"\r\n                 data-product-id=\"<%= product.id %>\"\r\n                 data-active=\"<%= product.isActive %>\">\r\n                 <%= product.isActive ? 'Block' : 'Unblock' %>\r\n             </button>\r\n@@ -127,9 +127,9 @@\n                <% for (let i = 1; i <= totalPages; i++) { %>\r\n                  <% if (i === currentPage) { %>\r\n                    <span class=\"px-4 py-2 bg-blue-500 text-white text-sm rounded\"><%= i %></span>\r\n                  <% } else { %>\r\n-                   <a href=\"?page=<%= i %>&limit=<%= limit %>\" class=\"px-4 py-2 bg-gray-300 text-sm rounded hover:bg-gray-400\"><%= i %></a>\r\n+                   <a href=\"?page=<%= i %>&limit=<%= limit %>\" class=\"px-4 py-2 bg-gray-300 text-sm rounded \"><%= i %></a>\r\n                  <% } %>\r\n                <% } %>\r\n              </div>\r\n            \r\n"
                },
                {
                    "date": 1736335171096,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -21,14 +21,14 @@\n  \r\n       <!-- Add Product button  -->\r\n  \r\n       <div>\r\n-         <a href=\"/admin/addproduct\"><button id=\"add-product-btn\" class=\"absolute right-8 px-4 py-2 bg-blue-800 text-white text-sm tracking-wider font-medium rounded \">Add New Product</button></a>\r\n+         <a href=\"/admin/addproduct\"><button id=\"add-product-btn\" class=\"absolute right-8 px-4 py-2 bg-blue-800 text-white text-sm tracking-wider font-medium rounded hover:bg-blue-900\">Add New Product</button></a>\r\n        </div>\r\n  \r\n      <!-- Table  -->\r\n  \r\n-     <div class=\"font-sans overflow-x-auto ml-64 mr-8 mt-12\">\r\n+     <div class=\"font-sans overflow-x-auto ml-8 mr-8 mt-12\">\r\n          <table class=\"min-w-full bg-white\">\r\n              <thead class=\" bg-gray-200 whitespace-nowrap\">\r\n                  <tr>\r\n                      <th class=\"p-4 text-left text-xs font-bold text-gray-800 w-[3%]\">\r\n@@ -63,9 +63,9 @@\n              <tbody class=\"whitespace-nowrap\">\r\n  \r\n                  <% products.forEach((product, index) => { %>\r\n  \r\n-                     <tr class=\"bg-gray-50\">\r\n+                     <tr class=\"hover:bg-gray-50\">\r\n                          <td class=\"p-4 text-[15px] font-semibold text-gray-800\">\r\n                              <%= ((currentPage - 1) * limit) + index + 1 %>\r\n                          </td>\r\n                          <td class=\"p-4 text-[15px] font-semibold text-gray-800\">\r\n@@ -93,9 +93,9 @@\n                          <td class=\"p-4 text-[15px] text-center font-semibold text-gray-800\">\r\n                              \r\n                               <!-- Block Unblock Button -->\r\n                 <button type=\"button\"\r\n-                class=\"block-unblock-btn w-[100px] px-4 py-2 rounded-lg text-white text-sm tracking-wider font-medium border border-current outline-none bg-<%= product.isActive ? 'orange-700' : 'green-700' %><%= product.isActive ? 'orange-800' : 'green-800' %> active:bg-<%= product.isActive ? 'orange-700' : 'green-700' %>\"\r\n+                class=\"block-unblock-btn w-[100px] px-4 py-2 rounded-lg text-white text-sm tracking-wider font-medium border border-current outline-none bg-<%= product.isActive ? 'orange-700' : 'green-700' %> hover:bg-<%= product.isActive ? 'orange-800' : 'green-800' %> active:bg-<%= product.isActive ? 'orange-700' : 'green-700' %>\"\r\n                 data-product-id=\"<%= product.id %>\"\r\n                 data-active=\"<%= product.isActive %>\">\r\n                 <%= product.isActive ? 'Block' : 'Unblock' %>\r\n             </button>\r\n@@ -116,9 +116,9 @@\n  \r\n          <div class=\"mt-6 flex justify-between items-center px-8\">\r\n              <!-- Previous Button -->\r\n              <% if (currentPage > 1) { %>\r\n-               <a href=\"?page=<%= currentPage - 1 %>&limit=<%= limit %>\" class=\"px-4 py-2 bg-gray-300 text-sm rounded \">Previous</a>\r\n+               <a href=\"?page=<%= currentPage - 1 %>&limit=<%= limit %>\" class=\"px-4 py-2 bg-gray-300 text-sm rounded hover:bg-gray-400\">Previous</a>\r\n              <% } else { %>\r\n                <span class=\"px-4 py-2 bg-gray-300 text-sm rounded opacity-50\">Previous</span>\r\n              <% } %>\r\n            \r\n@@ -127,16 +127,16 @@\n                <% for (let i = 1; i <= totalPages; i++) { %>\r\n                  <% if (i === currentPage) { %>\r\n                    <span class=\"px-4 py-2 bg-blue-500 text-white text-sm rounded\"><%= i %></span>\r\n                  <% } else { %>\r\n-                   <a href=\"?page=<%= i %>&limit=<%= limit %>\" class=\"px-4 py-2 bg-gray-300 text-sm rounded \"><%= i %></a>\r\n+                   <a href=\"?page=<%= i %>&limit=<%= limit %>\" class=\"px-4 py-2 bg-gray-300 text-sm rounded hover:bg-gray-400\"><%= i %></a>\r\n                  <% } %>\r\n                <% } %>\r\n              </div>\r\n            \r\n              <!-- Next Button -->\r\n              <% if (currentPage < totalPages) { %>\r\n-               <a href=\"?page=<%= currentPage + 1 %>&limit=<%= limit %>\" class=\"px-4 py-2 bg-gray-300 text-sm rounded \">Next</a>\r\n+               <a href=\"?page=<%= currentPage + 1 %>&limit=<%= limit %>\" class=\"px-4 py-2 bg-gray-300 text-sm rounded hover:bg-gray-400\">Next</a>\r\n              <% } else { %>\r\n                <span class=\"px-4 py-2 bg-gray-300 text-sm rounded opacity-50\">Next</span>\r\n              <% } %>\r\n            </div>\r\n@@ -153,10 +153,10 @@\n      <div class=\"bg-white p-8 rounded-lg shadow-lg w-[400px]\">\r\n        <h2 class=\"text-xl font-semibold mb-4\">Confirm Action</h2>\r\n        <p id=\"modal-message\" class=\"mb-6 text-gray-700\">Are you sure you want to proceed?</p>\r\n        <div class=\"flex justify-end space-x-4\">\r\n-         <button id=\"cancel-btn\" class=\"px-4 py-2 bg-gray-300 rounded-lg\">Cancel</button>\r\n-         <button id=\"confirm-btn\" class=\"px-4 py-2 bg-black text-white rounded-lg \">Confirm</button>\r\n+         <button id=\"cancel-btn\" class=\"px-4 py-2 bg-gray-300 rounded-lg hover:bg-gray-400\">Cancel</button>\r\n+         <button id=\"confirm-btn\" class=\"px-4 py-2 bg-black text-white rounded-lg hover:bg-gray-900\">Confirm</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  \r\n"
                },
                {
                    "date": 1736335457771,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,9 +3,9 @@\n     <!-- include the sidebar partial  -->\r\n     <%- include('sidebar') %>\r\n  \r\n  \r\n-     <!-- Navbar  -->\r\n+     Navbar \r\n     <div class=\"fixed top-0 left-0 right-0 z-10 flex items-center justify-between p-8 h-20 shadow-md ml-64 bg-gray-100\">\r\n      <div>\r\n          <h2 class=\"text-lg font-semibold\">Products</h2>\r\n      </div>\r\n@@ -26,9 +26,9 @@\n        </div>\r\n  \r\n      <!-- Table  -->\r\n  \r\n-     <div class=\"font-sans overflow-x-auto ml-8 mr-8 mt-12\">\r\n+     <div class=\"font-sans overflow-x-auto ml-64 mr-8 mt-12\">\r\n          <table class=\"min-w-full bg-white\">\r\n              <thead class=\" bg-gray-200 whitespace-nowrap\">\r\n                  <tr>\r\n                      <th class=\"p-4 text-left text-xs font-bold text-gray-800 w-[3%]\">\r\n@@ -63,9 +63,9 @@\n              <tbody class=\"whitespace-nowrap\">\r\n  \r\n                  <% products.forEach((product, index) => { %>\r\n  \r\n-                     <tr class=\"hover:bg-gray-50\">\r\n+                     <tr class=\"bg-gray-50\">\r\n                          <td class=\"p-4 text-[15px] font-semibold text-gray-800\">\r\n                              <%= ((currentPage - 1) * limit) + index + 1 %>\r\n                          </td>\r\n                          <td class=\"p-4 text-[15px] font-semibold text-gray-800\">\r\n"
                },
                {
                    "date": 1736335470014,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,9 +3,9 @@\n     <!-- include the sidebar partial  -->\r\n     <%- include('sidebar') %>\r\n  \r\n  \r\n-     Navbar \r\n+     <!-- Navbar \r\n     <div class=\"fixed top-0 left-0 right-0 z-10 flex items-center justify-between p-8 h-20 shadow-md ml-64 bg-gray-100\">\r\n      <div>\r\n          <h2 class=\"text-lg font-semibold\">Products</h2>\r\n      </div>\r\n@@ -268,5 +268,5 @@\n         <script src=\"https://unpkg.com/cropperjs/dist/cropper.min.js\"></script> \r\n     \r\n         <!-- Toastify  -->\r\n         <script type=\"text/javascript\" src=\"https://cdn.jsdelivr.net/npm/toastify-js\"></script>\r\n- </div>\n\\ No newline at end of file\n+ </div> -->\n\\ No newline at end of file\n"
                },
                {
                    "date": 1736335476444,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,9 +3,9 @@\n     <!-- include the sidebar partial  -->\r\n     <%- include('sidebar') %>\r\n  \r\n  \r\n-     <!-- Navbar \r\n+     Navbar \r\n     <div class=\"fixed top-0 left-0 right-0 z-10 flex items-center justify-between p-8 h-20 shadow-md ml-64 bg-gray-100\">\r\n      <div>\r\n          <h2 class=\"text-lg font-semibold\">Products</h2>\r\n      </div>\r\n@@ -268,5 +268,5 @@\n         <script src=\"https://unpkg.com/cropperjs/dist/cropper.min.js\"></script> \r\n     \r\n         <!-- Toastify  -->\r\n         <script type=\"text/javascript\" src=\"https://cdn.jsdelivr.net/npm/toastify-js\"></script>\r\n- </div> -->\n\\ No newline at end of file\n+ </div>\n\\ No newline at end of file\n"
                },
                {
                    "date": 1736335484628,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,9 +3,9 @@\n     <!-- include the sidebar partial  -->\r\n     <%- include('sidebar') %>\r\n  \r\n  \r\n-     Navbar \r\n+     <!-- Navbar \r\n     <div class=\"fixed top-0 left-0 right-0 z-10 flex items-center justify-between p-8 h-20 shadow-md ml-64 bg-gray-100\">\r\n      <div>\r\n          <h2 class=\"text-lg font-semibold\">Products</h2>\r\n      </div>\r\n@@ -268,5 +268,5 @@\n         <script src=\"https://unpkg.com/cropperjs/dist/cropper.min.js\"></script> \r\n     \r\n         <!-- Toastify  -->\r\n         <script type=\"text/javascript\" src=\"https://cdn.jsdelivr.net/npm/toastify-js\"></script>\r\n- </div>\n\\ No newline at end of file\n+ </div> -->\n\\ No newline at end of file\n"
                },
                {
                    "date": 1736335496434,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,271 +2,5 @@\n \r\n     <!-- include the sidebar partial  -->\r\n     <%- include('sidebar') %>\r\n  \r\n- \r\n-     <!-- Navbar \r\n-    <div class=\"fixed top-0 left-0 right-0 z-10 flex items-center justify-between p-8 h-20 shadow-md ml-64 bg-gray-100\">\r\n-     <div>\r\n-         <h2 class=\"text-lg font-semibold\">Products</h2>\r\n-     </div>\r\n-     <div>\r\n-         <form action=\"/admin/users\" method=\"GET\">\r\n-             <input type=\"text\" name=\"search\" placeholder=\"Search\" class=\"p-2 w-[500px] h-10 rounded bg-gray-200\">\r\n-         </form>\r\n-     </div>\r\n-   </div>\r\n- \r\n-    <div class=\" pt-24 pb-16\">\r\n-      \r\n- \r\n-      <!-- Add Product button  -->\r\n- \r\n-      <div>\r\n-         <a href=\"/admin/addproduct\"><button id=\"add-product-btn\" class=\"absolute right-8 px-4 py-2 bg-blue-800 text-white text-sm tracking-wider font-medium rounded hover:bg-blue-900\">Add New Product</button></a>\r\n-       </div>\r\n- \r\n-     <!-- Table  -->\r\n- \r\n-     <div class=\"font-sans overflow-x-auto ml-64 mr-8 mt-12\">\r\n-         <table class=\"min-w-full bg-white\">\r\n-             <thead class=\" bg-gray-200 whitespace-nowrap\">\r\n-                 <tr>\r\n-                     <th class=\"p-4 text-left text-xs font-bold text-gray-800 w-[3%]\">\r\n-                         SI\r\n-                     </th>\r\n-                     <th class=\"p-4 text-left text-xs font-bold w-[15%]\">\r\n-                         Product Name\r\n-                     </th>\r\n-                     <th class=\"p-4 text-left text-xs font-bold w-[11%]\">\r\n-                         Category\r\n-                     </th>\r\n-                    \r\n-                     <th class=\"p-4 text-left text-xs font-bold w-[10%]\">\r\n-                         Stock\r\n-                     </th>\r\n-                    \r\n-                     <th class=\"p-4 text-left text-xs font-bold w-[10%]\">\r\n-                         Price\r\n-                     </th>\r\n-                     <th class=\"p-4 text-left text-xs font-bold w-[10%]\">\r\n-                        Discount\r\n-                    </th>\r\n-                    <th class=\"p-4 text-left text-xs font-bold w-[10%]\">\r\n-                        Final Price\r\n-                    </th>\r\n-                     <th class=\"p-4 text-center text-xs font-bold w-[10%]\">\r\n-                         Action\r\n-                     </th>\r\n-                 </tr>\r\n-             </thead>\r\n- \r\n-             <tbody class=\"whitespace-nowrap\">\r\n- \r\n-                 <% products.forEach((product, index) => { %>\r\n- \r\n-                     <tr class=\"bg-gray-50\">\r\n-                         <td class=\"p-4 text-[15px] font-semibold text-gray-800\">\r\n-                             <%= ((currentPage - 1) * limit) + index + 1 %>\r\n-                         </td>\r\n-                         <td class=\"p-4 text-[15px] font-semibold text-gray-800\">\r\n-                             <%= product.name %>\r\n-                         </td>\r\n-                         <td class=\"p-4 text-[15px] font-semibold text-gray-800\">\r\n-                             <%= product.category.name %>\r\n-                         </td>\r\n-                        \r\n-                        \r\n-                         <td class=\"p-4 text-[15px] font-semibold text-gray-800\">\r\n-                             <%= product.stock %>\r\n-                         </td>\r\n-                         <td class=\"p-4 text-[15px] font-semibold text-gray-800\">\r\n- \r\n-                           <span>&#8377;</span><%= product.price %>\r\n-                         </td>\r\n-                         <td class=\"p-4 text-[15px] font-semibold text-gray-800\">\r\n-                            <%= product.discount %>\r\n-                        </td>\r\n-                         <td class=\"p-4 text-[15px] font-semibold text-gray-800\">\r\n- \r\n-                            <span>&#8377;</span><%= product.finalPrice %>\r\n-                          </td>\r\n-                         <td class=\"p-4 text-[15px] text-center font-semibold text-gray-800\">\r\n-                             \r\n-                              <!-- Block Unblock Button -->\r\n-                <button type=\"button\"\r\n-                class=\"block-unblock-btn w-[100px] px-4 py-2 rounded-lg text-white text-sm tracking-wider font-medium border border-current outline-none bg-<%= product.isActive ? 'orange-700' : 'green-700' %> hover:bg-<%= product.isActive ? 'orange-800' : 'green-800' %> active:bg-<%= product.isActive ? 'orange-700' : 'green-700' %>\"\r\n-                data-product-id=\"<%= product.id %>\"\r\n-                data-active=\"<%= product.isActive %>\">\r\n-                <%= product.isActive ? 'Block' : 'Unblock' %>\r\n-            </button>\r\n- \r\n-                             <!-- Edit Button  -->\r\n-                              <a href=\"/admin/updateproduct/<%= product.id %>\">\r\n-                                 <button type=\"button\"\r\n-                                 class=\"edit-product-btn w-[100px] px-4 py-2  text-white rounded-lg text-sm tracking-wider font-medium border border-current outline-none hover:bg-gray-600 bg-gray-500\">\r\n-                                 Edit\r\n-                             </button>\r\n-                              </a>\r\n-                         </td>\r\n-                     </tr>\r\n-                     <% }) %>\r\n-                 \r\n-             </tbody>\r\n-         </table>\r\n- \r\n-         <div class=\"mt-6 flex justify-between items-center px-8\">\r\n-             <!-- Previous Button -->\r\n-             <% if (currentPage > 1) { %>\r\n-               <a href=\"?page=<%= currentPage - 1 %>&limit=<%= limit %>\" class=\"px-4 py-2 bg-gray-300 text-sm rounded hover:bg-gray-400\">Previous</a>\r\n-             <% } else { %>\r\n-               <span class=\"px-4 py-2 bg-gray-300 text-sm rounded opacity-50\">Previous</span>\r\n-             <% } %>\r\n-           \r\n-             <!-- Page Numbers -->\r\n-             <div class=\"flex space-x-2\">\r\n-               <% for (let i = 1; i <= totalPages; i++) { %>\r\n-                 <% if (i === currentPage) { %>\r\n-                   <span class=\"px-4 py-2 bg-blue-500 text-white text-sm rounded\"><%= i %></span>\r\n-                 <% } else { %>\r\n-                   <a href=\"?page=<%= i %>&limit=<%= limit %>\" class=\"px-4 py-2 bg-gray-300 text-sm rounded hover:bg-gray-400\"><%= i %></a>\r\n-                 <% } %>\r\n-               <% } %>\r\n-             </div>\r\n-           \r\n-             <!-- Next Button -->\r\n-             <% if (currentPage < totalPages) { %>\r\n-               <a href=\"?page=<%= currentPage + 1 %>&limit=<%= limit %>\" class=\"px-4 py-2 bg-gray-300 text-sm rounded hover:bg-gray-400\">Next</a>\r\n-             <% } else { %>\r\n-               <span class=\"px-4 py-2 bg-gray-300 text-sm rounded opacity-50\">Next</span>\r\n-             <% } %>\r\n-           </div>\r\n- \r\n-     </div>\r\n- \r\n-       \r\n-       \r\n-    </div>\r\n- \r\n- \r\n-        <!--Block Unblock Modal -->\r\n- <div id=\"confirmation-modal\" class=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-50\">\r\n-     <div class=\"bg-white p-8 rounded-lg shadow-lg w-[400px]\">\r\n-       <h2 class=\"text-xl font-semibold mb-4\">Confirm Action</h2>\r\n-       <p id=\"modal-message\" class=\"mb-6 text-gray-700\">Are you sure you want to proceed?</p>\r\n-       <div class=\"flex justify-end space-x-4\">\r\n-         <button id=\"cancel-btn\" class=\"px-4 py-2 bg-gray-300 rounded-lg hover:bg-gray-400\">Cancel</button>\r\n-         <button id=\"confirm-btn\" class=\"px-4 py-2 bg-black text-white rounded-lg hover:bg-gray-900\">Confirm</button>\r\n-       </div>\r\n-     </div>\r\n-   </div>\r\n- \r\n-    \r\n-   <script>\r\n- \r\n- document.querySelectorAll('.pagination-link').forEach(link => {\r\n-     link.addEventListener('click', async (event) => {\r\n-       event.preventDefault();\r\n-       const url = event.target.href;\r\n- \r\n-       try {\r\n-         const response = await fetch(url);\r\n-         const html = await response.text();\r\n- \r\n-         // Replace the table and pagination controls with the new content\r\n-         const parser = new DOMParser();\r\n-         const doc = parser.parseFromString(html, 'text/html');\r\n-         const newTable = doc.querySelector('table');\r\n-         const newPagination = doc.querySelector('.pagination-controls');\r\n- \r\n-         document.querySelector('table').innerHTML = newTable.innerHTML;\r\n-         document.querySelector('.pagination-controls').innerHTML = newPagination.innerHTML;\r\n-       } catch (error) {\r\n-         console.error('Error fetching new page:', error);\r\n-       }\r\n-     });\r\n-   });\r\n-   \r\n-// Handle Block Unblock\r\n-document.querySelectorAll('.block-unblock-btn').forEach(button => {\r\n-    button.addEventListener('click', (event) => {\r\n-        const productId = event.target.getAttribute('data-product-id');\r\n-        const isActive = event.target.getAttribute('data-active') === 'true';\r\n-        const modalMessage = document.getElementById('modal-message');\r\n-\r\n-        // Show confirmation modal\r\n-        const modal = document.getElementById('confirmation-modal');\r\n-        modal.classList.remove('hidden');\r\n-\r\n-        // Set the modal message dynamically\r\n-        modalMessage.textContent = isActive\r\n-            ? 'Are you sure you want to block this product?'\r\n-            : 'Are you sure you want to unblock this product?';\r\n-\r\n-        // Handle modal cancel button\r\n-        document.getElementById('cancel-btn').addEventListener('click', () => {\r\n-            modal.classList.add('hidden');\r\n-        });\r\n-\r\n-        // Handle modal confirm button\r\n-        document.getElementById('confirm-btn').onclick = async function () {\r\n-            try {\r\n-                const response = await fetch(`/admin/products/${productId}/block`, {\r\n-                    method: 'POST',\r\n-                    headers: {\r\n-                        'Content-Type': 'application/json'\r\n-                    },\r\n-                    body: JSON.stringify({ active: !isActive }) // Send updated active status to the server\r\n-                });\r\n-\r\n-                if (response.ok) {\r\n-                    // Update the new active status dynamically\r\n-                    const newIsActive = !isActive;\r\n-\r\n-                    // Update button text and attributes\r\n-                    event.target.textContent = newIsActive ? 'Block' : 'Unblock';\r\n-                    event.target.setAttribute('data-active', newIsActive);\r\n-\r\n-                    // Update the button color\r\n-                    event.target.classList.toggle('bg-green-700', !newIsActive);\r\n-                    event.target.classList.toggle('bg-orange-700', newIsActive);\r\n-                    event.target.classList.toggle('hover:bg-green-800', !newIsActive);\r\n-                    event.target.classList.toggle('hover:bg-orange-800', newIsActive);\r\n-\r\n-                    // Close the confirmation modal\r\n-                    modal.classList.add('hidden');\r\n-                } else {\r\n-                    console.error('Failed to block/unblock product');\r\n-                }\r\n-            } catch (error) {\r\n-                console.error('Error:', error);\r\n-            }\r\n-        };\r\n-    });\r\n-});\r\n-\r\n-\r\n- \r\n-   </script>\r\n- \r\n-\r\n- \r\n-    <!-- JavaScript Libraries(needed)-->\r\n-    <script src=\"https://code.jquery.com/jquery-3.4.1.min.js\"></script>\r\n-    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js\"></script>\r\n-     <!-- Cropper JS -->\r\n-     <link href=\"https://unpkg.com/cropperjs/dist/cropper.min.css\" rel=\"stylesheet\">\r\n- \r\n-     <!-- Toastify  -->\r\n-     <link rel=\"stylesheet\" type=\"text/css\" href=\"https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css\">\r\n-        <!-- Tailwind CSS Script -->\r\n-        <script src=\"https://cdn.tailwindcss.com\"></script>\r\n- \r\n-        <!-- SweetAlert -->\r\n-        <script src=\"https://cdn.jsdelivr.net/npm/sweetalert2@11\"></script>\r\n-    \r\n-        <!-- Cropper JS -->\r\n-        <script src=\"https://unpkg.com/cropperjs/dist/cropper.min.js\"></script> \r\n-    \r\n-        <!-- Toastify  -->\r\n-        <script type=\"text/javascript\" src=\"https://cdn.jsdelivr.net/npm/toastify-js\"></script>\r\n- </div> -->\n\\ No newline at end of file\n+ \n\\ No newline at end of file\n"
                },
                {
                    "date": 1736335509391,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,5 +2,271 @@\n \r\n     <!-- include the sidebar partial  -->\r\n     <%- include('sidebar') %>\r\n  \r\n- \n\\ No newline at end of file\n+ \r\n+     <!-- Navbar \r\n+    <div class=\"fixed top-0 left-0 right-0 z-10 flex items-center justify-between p-8 h-20 shadow-md ml-64 bg-gray-100\">\r\n+     <div>\r\n+         <h2 class=\"text-lg font-semibold\">Products</h2>\r\n+     </div>\r\n+     <div>\r\n+         <form action=\"/admin/users\" method=\"GET\">\r\n+             <input type=\"text\" name=\"search\" placeholder=\"Search\" class=\"p-2 w-[500px] h-10 rounded bg-gray-200\">\r\n+         </form>\r\n+     </div>\r\n+   </div>\r\n+ \r\n+    <div class=\" pt-24 pb-16\">\r\n+      \r\n+ \r\n+      <!-- Add Product button  -->\r\n+ \r\n+      <div>\r\n+         <a href=\"/admin/addproduct\"><button id=\"add-product-btn\" class=\"absolute right-8 px-4 py-2 bg-blue-800 text-white text-sm tracking-wider font-medium rounded hover:bg-blue-900\">Add New Product</button></a>\r\n+       </div>\r\n+ \r\n+     <!-- Table  -->\r\n+ \r\n+     <div class=\"font-sans overflow-x-auto ml-64 mr-8 mt-12\">\r\n+         <table class=\"min-w-full bg-white\">\r\n+             <thead class=\" bg-gray-200 whitespace-nowrap\">\r\n+                 <tr>\r\n+                     <th class=\"p-4 text-left text-xs font-bold text-gray-800 w-[3%]\">\r\n+                         SI\r\n+                     </th>\r\n+                     <th class=\"p-4 text-left text-xs font-bold w-[15%]\">\r\n+                         Product Name\r\n+                     </th>\r\n+                     <th class=\"p-4 text-left text-xs font-bold w-[11%]\">\r\n+                         Category\r\n+                     </th>\r\n+                    \r\n+                     <th class=\"p-4 text-left text-xs font-bold w-[10%]\">\r\n+                         Stock\r\n+                     </th>\r\n+                    \r\n+                     <th class=\"p-4 text-left text-xs font-bold w-[10%]\">\r\n+                         Price\r\n+                     </th>\r\n+                     <th class=\"p-4 text-left text-xs font-bold w-[10%]\">\r\n+                        Discount\r\n+                    </th>\r\n+                    <th class=\"p-4 text-left text-xs font-bold w-[10%]\">\r\n+                        Final Price\r\n+                    </th>\r\n+                     <th class=\"p-4 text-center text-xs font-bold w-[10%]\">\r\n+                         Action\r\n+                     </th>\r\n+                 </tr>\r\n+             </thead>\r\n+ \r\n+             <tbody class=\"whitespace-nowrap\">\r\n+ \r\n+                 <% products.forEach((product, index) => { %>\r\n+ \r\n+                     <tr class=\"bg-gray-50\">\r\n+                         <td class=\"p-4 text-[15px] font-semibold text-gray-800\">\r\n+                             <%= ((currentPage - 1) * limit) + index + 1 %>\r\n+                         </td>\r\n+                         <td class=\"p-4 text-[15px] font-semibold text-gray-800\">\r\n+                             <%= product.name %>\r\n+                         </td>\r\n+                         <td class=\"p-4 text-[15px] font-semibold text-gray-800\">\r\n+                             <%= product.category.name %>\r\n+                         </td>\r\n+                        \r\n+                        \r\n+                         <td class=\"p-4 text-[15px] font-semibold text-gray-800\">\r\n+                             <%= product.stock %>\r\n+                         </td>\r\n+                         <td class=\"p-4 text-[15px] font-semibold text-gray-800\">\r\n+ \r\n+                           <span>&#8377;</span><%= product.price %>\r\n+                         </td>\r\n+                         <td class=\"p-4 text-[15px] font-semibold text-gray-800\">\r\n+                            <%= product.discount %>\r\n+                        </td>\r\n+                         <td class=\"p-4 text-[15px] font-semibold text-gray-800\">\r\n+ \r\n+                            <span>&#8377;</span><%= product.finalPrice %>\r\n+                          </td>\r\n+                         <td class=\"p-4 text-[15px] text-center font-semibold text-gray-800\">\r\n+                             \r\n+                              <!-- Block Unblock Button -->\r\n+                <button type=\"button\"\r\n+                class=\"block-unblock-btn w-[100px] px-4 py-2 rounded-lg text-white text-sm tracking-wider font-medium border border-current outline-none bg-<%= product.isActive ? 'orange-700' : 'green-700' %> hover:bg-<%= product.isActive ? 'orange-800' : 'green-800' %> active:bg-<%= product.isActive ? 'orange-700' : 'green-700' %>\"\r\n+                data-product-id=\"<%= product.id %>\"\r\n+                data-active=\"<%= product.isActive %>\">\r\n+                <%= product.isActive ? 'Block' : 'Unblock' %>\r\n+            </button>\r\n+ \r\n+                             <!-- Edit Button  -->\r\n+                              <a href=\"/admin/updateproduct/<%= product.id %>\">\r\n+                                 <button type=\"button\"\r\n+                                 class=\"edit-product-btn w-[100px] px-4 py-2  text-white rounded-lg text-sm tracking-wider font-medium border border-current outline-none hover:bg-gray-600 bg-gray-500\">\r\n+                                 Edit\r\n+                             </button>\r\n+                              </a>\r\n+                         </td>\r\n+                     </tr>\r\n+                     <% }) %>\r\n+                 \r\n+             </tbody>\r\n+         </table>\r\n+ \r\n+         <div class=\"mt-6 flex justify-between items-center px-8\">\r\n+             <!-- Previous Button -->\r\n+             <% if (currentPage > 1) { %>\r\n+               <a href=\"?page=<%= currentPage - 1 %>&limit=<%= limit %>\" class=\"px-4 py-2 bg-gray-300 text-sm rounded hover:bg-gray-400\">Previous</a>\r\n+             <% } else { %>\r\n+               <span class=\"px-4 py-2 bg-gray-300 text-sm rounded opacity-50\">Previous</span>\r\n+             <% } %>\r\n+           \r\n+             <!-- Page Numbers -->\r\n+             <div class=\"flex space-x-2\">\r\n+               <% for (let i = 1; i <= totalPages; i++) { %>\r\n+                 <% if (i === currentPage) { %>\r\n+                   <span class=\"px-4 py-2 bg-blue-500 text-white text-sm rounded\"><%= i %></span>\r\n+                 <% } else { %>\r\n+                   <a href=\"?page=<%= i %>&limit=<%= limit %>\" class=\"px-4 py-2 bg-gray-300 text-sm rounded hover:bg-gray-400\"><%= i %></a>\r\n+                 <% } %>\r\n+               <% } %>\r\n+             </div>\r\n+           \r\n+             <!-- Next Button -->\r\n+             <% if (currentPage < totalPages) { %>\r\n+               <a href=\"?page=<%= currentPage + 1 %>&limit=<%= limit %>\" class=\"px-4 py-2 bg-gray-300 text-sm rounded hover:bg-gray-400\">Next</a>\r\n+             <% } else { %>\r\n+               <span class=\"px-4 py-2 bg-gray-300 text-sm rounded opacity-50\">Next</span>\r\n+             <% } %>\r\n+           </div>\r\n+ \r\n+     </div>\r\n+ \r\n+       \r\n+       \r\n+    </div>\r\n+ \r\n+ \r\n+        <!--Block Unblock Modal -->\r\n+ <div id=\"confirmation-modal\" class=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-50\">\r\n+     <div class=\"bg-white p-8 rounded-lg shadow-lg w-[400px]\">\r\n+       <h2 class=\"text-xl font-semibold mb-4\">Confirm Action</h2>\r\n+       <p id=\"modal-message\" class=\"mb-6 text-gray-700\">Are you sure you want to proceed?</p>\r\n+       <div class=\"flex justify-end space-x-4\">\r\n+         <button id=\"cancel-btn\" class=\"px-4 py-2 bg-gray-300 rounded-lg hover:bg-gray-400\">Cancel</button>\r\n+         <button id=\"confirm-btn\" class=\"px-4 py-2 bg-black text-white rounded-lg hover:bg-gray-900\">Confirm</button>\r\n+       </div>\r\n+     </div>\r\n+   </div>\r\n+ \r\n+    \r\n+   <script>\r\n+ \r\n+ document.querySelectorAll('.pagination-link').forEach(link => {\r\n+     link.addEventListener('click', async (event) => {\r\n+       event.preventDefault();\r\n+       const url = event.target.href;\r\n+ \r\n+       try {\r\n+         const response = await fetch(url);\r\n+         const html = await response.text();\r\n+ \r\n+         // Replace the table and pagination controls with the new content\r\n+         const parser = new DOMParser();\r\n+         const doc = parser.parseFromString(html, 'text/html');\r\n+         const newTable = doc.querySelector('table');\r\n+         const newPagination = doc.querySelector('.pagination-controls');\r\n+ \r\n+         document.querySelector('table').innerHTML = newTable.innerHTML;\r\n+         document.querySelector('.pagination-controls').innerHTML = newPagination.innerHTML;\r\n+       } catch (error) {\r\n+         console.error('Error fetching new page:', error);\r\n+       }\r\n+     });\r\n+   });\r\n+   \r\n+// Handle Block Unblock\r\n+document.querySelectorAll('.block-unblock-btn').forEach(button => {\r\n+    button.addEventListener('click', (event) => {\r\n+        const productId = event.target.getAttribute('data-product-id');\r\n+        const isActive = event.target.getAttribute('data-active') === 'true';\r\n+        const modalMessage = document.getElementById('modal-message');\r\n+\r\n+        // Show confirmation modal\r\n+        const modal = document.getElementById('confirmation-modal');\r\n+        modal.classList.remove('hidden');\r\n+\r\n+        // Set the modal message dynamically\r\n+        modalMessage.textContent = isActive\r\n+            ? 'Are you sure you want to block this product?'\r\n+            : 'Are you sure you want to unblock this product?';\r\n+\r\n+        // Handle modal cancel button\r\n+        document.getElementById('cancel-btn').addEventListener('click', () => {\r\n+            modal.classList.add('hidden');\r\n+        });\r\n+\r\n+        // Handle modal confirm button\r\n+        document.getElementById('confirm-btn').onclick = async function () {\r\n+            try {\r\n+                const response = await fetch(`/admin/products/${productId}/block`, {\r\n+                    method: 'POST',\r\n+                    headers: {\r\n+                        'Content-Type': 'application/json'\r\n+                    },\r\n+                    body: JSON.stringify({ active: !isActive }) // Send updated active status to the server\r\n+                });\r\n+\r\n+                if (response.ok) {\r\n+                    // Update the new active status dynamically\r\n+                    const newIsActive = !isActive;\r\n+\r\n+                    // Update button text and attributes\r\n+                    event.target.textContent = newIsActive ? 'Block' : 'Unblock';\r\n+                    event.target.setAttribute('data-active', newIsActive);\r\n+\r\n+                    // Update the button color\r\n+                    event.target.classList.toggle('bg-green-700', !newIsActive);\r\n+                    event.target.classList.toggle('bg-orange-700', newIsActive);\r\n+                    event.target.classList.toggle('hover:bg-green-800', !newIsActive);\r\n+                    event.target.classList.toggle('hover:bg-orange-800', newIsActive);\r\n+\r\n+                    // Close the confirmation modal\r\n+                    modal.classList.add('hidden');\r\n+                } else {\r\n+                    console.error('Failed to block/unblock product');\r\n+                }\r\n+            } catch (error) {\r\n+                console.error('Error:', error);\r\n+            }\r\n+        };\r\n+    });\r\n+});\r\n+\r\n+\r\n+ \r\n+   </script>\r\n+ \r\n+\r\n+ \r\n+    <!-- JavaScript Libraries(needed)-->\r\n+    <script src=\"https://code.jquery.com/jquery-3.4.1.min.js\"></script>\r\n+    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js\"></script>\r\n+     <!-- Cropper JS -->\r\n+     <link href=\"https://unpkg.com/cropperjs/dist/cropper.min.css\" rel=\"stylesheet\">\r\n+ \r\n+     <!-- Toastify  -->\r\n+     <link rel=\"stylesheet\" type=\"text/css\" href=\"https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css\">\r\n+        <!-- Tailwind CSS Script -->\r\n+        <script src=\"https://cdn.tailwindcss.com\"></script>\r\n+ \r\n+        <!-- SweetAlert -->\r\n+        <script src=\"https://cdn.jsdelivr.net/npm/sweetalert2@11\"></script>\r\n+    \r\n+        <!-- Cropper JS -->\r\n+        <script src=\"https://unpkg.com/cropperjs/dist/cropper.min.js\"></script> \r\n+    \r\n+        <!-- Toastify  -->\r\n+        <script type=\"text/javascript\" src=\"https://cdn.jsdelivr.net/npm/toastify-js\"></script>\r\n+ </div> -->\n\\ No newline at end of file\n"
                },
                {
                    "date": 1736335549746,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,271 +2,5 @@\n \r\n     <!-- include the sidebar partial  -->\r\n     <%- include('sidebar') %>\r\n  \r\n- \r\n-     Navbar \r\n-    <div class=\"fixed top-0 left-0 right-0 z-10 flex items-center justify-between p-8 h-20 shadow-md ml-64 bg-gray-100\">\r\n-     <div>\r\n-         <h2 class=\"text-lg font-semibold\">Products</h2>\r\n-     </div>\r\n-     <div>\r\n-         <form action=\"/admin/users\" method=\"GET\">\r\n-             <input type=\"text\" name=\"search\" placeholder=\"Search\" class=\"p-2 w-[500px] h-10 rounded bg-gray-200\">\r\n-         </form>\r\n-     </div>\r\n-   </div>\r\n- \r\n-    <div class=\" pt-24 pb-16\">\r\n-      \r\n- \r\n-      <!-- Add Product button  -->\r\n- \r\n-      <div>\r\n-         <a href=\"/admin/addproduct\"><button id=\"add-product-btn\" class=\"absolute right-8 px-4 py-2 bg-blue-800 text-white text-sm tracking-wider font-medium rounded hover:bg-blue-900\">Add New Product</button></a>\r\n-       </div>\r\n- \r\n-     <!-- Table  -->\r\n- \r\n-     <div class=\"font-sans overflow-x-auto ml-64 mr-8 mt-12\">\r\n-         <table class=\"min-w-full bg-white\">\r\n-             <thead class=\" bg-gray-200 whitespace-nowrap\">\r\n-                 <tr>\r\n-                     <th class=\"p-4 text-left text-xs font-bold text-gray-800 w-[3%]\">\r\n-                         SI\r\n-                     </th>\r\n-                     <th class=\"p-4 text-left text-xs font-bold w-[15%]\">\r\n-                         Product Name\r\n-                     </th>\r\n-                     <th class=\"p-4 text-left text-xs font-bold w-[11%]\">\r\n-                         Category\r\n-                     </th>\r\n-                    \r\n-                     <th class=\"p-4 text-left text-xs font-bold w-[10%]\">\r\n-                         Stock\r\n-                     </th>\r\n-                    \r\n-                     <th class=\"p-4 text-left text-xs font-bold w-[10%]\">\r\n-                         Price\r\n-                     </th>\r\n-                     <th class=\"p-4 text-left text-xs font-bold w-[10%]\">\r\n-                        Discount\r\n-                    </th>\r\n-                    <th class=\"p-4 text-left text-xs font-bold w-[10%]\">\r\n-                        Final Price\r\n-                    </th>\r\n-                     <th class=\"p-4 text-center text-xs font-bold w-[10%]\">\r\n-                         Action\r\n-                     </th>\r\n-                 </tr>\r\n-             </thead>\r\n- \r\n-             <tbody class=\"whitespace-nowrap\">\r\n- \r\n-                 <% products.forEach((product, index) => { %>\r\n- \r\n-                     <tr class=\"bg-gray-50\">\r\n-                         <td class=\"p-4 text-[15px] font-semibold text-gray-800\">\r\n-                             <%= ((currentPage - 1) * limit) + index + 1 %>\r\n-                         </td>\r\n-                         <td class=\"p-4 text-[15px] font-semibold text-gray-800\">\r\n-                             <%= product.name %>\r\n-                         </td>\r\n-                         <td class=\"p-4 text-[15px] font-semibold text-gray-800\">\r\n-                             <%= product.category.name %>\r\n-                         </td>\r\n-                        \r\n-                        \r\n-                         <td class=\"p-4 text-[15px] font-semibold text-gray-800\">\r\n-                             <%= product.stock %>\r\n-                         </td>\r\n-                         <td class=\"p-4 text-[15px] font-semibold text-gray-800\">\r\n- \r\n-                           <span>&#8377;</span><%= product.price %>\r\n-                         </td>\r\n-                         <td class=\"p-4 text-[15px] font-semibold text-gray-800\">\r\n-                            <%= product.discount %>\r\n-                        </td>\r\n-                         <td class=\"p-4 text-[15px] font-semibold text-gray-800\">\r\n- \r\n-                            <span>&#8377;</span><%= product.finalPrice %>\r\n-                          </td>\r\n-                         <td class=\"p-4 text-[15px] text-center font-semibold text-gray-800\">\r\n-                             \r\n-                              <!-- Block Unblock Button -->\r\n-                <button type=\"button\"\r\n-                class=\"block-unblock-btn w-[100px] px-4 py-2 rounded-lg text-white text-sm tracking-wider font-medium border border-current outline-none bg-<%= product.isActive ? 'orange-700' : 'green-700' %> hover:bg-<%= product.isActive ? 'orange-800' : 'green-800' %> active:bg-<%= product.isActive ? 'orange-700' : 'green-700' %>\"\r\n-                data-product-id=\"<%= product.id %>\"\r\n-                data-active=\"<%= product.isActive %>\">\r\n-                <%= product.isActive ? 'Block' : 'Unblock' %>\r\n-            </button>\r\n- \r\n-                             <!-- Edit Button  -->\r\n-                              <a href=\"/admin/updateproduct/<%= product.id %>\">\r\n-                                 <button type=\"button\"\r\n-                                 class=\"edit-product-btn w-[100px] px-4 py-2  text-white rounded-lg text-sm tracking-wider font-medium border border-current outline-none hover:bg-gray-600 bg-gray-500\">\r\n-                                 Edit\r\n-                             </button>\r\n-                              </a>\r\n-                         </td>\r\n-                     </tr>\r\n-                     <% }) %>\r\n-                 \r\n-             </tbody>\r\n-         </table>\r\n- \r\n-         <div class=\"mt-6 flex justify-between items-center px-8\">\r\n-             <!-- Previous Button -->\r\n-             <% if (currentPage > 1) { %>\r\n-               <a href=\"?page=<%= currentPage - 1 %>&limit=<%= limit %>\" class=\"px-4 py-2 bg-gray-300 text-sm rounded hover:bg-gray-400\">Previous</a>\r\n-             <% } else { %>\r\n-               <span class=\"px-4 py-2 bg-gray-300 text-sm rounded opacity-50\">Previous</span>\r\n-             <% } %>\r\n-           \r\n-             <!-- Page Numbers -->\r\n-             <div class=\"flex space-x-2\">\r\n-               <% for (let i = 1; i <= totalPages; i++) { %>\r\n-                 <% if (i === currentPage) { %>\r\n-                   <span class=\"px-4 py-2 bg-blue-500 text-white text-sm rounded\"><%= i %></span>\r\n-                 <% } else { %>\r\n-                   <a href=\"?page=<%= i %>&limit=<%= limit %>\" class=\"px-4 py-2 bg-gray-300 text-sm rounded hover:bg-gray-400\"><%= i %></a>\r\n-                 <% } %>\r\n-               <% } %>\r\n-             </div>\r\n-           \r\n-             <!-- Next Button -->\r\n-             <% if (currentPage < totalPages) { %>\r\n-               <a href=\"?page=<%= currentPage + 1 %>&limit=<%= limit %>\" class=\"px-4 py-2 bg-gray-300 text-sm rounded hover:bg-gray-400\">Next</a>\r\n-             <% } else { %>\r\n-               <span class=\"px-4 py-2 bg-gray-300 text-sm rounded opacity-50\">Next</span>\r\n-             <% } %>\r\n-           </div>\r\n- \r\n-     </div>\r\n- \r\n-       \r\n-       \r\n-    </div>\r\n- \r\n- \r\n-        <!--Block Unblock Modal -->\r\n- <div id=\"confirmation-modal\" class=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-50\">\r\n-     <div class=\"bg-white p-8 rounded-lg shadow-lg w-[400px]\">\r\n-       <h2 class=\"text-xl font-semibold mb-4\">Confirm Action</h2>\r\n-       <p id=\"modal-message\" class=\"mb-6 text-gray-700\">Are you sure you want to proceed?</p>\r\n-       <div class=\"flex justify-end space-x-4\">\r\n-         <button id=\"cancel-btn\" class=\"px-4 py-2 bg-gray-300 rounded-lg hover:bg-gray-400\">Cancel</button>\r\n-         <button id=\"confirm-btn\" class=\"px-4 py-2 bg-black text-white rounded-lg hover:bg-gray-900\">Confirm</button>\r\n-       </div>\r\n-     </div>\r\n-   </div>\r\n- \r\n-    \r\n-   <script>\r\n- \r\n- document.querySelectorAll('.pagination-link').forEach(link => {\r\n-     link.addEventListener('click', async (event) => {\r\n-       event.preventDefault();\r\n-       const url = event.target.href;\r\n- \r\n-       try {\r\n-         const response = await fetch(url);\r\n-         const html = await response.text();\r\n- \r\n-         // Replace the table and pagination controls with the new content\r\n-         const parser = new DOMParser();\r\n-         const doc = parser.parseFromString(html, 'text/html');\r\n-         const newTable = doc.querySelector('table');\r\n-         const newPagination = doc.querySelector('.pagination-controls');\r\n- \r\n-         document.querySelector('table').innerHTML = newTable.innerHTML;\r\n-         document.querySelector('.pagination-controls').innerHTML = newPagination.innerHTML;\r\n-       } catch (error) {\r\n-         console.error('Error fetching new page:', error);\r\n-       }\r\n-     });\r\n-   });\r\n-   \r\n-// Handle Block Unblock\r\n-document.querySelectorAll('.block-unblock-btn').forEach(button => {\r\n-    button.addEventListener('click', (event) => {\r\n-        const productId = event.target.getAttribute('data-product-id');\r\n-        const isActive = event.target.getAttribute('data-active') === 'true';\r\n-        const modalMessage = document.getElementById('modal-message');\r\n-\r\n-        // Show confirmation modal\r\n-        const modal = document.getElementById('confirmation-modal');\r\n-        modal.classList.remove('hidden');\r\n-\r\n-        // Set the modal message dynamically\r\n-        modalMessage.textContent = isActive\r\n-            ? 'Are you sure you want to block this product?'\r\n-            : 'Are you sure you want to unblock this product?';\r\n-\r\n-        // Handle modal cancel button\r\n-        document.getElementById('cancel-btn').addEventListener('click', () => {\r\n-            modal.classList.add('hidden');\r\n-        });\r\n-\r\n-        // Handle modal confirm button\r\n-        document.getElementById('confirm-btn').onclick = async function () {\r\n-            try {\r\n-                const response = await fetch(`/admin/products/${productId}/block`, {\r\n-                    method: 'POST',\r\n-                    headers: {\r\n-                        'Content-Type': 'application/json'\r\n-                    },\r\n-                    body: JSON.stringify({ active: !isActive }) // Send updated active status to the server\r\n-                });\r\n-\r\n-                if (response.ok) {\r\n-                    // Update the new active status dynamically\r\n-                    const newIsActive = !isActive;\r\n-\r\n-                    // Update button text and attributes\r\n-                    event.target.textContent = newIsActive ? 'Block' : 'Unblock';\r\n-                    event.target.setAttribute('data-active', newIsActive);\r\n-\r\n-                    // Update the button color\r\n-                    event.target.classList.toggle('bg-green-700', !newIsActive);\r\n-                    event.target.classList.toggle('bg-orange-700', newIsActive);\r\n-                    event.target.classList.toggle('hover:bg-green-800', !newIsActive);\r\n-                    event.target.classList.toggle('hover:bg-orange-800', newIsActive);\r\n-\r\n-                    // Close the confirmation modal\r\n-                    modal.classList.add('hidden');\r\n-                } else {\r\n-                    console.error('Failed to block/unblock product');\r\n-                }\r\n-            } catch (error) {\r\n-                console.error('Error:', error);\r\n-            }\r\n-        };\r\n-    });\r\n-});\r\n-\r\n-\r\n- \r\n-   </script>\r\n- \r\n-\r\n- \r\n-    <!-- JavaScript Libraries(needed)-->\r\n-    <script src=\"https://code.jquery.com/jquery-3.4.1.min.js\"></script>\r\n-    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js\"></script>\r\n-     <!-- Cropper JS -->\r\n-     <link href=\"https://unpkg.com/cropperjs/dist/cropper.min.css\" rel=\"stylesheet\">\r\n- \r\n-     <!-- Toastify  -->\r\n-     <link rel=\"stylesheet\" type=\"text/css\" href=\"https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css\">\r\n-        <!-- Tailwind CSS Script -->\r\n-        <script src=\"https://cdn.tailwindcss.com\"></script>\r\n- \r\n-        <!-- SweetAlert -->\r\n-        <script src=\"https://cdn.jsdelivr.net/npm/sweetalert2@11\"></script>\r\n-    \r\n-        <!-- Cropper JS -->\r\n-        <script src=\"https://unpkg.com/cropperjs/dist/cropper.min.js\"></script> \r\n-    \r\n-        <!-- Toastify  -->\r\n-        <script type=\"text/javascript\" src=\"https://cdn.jsdelivr.net/npm/toastify-js\"></script>\r\n- </div>\n\\ No newline at end of file\n+ \n\\ No newline at end of file\n"
                },
                {
                    "date": 1736336873917,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,1 @@\n+\r\n"
                }
            ],
            "date": 1736326078955,
            "name": "Commit-0",
            "content": "\r\n\r\n    <!-- include the sidebar partial  -->\r\n    <%- include('sidebar') %>\r\n \r\n \r\n     <!-- Navbar  -->\r\n    <div class=\"fixed top-0 left-0 right-0 z-10 flex items-center justify-between p-8 h-20 shadow-md ml-64 bg-gray-100\">\r\n     <div>\r\n         <h2 class=\"text-lg font-semibold\">Products</h2>\r\n     </div>\r\n     <div>\r\n         <form action=\"/admin/users\" method=\"GET\">\r\n             <input type=\"text\" name=\"search\" placeholder=\"Search\" class=\"p-2 w-[500px] h-10 rounded bg-gray-200\">\r\n         </form>\r\n     </div>\r\n   </div>\r\n \r\n    <div class=\" pt-24 pb-16\">\r\n      \r\n \r\n      <!-- Add Product button  -->\r\n \r\n      <div>\r\n         <a href=\"/admin/addproduct\"><button id=\"add-product-btn\" class=\"absolute right-8 px-4 py-2 bg-blue-800 text-white text-sm tracking-wider font-medium rounded hover:bg-blue-900\">Add New Product</button></a>\r\n       </div>\r\n \r\n     <!-- Table  -->\r\n \r\n     <div class=\"font-sans overflow-x-auto ml-8 mr-8 mt-12\">\r\n         <table class=\"min-w-full bg-white\">\r\n             <thead class=\" bg-gray-200 whitespace-nowrap\">\r\n                 <tr>\r\n                     <th class=\"p-4 text-left text-xs font-bold text-gray-800 w-[3%]\">\r\n                         SI\r\n                     </th>\r\n                     <th class=\"p-4 text-left text-xs font-bold w-[15%]\">\r\n                         Product Name\r\n                     </th>\r\n                     <th class=\"p-4 text-left text-xs font-bold w-[11%]\">\r\n                         Category\r\n                     </th>\r\n                    \r\n                     <th class=\"p-4 text-left text-xs font-bold w-[10%]\">\r\n                         Stock\r\n                     </th>\r\n                    \r\n                     <th class=\"p-4 text-left text-xs font-bold w-[10%]\">\r\n                         Price\r\n                     </th>\r\n                     <th class=\"p-4 text-left text-xs font-bold w-[10%]\">\r\n                        Discount\r\n                    </th>\r\n                    <th class=\"p-4 text-left text-xs font-bold w-[10%]\">\r\n                        Final Price\r\n                    </th>\r\n                     <th class=\"p-4 text-center text-xs font-bold w-[10%]\">\r\n                         Action\r\n                     </th>\r\n                 </tr>\r\n             </thead>\r\n \r\n             <tbody class=\"whitespace-nowrap\">\r\n \r\n                 <% products.forEach((product, index) => { %>\r\n \r\n                     <tr class=\"hover:bg-gray-50\">\r\n                         <td class=\"p-4 text-[15px] font-semibold text-gray-800\">\r\n                             <%= ((currentPage - 1) * limit) + index + 1 %>\r\n                         </td>\r\n                         <td class=\"p-4 text-[15px] font-semibold text-gray-800\">\r\n                             <%= product.name %>\r\n                         </td>\r\n                         <td class=\"p-4 text-[15px] font-semibold text-gray-800\">\r\n                             <%= product.category.name %>\r\n                         </td>\r\n                        \r\n                        \r\n                         <td class=\"p-4 text-[15px] font-semibold text-gray-800\">\r\n                             <%= product.stock %>\r\n                         </td>\r\n                         <td class=\"p-4 text-[15px] font-semibold text-gray-800\">\r\n \r\n                           <span>&#8377;</span><%= product.price %>\r\n                         </td>\r\n                         <td class=\"p-4 text-[15px] font-semibold text-gray-800\">\r\n                            <%= product.discount %>\r\n                        </td>\r\n                         <td class=\"p-4 text-[15px] font-semibold text-gray-800\">\r\n \r\n                            <span>&#8377;</span><%= product.finalPrice %>\r\n                          </td>\r\n                         <td class=\"p-4 text-[15px] text-center font-semibold text-gray-800\">\r\n                             \r\n                              <!-- Block Unblock Button -->\r\n                <button type=\"button\"\r\n                class=\"block-unblock-btn w-[100px] px-4 py-2 rounded-lg text-white text-sm tracking-wider font-medium border border-current outline-none bg-<%= product.isActive ? 'orange-700' : 'green-700' %> hover:bg-<%= product.isActive ? 'orange-800' : 'green-800' %> active:bg-<%= product.isActive ? 'orange-700' : 'green-700' %>\"\r\n                data-product-id=\"<%= product.id %>\"\r\n                data-active=\"<%= product.isActive %>\">\r\n                <%= product.isActive ? 'Block' : 'Unblock' %>\r\n            </button>\r\n \r\n                             <!-- Edit Button  -->\r\n                              <a href=\"/admin/updateproduct/<%= product.id %>\">\r\n                                 <button type=\"button\"\r\n                                 class=\"edit-product-btn w-[100px] px-4 py-2  text-white rounded-lg text-sm tracking-wider font-medium border border-current outline-none hover:bg-gray-600 bg-gray-500\">\r\n                                 Edit\r\n                             </button>\r\n                              </a>\r\n                         </td>\r\n                     </tr>\r\n                     <% }) %>\r\n                 \r\n             </tbody>\r\n         </table>\r\n \r\n         <div class=\"mt-6 flex justify-between items-center px-8\">\r\n             <!-- Previous Button -->\r\n             <% if (currentPage > 1) { %>\r\n               <a href=\"?page=<%= currentPage - 1 %>&limit=<%= limit %>\" class=\"px-4 py-2 bg-gray-300 text-sm rounded hover:bg-gray-400\">Previous</a>\r\n             <% } else { %>\r\n               <span class=\"px-4 py-2 bg-gray-300 text-sm rounded opacity-50\">Previous</span>\r\n             <% } %>\r\n           \r\n             <!-- Page Numbers -->\r\n             <div class=\"flex space-x-2\">\r\n               <% for (let i = 1; i <= totalPages; i++) { %>\r\n                 <% if (i === currentPage) { %>\r\n                   <span class=\"px-4 py-2 bg-blue-500 text-white text-sm rounded\"><%= i %></span>\r\n                 <% } else { %>\r\n                   <a href=\"?page=<%= i %>&limit=<%= limit %>\" class=\"px-4 py-2 bg-gray-300 text-sm rounded hover:bg-gray-400\"><%= i %></a>\r\n                 <% } %>\r\n               <% } %>\r\n             </div>\r\n           \r\n             <!-- Next Button -->\r\n             <% if (currentPage < totalPages) { %>\r\n               <a href=\"?page=<%= currentPage + 1 %>&limit=<%= limit %>\" class=\"px-4 py-2 bg-gray-300 text-sm rounded hover:bg-gray-400\">Next</a>\r\n             <% } else { %>\r\n               <span class=\"px-4 py-2 bg-gray-300 text-sm rounded opacity-50\">Next</span>\r\n             <% } %>\r\n           </div>\r\n \r\n     </div>\r\n \r\n       \r\n       \r\n    </div>\r\n \r\n \r\n        <!--Block Unblock Modal -->\r\n <div id=\"confirmation-modal\" class=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-50\">\r\n     <div class=\"bg-white p-8 rounded-lg shadow-lg w-[400px]\">\r\n       <h2 class=\"text-xl font-semibold mb-4\">Confirm Action</h2>\r\n       <p id=\"modal-message\" class=\"mb-6 text-gray-700\">Are you sure you want to proceed?</p>\r\n       <div class=\"flex justify-end space-x-4\">\r\n         <button id=\"cancel-btn\" class=\"px-4 py-2 bg-gray-300 rounded-lg hover:bg-gray-400\">Cancel</button>\r\n         <button id=\"confirm-btn\" class=\"px-4 py-2 bg-black text-white rounded-lg hover:bg-gray-900\">Confirm</button>\r\n       </div>\r\n     </div>\r\n   </div>\r\n \r\n    \r\n   <script>\r\n \r\n document.querySelectorAll('.pagination-link').forEach(link => {\r\n     link.addEventListener('click', async (event) => {\r\n       event.preventDefault();\r\n       const url = event.target.href;\r\n \r\n       try {\r\n         const response = await fetch(url);\r\n         const html = await response.text();\r\n \r\n         // Replace the table and pagination controls with the new content\r\n         const parser = new DOMParser();\r\n         const doc = parser.parseFromString(html, 'text/html');\r\n         const newTable = doc.querySelector('table');\r\n         const newPagination = doc.querySelector('.pagination-controls');\r\n \r\n         document.querySelector('table').innerHTML = newTable.innerHTML;\r\n         document.querySelector('.pagination-controls').innerHTML = newPagination.innerHTML;\r\n       } catch (error) {\r\n         console.error('Error fetching new page:', error);\r\n       }\r\n     });\r\n   });\r\n   \r\n// Handle Block Unblock\r\ndocument.querySelectorAll('.block-unblock-btn').forEach(button => {\r\n    button.addEventListener('click', (event) => {\r\n        const productId = event.target.getAttribute('data-product-id');\r\n        const isActive = event.target.getAttribute('data-active') === 'true';\r\n        const modalMessage = document.getElementById('modal-message');\r\n\r\n        // Show confirmation modal\r\n        const modal = document.getElementById('confirmation-modal');\r\n        modal.classList.remove('hidden');\r\n\r\n        // Set the modal message dynamically\r\n        modalMessage.textContent = isActive\r\n            ? 'Are you sure you want to block this product?'\r\n            : 'Are you sure you want to unblock this product?';\r\n\r\n        // Handle modal cancel button\r\n        document.getElementById('cancel-btn').addEventListener('click', () => {\r\n            modal.classList.add('hidden');\r\n        });\r\n\r\n        // Handle modal confirm button\r\n        document.getElementById('confirm-btn').onclick = async function () {\r\n            try {\r\n                const response = await fetch(`/admin/products/${productId}/block`, {\r\n                    method: 'POST',\r\n                    headers: {\r\n                        'Content-Type': 'application/json'\r\n                    },\r\n                    body: JSON.stringify({ active: !isActive }) // Send updated active status to the server\r\n                });\r\n\r\n                if (response.ok) {\r\n                    // Update the new active status dynamically\r\n                    const newIsActive = !isActive;\r\n\r\n                    // Update button text and attributes\r\n                    event.target.textContent = newIsActive ? 'Block' : 'Unblock';\r\n                    event.target.setAttribute('data-active', newIsActive);\r\n\r\n                    // Update the button color\r\n                    event.target.classList.toggle('bg-green-700', !newIsActive);\r\n                    event.target.classList.toggle('bg-orange-700', newIsActive);\r\n                    event.target.classList.toggle('hover:bg-green-800', !newIsActive);\r\n                    event.target.classList.toggle('hover:bg-orange-800', newIsActive);\r\n\r\n                    // Close the confirmation modal\r\n                    modal.classList.add('hidden');\r\n                } else {\r\n                    console.error('Failed to block/unblock product');\r\n                }\r\n            } catch (error) {\r\n                console.error('Error:', error);\r\n            }\r\n        };\r\n    });\r\n});\r\n\r\n\r\n \r\n   </script>\r\n \r\n\r\n \r\n    <!-- JavaScript Libraries(needed)-->\r\n    <script src=\"https://code.jquery.com/jquery-3.4.1.min.js\"></script>\r\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js\"></script>\r\n     <!-- Cropper JS -->\r\n     <link href=\"https://unpkg.com/cropperjs/dist/cropper.min.css\" rel=\"stylesheet\">\r\n \r\n     <!-- Toastify  -->\r\n     <link rel=\"stylesheet\" type=\"text/css\" href=\"https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css\">\r\n        <!-- Tailwind CSS Script -->\r\n        <script src=\"https://cdn.tailwindcss.com\"></script>\r\n \r\n        <!-- SweetAlert -->\r\n        <script src=\"https://cdn.jsdelivr.net/npm/sweetalert2@11\"></script>\r\n    \r\n        <!-- Cropper JS -->\r\n        <script src=\"https://unpkg.com/cropperjs/dist/cropper.min.js\"></script> \r\n    \r\n        <!-- Toastify  -->\r\n        <script type=\"text/javascript\" src=\"https://cdn.jsdelivr.net/npm/toastify-js\"></script>\r\n </div>"
        }
    ]
}